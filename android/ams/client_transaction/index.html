
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Activity框架01-客户端事务管理">
      
      
        <meta name="author" content="Solo">
      
      
        <link rel="canonical" href="https://0.0.0.0:8000/android/ams/client_transaction/">
      
      
        <link rel="prev" href="../launch-modes/">
      
      
        <link rel="next" href="../activity_client_record/">
      
      
      <link rel="icon" href="../../../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Activity框架01-客户端事务管理 - Solo's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../fonts/lxgw-wenkai.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra2.css">
    
      <link rel="stylesheet" href="../../../stylesheets/link.css">
    
      <link rel="stylesheet" href="../../../stylesheets/customize.css">
    
      <link rel="stylesheet" href="../../../stylesheets/bannerSlider.css">
    
      <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      



<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="页眉">
        <a href="../../.." title="Solo&#39;s Blog"
           class="md-header__button md-logo" aria-label="Solo's Blog" data-md-component="logo">
            
  <img src="../../../assets/images/logo.png" alt="logo">

        </a>
        <label class="md-header__button md-icon" for="__drawer">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
        </label>
        <div class="md-header__title" data-md-component="header-title">
            <div class="md-header__ellipsis">
                <div class="md-header__topic">
          <span class="md-ellipsis">
            Solo's Blog
          </span>
                </div>
                <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Activity框架01-客户端事务管理
            
          </span>
                </div>
            </div>
        </div>
        
        



<div class="md-copyright">
    
    <font color=#608DBD size=3>
        <span id="jinrishici-sentence">正在加载今日诗词....</span>
        <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    </font>
    

    
</div>
        
        
        
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
        
        
        
        <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
        
        
        
        <label class="md-header__button md-icon" for="__search">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
        
        <div class="md-header__source">
            <a href="https://github.com/i-rtfsc/note" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    i-rtfsc/note
  </div>
</a>
        </div>
        
    </nav>
    
    
    
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../brightness/automatic-brightness-intro/" class="md-tabs__link">
          
  
    
  
  Android

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../base/51-android-rules/" class="md-tabs__link">
          
  
    
  
  基础技术

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../development-board/raspberry-pi/intro/" class="md-tabs__link">
          
  
    
  
  开发板

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../source-code/personal-source-code-intro/" class="md-tabs__link">
          
  
    
  
  源码工程

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
    
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Solo&#39;s Blog" class="md-nav__button md-logo" aria-label="Solo's Blog" data-md-component="logo">
      
  <img src="../../../assets/images/logo.png" alt="logo">

    </a>
    Solo's Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/i-rtfsc/note" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    i-rtfsc/note
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Android
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Android
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../brightness/automatic-brightness-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android自动背光机制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tombstones/tombstones-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NativeTombstoneManager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bootanimation/bootanimation-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bootanimation程序简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AMS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            AMS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../launch-modes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity四大启动模式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Activity框架01-客户端事务管理
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Activity框架01-客户端事务管理
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      背景
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      类图
    </span>
  </a>
  
    <nav class="md-nav" aria-label="类图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activitylifecycleitem" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityLifecycleItem类图
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activitytransactionitem" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityTransactionItem类图
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionitem" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransactionItem类图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      小结
    </span>
  </a>
  
    <nav class="md-nav" aria-label="小结">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activitylifecycleitem_1" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityLifecycleItem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activitytransactionitem_1" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityTransactionItem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionitem_1" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransactionItem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransaction" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      代码案例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="代码案例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clienttransactionobtain" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.obtain()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionaddcallback" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.addCallback()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionsetlifecyclestaterequest" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.setLifecycleStateRequest()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientlifecyclemanagerscheduletransaction" class="md-nav__link">
    <span class="md-ellipsis">
      ClientLifecycleManager.scheduleTransaction()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionschedule" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.schedule()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applicationthreadscheduletransaction" class="md-nav__link">
    <span class="md-ellipsis">
      ApplicationThread.scheduleTransaction()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionhandlerscheduletransaction" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransactionHandler.scheduleTransaction()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ClientTransactionHandler.scheduleTransaction()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clienttransactionpreexecute" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.preExecute()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlemessageexecute_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      handleMessage(EXECUTE_TRANSACTION)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="handleMessage(EXECUTE_TRANSACTION)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transactionexecutor" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor构造函数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorexecute" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.execute()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorexecutecallbacks" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.executeCallbacks()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionExecutor.executeCallbacks()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launchactivityitemexecute" class="md-nav__link">
    <span class="md-ellipsis">
      LaunchActivityItem.execute()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launchactivityitempostexecute" class="md-nav__link">
    <span class="md-ellipsis">
      LaunchActivityItem.postExecute()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorexecutelifecyclestate" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.executeLifecycleState()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionExecutor.executeLifecycleState()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transactionexecutorcycletopath" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.cycleToPath()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionExecutor.cycleToPath()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activityclientrecordgetlifecyclestate" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityClientRecord.getLifecycleState()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorhelpergetlifecyclepath" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutorHelper.getLifecyclePath()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorperformlifecyclesequence" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.performLifecycleSequence()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resumeactivityitemexecute" class="md-nav__link">
    <span class="md-ellipsis">
      ResumeActivityItem.execute()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resumeactivityitempostexecute" class="md-nav__link">
    <span class="md-ellipsis">
      ResumeActivityItem.postExecute()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activity_client_record/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity框架02-ActivityClientRecord
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activity_thread/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity框架03-ActivityThread
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activity_context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity框架04-Activity和Context的关系
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity生命周期
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../android11-activity-start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android11 Activity启动流程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wm-layout-params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WindowManager.LayoutParams
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../frida-dump-activity-lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    frida dump activity生命周期
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Broadcast
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Broadcast
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../broadcast/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Broadcast概述
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SELinux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            SELinux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../selinux/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android SELinux介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../selinux/genfscon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    genfscon
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Binder
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Binder
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/android12-native-binder-change/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 12 Native Binder 代码变迁
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/ashmem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ashmem简介（Android IPC传输大数据）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/driver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binder机制01-驱动
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/service-manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binder机制02-ServiceManager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/framework-native/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binder机制03-Framework-Native
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/framework-java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binder机制04-Framework-Java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/aidl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binder机制05-AIDL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binder概述
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../binder/am-trace-ipc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    am trace-ipc 分析
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Car
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Car
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_1" >
        
          
          <label class="md-nav__link" for="__nav_2_8_1" id="__nav_2_8_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CarService
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_1">
            <span class="md-nav__icon md-icon"></span>
            CarService
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/carservice/start-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 15 CarService源码01-服务启动
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/carservice/init-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 15 CarService源码02-服务初始化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/carservice/all-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 15 CarService源码03-服务及接口
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/carservice/carservice-call-vhal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 15 CarService源码04-CarService与Vehicle HAL交互
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/carservice/system-interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 15 CarService源码05-SystemInterface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/carservice/car-input-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 15 CarService源码06-CarInputService
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/carservice/car-wifi-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 15 CarService源码07-CarWifiService
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_2" >
        
          
          <label class="md-nav__link" for="__nav_2_8_2" id="__nav_2_8_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Vehicle
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_2">
            <span class="md-nav__icon md-icon"></span>
            Vehicle
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/vehicle/android-s-hal-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android-S Vehicle HAL架构
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../car/vehicle/android-u-hal-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android-U Vehicle HAL架构
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Input
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            Input
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../input/focused-window/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android 窗口焦点介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../input/inotify-epoll/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    INotify与Epoll机制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../input/inputDispatcher-inputChannel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    InputDispatcher与InputChannel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../input/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Input概述
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../input/start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Input系统01-Input启动过程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../input/input-reader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Input系统02-InputReader线程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../input/scancode-keycode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scancode到Keycode的映射
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../input/add-new-key/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    新增物理按键处理流程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基础与工具
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            基础与工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../base-tools/adb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../base-tools/api-levels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android API Levels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../base-tools/as-shortcut-keys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android Studio 快捷键
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../base-tools/as-compdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compdb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../base-tools/c-ifdef/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    c代码中 ifdef 多条件判断
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../base-tools/repo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repo常用操作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../base-tools/ccache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用ccache加快编译速度
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../base-tools/winscope/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    编译winscope
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    巧夺天工
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            巧夺天工
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../divine-skill/android-bp-if-else/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android.bp 添加宏控
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../divine-skill/service-extra-func-without-aidl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aosp原生Service快捷扩展接口
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../divine-skill/mem-pressure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内存加压
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../divine-skill/log-to-line-chart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通过log中的坐标转成折线图
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_12" >
        
          
          <label class="md-nav__link" for="__nav_2_12" id="__nav_2_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    调试技巧
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_12">
            <span class="md-nav__icon md-icon"></span>
            调试技巧
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/tomestone-stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android Native crash tomestone trace tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/call-stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android打印函数调用流程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/am-set-debug-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    am set-debug-app 介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/privapp-permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    privapp permissions检查
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/event-log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    借助 event log 有效排查问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/merge-sort-log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    按时间顺序合并log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/jdwp-enabled/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    无法打断点调试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_12_8" >
        
          
          <label class="md-nav__link" for="__nav_2_12_8" id="__nav_2_12_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    调频命令
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_12_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_12_8">
            <span class="md-nav__icon md-icon"></span>
            调频命令
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/frequency/cpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CPU提频命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug-skill/frequency/gpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GPU提频命令
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_13" >
        
          
          <label class="md-nav__link" for="__nav_2_13" id="__nav_2_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    问题及方案
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_13">
            <span class="md-nav__icon md-icon"></span>
            问题及方案
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../issue-solution/set-affinity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android进程绑核方案
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../issue_solution/car-service-updatable-call-hide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CarServiceUpdatable引用hide接口
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    基础技术
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            基础技术
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/51-android-rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    51-android.rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/jar-delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jar包删除部分内容
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/jetbrains_directories/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JetBrains配置目录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/git_branch_commit_single/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git小技巧-commit single
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/hexo-next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hexo、next主题美化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/linux-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    linux service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/mkdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mkdocs博客搭建
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/sshfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sshfs命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/tmux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tmux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../base/tar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tar命令
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    开发板
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            开发板
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    树莓派
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            树莓派
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development-board/raspberry-pi/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    树莓派基础配置
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    源码工程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            源码工程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/personal-source-code-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    个人源码工程简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ExtFrameworks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            ExtFrameworks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/aosp-ext/fwk-ext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aosp frameworks扩展方案
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Android feature
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Android feature
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/android-feature/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android Device Feature
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    As aosp
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            As aosp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    as-aosp工程简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/first-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    教程001-首次配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    教程002-设计思路
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/simple-extra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    教程003-简单扩展
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/plugin-extra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    教程004-插件扩展
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/jump-system-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    教程005-跳转系统源码[6.x版本默认跳转]
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/jump-aidl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    教程006-aidl跳转
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/jump-cpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    教程007-c++跳转
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/as-aosp/jump-system-code-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    教程008-跳转系统源码[进阶版]
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Global scripts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            Global scripts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source-code/global-scripts/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    global_scripts工程简介
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      背景
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      类图
    </span>
  </a>
  
    <nav class="md-nav" aria-label="类图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activitylifecycleitem" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityLifecycleItem类图
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activitytransactionitem" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityTransactionItem类图
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionitem" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransactionItem类图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      小结
    </span>
  </a>
  
    <nav class="md-nav" aria-label="小结">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activitylifecycleitem_1" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityLifecycleItem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activitytransactionitem_1" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityTransactionItem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionitem_1" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransactionItem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransaction" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      代码案例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="代码案例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clienttransactionobtain" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.obtain()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionaddcallback" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.addCallback()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionsetlifecyclestaterequest" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.setLifecycleStateRequest()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientlifecyclemanagerscheduletransaction" class="md-nav__link">
    <span class="md-ellipsis">
      ClientLifecycleManager.scheduleTransaction()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionschedule" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.schedule()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applicationthreadscheduletransaction" class="md-nav__link">
    <span class="md-ellipsis">
      ApplicationThread.scheduleTransaction()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clienttransactionhandlerscheduletransaction" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransactionHandler.scheduleTransaction()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ClientTransactionHandler.scheduleTransaction()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clienttransactionpreexecute" class="md-nav__link">
    <span class="md-ellipsis">
      ClientTransaction.preExecute()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlemessageexecute_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      handleMessage(EXECUTE_TRANSACTION)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="handleMessage(EXECUTE_TRANSACTION)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transactionexecutor" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor构造函数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorexecute" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.execute()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorexecutecallbacks" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.executeCallbacks()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionExecutor.executeCallbacks()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launchactivityitemexecute" class="md-nav__link">
    <span class="md-ellipsis">
      LaunchActivityItem.execute()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launchactivityitempostexecute" class="md-nav__link">
    <span class="md-ellipsis">
      LaunchActivityItem.postExecute()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorexecutelifecyclestate" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.executeLifecycleState()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionExecutor.executeLifecycleState()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transactionexecutorcycletopath" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.cycleToPath()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionExecutor.cycleToPath()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activityclientrecordgetlifecyclestate" class="md-nav__link">
    <span class="md-ellipsis">
      ActivityClientRecord.getLifecycleState()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorhelpergetlifecyclepath" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutorHelper.getLifecyclePath()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transactionexecutorperformlifecyclesequence" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionExecutor.performLifecycleSequence()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resumeactivityitemexecute" class="md-nav__link">
    <span class="md-ellipsis">
      ResumeActivityItem.execute()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resumeactivityitempostexecute" class="md-nav__link">
    <span class="md-ellipsis">
      ResumeActivityItem.postExecute()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

<nav class="md-tags" >
  
    
    
      
      
    
    
      <span class="md-tag md-tag-icon">Android</span>
    
  
    
    
      
      
    
    
      <span class="md-tag md-tag-icon">AMS</span>
    
  
    
    
      
      
    
    
      <span class="md-tag md-tag-icon">Activity</span>
    
  
</nav>


  
    <a href="https://github.com/i-rtfsc/note/edit/main/docs/Android/AMS/Activity框架01-ClientTransaction.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  


<h1>Activity框架01-客户端事务管理</h1>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>基于 android-14.0.0_r45</p>
</div>
<h2 id="_1">背景<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>Activity启动框架非常复杂，看了网上很多博客基本上都是用一篇文章讲完activity的启动流程。这样很多细节其实都没讲到，而且篇幅过长学习起来也很吃力。</p>
<p>在  <strong>Activity框架</strong> 系列文章中，我们将一点一点的拆分讲解跟 Activity启动有个的知识点。</p>
<p>那么我们先从一个最简单的 <strong>Activity客户端事务管理</strong> 讲起，为后续的Activity启动流程打下基础。</p>
<p>生命周期管理是google在Android 9才引入的设计，在Android 9之前，activity 存在生命周期的概念，但并无生命周期管理这一说法。</p>
<p>为了方便生命周期的切换以及相关业务的管理，google采用了事务的思想，将生命周期抽象为客户端事务的一部分来统一管理。</p>
<h2 id="_2">类图<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>下图是客户端事务管理完整的类图：</p>
<details><summary>plantuml(点击展开详情)</summary>

<div class="puml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="975px" preserveAspectRatio="true" style="background: #ffffff" version="1.1" viewBox="0 0 1476 975" width="1476px" zoomAndPan="magnify"><defs/><g><g id="elem_ActivityConfigurationChangeItem"><rect codeLine="5" fill="#F1F1F1" height="48" id="ActivityConfigurationChangeItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="265.0166" x="251.55" y="90"/><ellipse cx="266.55" cy="106" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M269.5188,111.6406 Q268.9406,111.9375 268.3,112.0781 Q267.6594,112.2344 266.9563,112.2344 Q264.4563,112.2344 263.1281,110.5938 Q261.8156,108.9375 261.8156,105.8125 Q261.8156,102.6875 263.1281,101.0313 Q264.4563,99.375 266.9563,99.375 Q267.6594,99.375 268.3,99.5313 Q268.9563,99.6875 269.5188,99.9844 L269.5188,102.7031 Q268.8938,102.125 268.3,101.8594 Q267.7063,101.5781 267.0813,101.5781 Q265.7375,101.5781 265.05,102.6563 Q264.3625,103.7188 264.3625,105.8125 Q264.3625,107.9063 265.05,108.9844 Q265.7375,110.0469 267.0813,110.0469 Q267.7063,110.0469 268.3,109.7813 Q268.8938,109.5 269.5188,108.9219 L269.5188,111.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233.0166" x="280.55" y="110.8467">ActivityConfigurationChangeItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="252.55" x2="515.5666" y1="122" y2="122"/><line style="stroke:#181818;stroke-width:0.5;" x1="252.55" x2="515.5666" y1="130" y2="130"/></g><g id="elem_ActivityLifecycleItem"><rect codeLine="6" fill="#F1F1F1" height="48" id="ActivityLifecycleItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="177.8857" x="295.12" y="173"/><ellipse cx="310.12" cy="189" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M313.0888,194.6406 Q312.5106,194.9375 311.87,195.0781 Q311.2294,195.2344 310.5263,195.2344 Q308.0263,195.2344 306.6981,193.5938 Q305.3856,191.9375 305.3856,188.8125 Q305.3856,185.6875 306.6981,184.0313 Q308.0263,182.375 310.5263,182.375 Q311.2294,182.375 311.87,182.5313 Q312.5263,182.6875 313.0888,182.9844 L313.0888,185.7031 Q312.4638,185.125 311.87,184.8594 Q311.2763,184.5781 310.6513,184.5781 Q309.3075,184.5781 308.62,185.6563 Q307.9325,186.7188 307.9325,188.8125 Q307.9325,190.9063 308.62,191.9844 Q309.3075,193.0469 310.6513,193.0469 Q311.2763,193.0469 311.87,192.7813 Q312.4638,192.5 313.0888,191.9219 L313.0888,194.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.8857" x="324.12" y="193.8467">ActivityLifecycleItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="296.12" x2="472.0057" y1="205" y2="205"/><line style="stroke:#181818;stroke-width:0.5;" x1="296.12" x2="472.0057" y1="213" y2="213"/></g><g id="elem_ActivityRelaunchItem"><rect codeLine="7" fill="#F1F1F1" height="48" id="ActivityRelaunchItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="181.5977" x="293.26" y="256"/><ellipse cx="308.26" cy="272" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M311.2288,277.6406 Q310.6506,277.9375 310.01,278.0781 Q309.3694,278.2344 308.6663,278.2344 Q306.1663,278.2344 304.8381,276.5938 Q303.5256,274.9375 303.5256,271.8125 Q303.5256,268.6875 304.8381,267.0313 Q306.1663,265.375 308.6663,265.375 Q309.3694,265.375 310.01,265.5313 Q310.6663,265.6875 311.2288,265.9844 L311.2288,268.7031 Q310.6038,268.125 310.01,267.8594 Q309.4163,267.5781 308.7913,267.5781 Q307.4475,267.5781 306.76,268.6563 Q306.0725,269.7188 306.0725,271.8125 Q306.0725,273.9063 306.76,274.9844 Q307.4475,276.0469 308.7913,276.0469 Q309.4163,276.0469 310.01,275.7813 Q310.6038,275.5 311.2288,274.9219 L311.2288,277.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.5977" x="322.26" y="276.8467">ActivityRelaunchItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="294.26" x2="473.8577" y1="288" y2="288"/><line style="stroke:#181818;stroke-width:0.5;" x1="294.26" x2="473.8577" y1="296" y2="296"/></g><g id="elem_ActivityResultItem"><rect codeLine="8" fill="#F1F1F1" height="48" id="ActivityResultItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="160.3584" x="303.88" y="339"/><ellipse cx="318.88" cy="355" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M321.8488,360.6406 Q321.2706,360.9375 320.63,361.0781 Q319.9894,361.2344 319.2863,361.2344 Q316.7863,361.2344 315.4581,359.5938 Q314.1456,357.9375 314.1456,354.8125 Q314.1456,351.6875 315.4581,350.0313 Q316.7863,348.375 319.2863,348.375 Q319.9894,348.375 320.63,348.5313 Q321.2863,348.6875 321.8488,348.9844 L321.8488,351.7031 Q321.2238,351.125 320.63,350.8594 Q320.0363,350.5781 319.4113,350.5781 Q318.0675,350.5781 317.38,351.6563 Q316.6925,352.7188 316.6925,354.8125 Q316.6925,356.9063 317.38,357.9844 Q318.0675,359.0469 319.4113,359.0469 Q320.0363,359.0469 320.63,358.7813 Q321.2238,358.5 321.8488,357.9219 L321.8488,360.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.3584" x="332.88" y="359.8467">ActivityResultItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="304.88" x2="463.2384" y1="371" y2="371"/><line style="stroke:#181818;stroke-width:0.5;" x1="304.88" x2="463.2384" y1="379" y2="379"/></g><g id="elem_ActivityTransactionItem"><rect codeLine="9" fill="#F1F1F1" height="48" id="ActivityTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="198.6191" x="594.79" y="505"/><ellipse cx="609.79" cy="521" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M612.7588,526.6406 Q612.1806,526.9375 611.54,527.0781 Q610.8994,527.2344 610.1963,527.2344 Q607.6963,527.2344 606.3681,525.5938 Q605.0556,523.9375 605.0556,520.8125 Q605.0556,517.6875 606.3681,516.0313 Q607.6963,514.375 610.1963,514.375 Q610.8994,514.375 611.54,514.5313 Q612.1963,514.6875 612.7588,514.9844 L612.7588,517.7031 Q612.1338,517.125 611.54,516.8594 Q610.9463,516.5781 610.3213,516.5781 Q608.9775,516.5781 608.29,517.6563 Q607.6025,518.7188 607.6025,520.8125 Q607.6025,522.9063 608.29,523.9844 Q608.9775,525.0469 610.3213,525.0469 Q610.9463,525.0469 611.54,524.7813 Q612.1338,524.5 612.7588,523.9219 L612.7588,526.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166.6191" x="623.79" y="525.8467">ActivityTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="595.79" x2="792.4091" y1="537" y2="537"/><line style="stroke:#181818;stroke-width:0.5;" x1="595.79" x2="792.4091" y1="545" y2="545"/></g><g id="elem_BaseClientRequest"><rect codeLine="10" fill="#F1F1F1" height="56.2656" id="BaseClientRequest" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="164.1182" x="1106.85" y="583.87"/><ellipse cx="1121.85" cy="604.0028" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1117.7719,599.7684 L1117.7719,597.6122 L1125.1625,597.6122 L1125.1625,599.7684 L1122.6938,599.7684 L1122.6938,607.8466 L1125.1625,607.8466 L1125.1625,610.0028 L1117.7719,610.0028 L1117.7719,607.8466 L1120.2406,607.8466 L1120.2406,599.7684 L1117.7719,599.7684 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.2031" x="1167.8075" y="600.0087">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="132.1182" x="1135.85" y="615.8339">BaseClientRequest</text><line style="stroke:#181818;stroke-width:0.5;" x1="1107.85" x2="1269.9682" y1="624.1356" y2="624.1356"/><line style="stroke:#181818;stroke-width:0.5;" x1="1107.85" x2="1269.9682" y1="632.1356" y2="632.1356"/></g><g id="elem_ClientTransaction"><rect codeLine="11" fill="#F1F1F1" height="48" id="ClientTransaction" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="154.6777" x="1111.57" y="675"/><ellipse cx="1126.57" cy="691" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1129.5388,696.6406 Q1128.9606,696.9375 1128.32,697.0781 Q1127.6794,697.2344 1126.9763,697.2344 Q1124.4763,697.2344 1123.1481,695.5938 Q1121.8356,693.9375 1121.8356,690.8125 Q1121.8356,687.6875 1123.1481,686.0313 Q1124.4763,684.375 1126.9763,684.375 Q1127.6794,684.375 1128.32,684.5313 Q1128.9763,684.6875 1129.5388,684.9844 L1129.5388,687.7031 Q1128.9138,687.125 1128.32,686.8594 Q1127.7263,686.5781 1127.1013,686.5781 Q1125.7575,686.5781 1125.07,687.6563 Q1124.3825,688.7188 1124.3825,690.8125 Q1124.3825,692.9063 1125.07,693.9844 Q1125.7575,695.0469 1127.1013,695.0469 Q1127.7263,695.0469 1128.32,694.7813 Q1128.9138,694.5 1129.5388,693.9219 L1129.5388,696.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.6777" x="1140.57" y="695.8467">ClientTransaction</text><line style="stroke:#181818;stroke-width:0.5;" x1="1112.57" x2="1265.2477" y1="707" y2="707"/><line style="stroke:#181818;stroke-width:0.5;" x1="1112.57" x2="1265.2477" y1="715" y2="715"/></g><g id="elem_ClientTransactionItem"><rect codeLine="12" fill="#F1F1F1" height="48" id="ClientTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="186.5469" x="860.3" y="588"/><ellipse cx="875.3" cy="604" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M878.2688,609.6406 Q877.6906,609.9375 877.05,610.0781 Q876.4094,610.2344 875.7063,610.2344 Q873.2063,610.2344 871.8781,608.5938 Q870.5656,606.9375 870.5656,603.8125 Q870.5656,600.6875 871.8781,599.0313 Q873.2063,597.375 875.7063,597.375 Q876.4094,597.375 877.05,597.5313 Q877.7063,597.6875 878.2688,597.9844 L878.2688,600.7031 Q877.6438,600.125 877.05,599.8594 Q876.4563,599.5781 875.8313,599.5781 Q874.4875,599.5781 873.8,600.6563 Q873.1125,601.7188 873.1125,603.8125 Q873.1125,605.9063 873.8,606.9844 Q874.4875,608.0469 875.8313,608.0469 Q876.4563,608.0469 877.05,607.7813 Q877.6438,607.5 878.2688,606.9219 L878.2688,609.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.5469" x="889.3" y="608.8467">ClientTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="861.3" x2="1045.8469" y1="620" y2="620"/><line style="stroke:#181818;stroke-width:0.5;" x1="861.3" x2="1045.8469" y1="628" y2="628"/></g><g id="elem_ConfigurationChangeItem"><rect codeLine="13" fill="#F1F1F1" height="48" id="ConfigurationChangeItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="212.4141" x="587.89" y="588"/><ellipse cx="602.89" cy="604" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M605.8588,609.6406 Q605.2806,609.9375 604.64,610.0781 Q603.9994,610.2344 603.2963,610.2344 Q600.7963,610.2344 599.4681,608.5938 Q598.1556,606.9375 598.1556,603.8125 Q598.1556,600.6875 599.4681,599.0313 Q600.7963,597.375 603.2963,597.375 Q603.9994,597.375 604.64,597.5313 Q605.2963,597.6875 605.8588,597.9844 L605.8588,600.7031 Q605.2338,600.125 604.64,599.8594 Q604.0463,599.5781 603.4213,599.5781 Q602.0775,599.5781 601.39,600.6563 Q600.7025,601.7188 600.7025,603.8125 Q600.7025,605.9063 601.39,606.9844 Q602.0775,608.0469 603.4213,608.0469 Q604.0463,608.0469 604.64,607.7813 Q605.2338,607.5 605.8588,606.9219 L605.8588,609.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.4141" x="616.89" y="608.8467">ConfigurationChangeItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="588.89" x2="799.3041" y1="620" y2="620"/><line style="stroke:#181818;stroke-width:0.5;" x1="588.89" x2="799.3041" y1="628" y2="628"/></g><g id="elem_DestroyActivityItem"><rect codeLine="14" fill="#F1F1F1" height="48" id="DestroyActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="171.2549" x="7.99" y="7"/><ellipse cx="22.99" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M25.9588,28.6406 Q25.3806,28.9375 24.74,29.0781 Q24.0994,29.2344 23.3963,29.2344 Q20.8963,29.2344 19.5681,27.5938 Q18.2556,25.9375 18.2556,22.8125 Q18.2556,19.6875 19.5681,18.0313 Q20.8963,16.375 23.3963,16.375 Q24.0994,16.375 24.74,16.5313 Q25.3963,16.6875 25.9588,16.9844 L25.9588,19.7031 Q25.3338,19.125 24.74,18.8594 Q24.1463,18.5781 23.5213,18.5781 Q22.1775,18.5781 21.49,19.6563 Q20.8025,20.7188 20.8025,22.8125 Q20.8025,24.9063 21.49,25.9844 Q22.1775,27.0469 23.5213,27.0469 Q24.1463,27.0469 24.74,26.7813 Q25.3338,26.5 25.9588,25.9219 L25.9588,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.2549" x="36.99" y="27.8467">DestroyActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8.99" x2="178.2449" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="8.99" x2="178.2449" y1="47" y2="47"/></g><g id="elem_EnterPipRequestedItem"><rect codeLine="15" fill="#F1F1F1" height="48" id="EnterPipRequestedItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="197.6621" x="285.23" y="422"/><ellipse cx="300.23" cy="438" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M303.1988,443.6406 Q302.6206,443.9375 301.98,444.0781 Q301.3394,444.2344 300.6363,444.2344 Q298.1363,444.2344 296.8081,442.5938 Q295.4956,440.9375 295.4956,437.8125 Q295.4956,434.6875 296.8081,433.0313 Q298.1363,431.375 300.6363,431.375 Q301.3394,431.375 301.98,431.5313 Q302.6363,431.6875 303.1988,431.9844 L303.1988,434.7031 Q302.5738,434.125 301.98,433.8594 Q301.3863,433.5781 300.7613,433.5781 Q299.4175,433.5781 298.73,434.6563 Q298.0425,435.7188 298.0425,437.8125 Q298.0425,439.9063 298.73,440.9844 Q299.4175,442.0469 300.7613,442.0469 Q301.3863,442.0469 301.98,441.7813 Q302.5738,441.5 303.1988,440.9219 L303.1988,443.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165.6621" x="314.23" y="442.8467">EnterPipRequestedItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="286.23" x2="481.8921" y1="454" y2="454"/><line style="stroke:#181818;stroke-width:0.5;" x1="286.23" x2="481.8921" y1="462" y2="462"/></g><g id="elem_LaunchActivityItem"><rect codeLine="16" fill="#F1F1F1" height="48" id="LaunchActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="167.167" x="610.51" y="671"/><ellipse cx="625.51" cy="687" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M628.4788,692.6406 Q627.9006,692.9375 627.26,693.0781 Q626.6194,693.2344 625.9163,693.2344 Q623.4163,693.2344 622.0881,691.5938 Q620.7756,689.9375 620.7756,686.8125 Q620.7756,683.6875 622.0881,682.0313 Q623.4163,680.375 625.9163,680.375 Q626.6194,680.375 627.26,680.5313 Q627.9163,680.6875 628.4788,680.9844 L628.4788,683.7031 Q627.8538,683.125 627.26,682.8594 Q626.6663,682.5781 626.0413,682.5781 Q624.6975,682.5781 624.01,683.6563 Q623.3225,684.7188 623.3225,686.8125 Q623.3225,688.9063 624.01,689.9844 Q624.6975,691.0469 626.0413,691.0469 Q626.6663,691.0469 627.26,690.7813 Q627.8538,690.5 628.4788,689.9219 L628.4788,692.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.167" x="639.51" y="691.8467">LaunchActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="611.51" x2="776.677" y1="703" y2="703"/><line style="stroke:#181818;stroke-width:0.5;" x1="611.51" x2="776.677" y1="711" y2="711"/></g><g id="elem_MoveToDisplayItem"><rect codeLine="17" fill="#F1F1F1" height="48" id="MoveToDisplayItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="170.1338" x="298.99" y="505"/><ellipse cx="313.99" cy="521" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M316.9588,526.6406 Q316.3806,526.9375 315.74,527.0781 Q315.0994,527.2344 314.3963,527.2344 Q311.8963,527.2344 310.5681,525.5938 Q309.2556,523.9375 309.2556,520.8125 Q309.2556,517.6875 310.5681,516.0313 Q311.8963,514.375 314.3963,514.375 Q315.0994,514.375 315.74,514.5313 Q316.3963,514.6875 316.9588,514.9844 L316.9588,517.7031 Q316.3338,517.125 315.74,516.8594 Q315.1463,516.5781 314.5213,516.5781 Q313.1775,516.5781 312.49,517.6563 Q311.8025,518.7188 311.8025,520.8125 Q311.8025,522.9063 312.49,523.9844 Q313.1775,525.0469 314.5213,525.0469 Q315.1463,525.0469 315.74,524.7813 Q316.3338,524.5 316.9588,523.9219 L316.9588,526.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138.1338" x="327.99" y="525.8467">MoveToDisplayItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="299.99" x2="468.1238" y1="537" y2="537"/><line style="stroke:#181818;stroke-width:0.5;" x1="299.99" x2="468.1238" y1="545" y2="545"/></g><g id="elem_NewIntentItem"><rect codeLine="18" fill="#F1F1F1" height="48" id="NewIntentItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="135.8721" x="316.12" y="588"/><ellipse cx="331.12" cy="604" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M334.0888,609.6406 Q333.5106,609.9375 332.87,610.0781 Q332.2294,610.2344 331.5263,610.2344 Q329.0263,610.2344 327.6981,608.5938 Q326.3856,606.9375 326.3856,603.8125 Q326.3856,600.6875 327.6981,599.0313 Q329.0263,597.375 331.5263,597.375 Q332.2294,597.375 332.87,597.5313 Q333.5263,597.6875 334.0888,597.9844 L334.0888,600.7031 Q333.4638,600.125 332.87,599.8594 Q332.2763,599.5781 331.6513,599.5781 Q330.3075,599.5781 329.62,600.6563 Q328.9325,601.7188 328.9325,603.8125 Q328.9325,605.9063 329.62,606.9844 Q330.3075,608.0469 331.6513,608.0469 Q332.2763,608.0469 332.87,607.7813 Q333.4638,607.5 334.0888,606.9219 L334.0888,609.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.8721" x="345.12" y="608.8467">NewIntentItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="317.12" x2="450.9921" y1="620" y2="620"/><line style="stroke:#181818;stroke-width:0.5;" x1="317.12" x2="450.9921" y1="628" y2="628"/></g><g id="elem_ObjectPoolItem"><rect codeLine="19" fill="#F1F1F1" height="56.2656" id="ObjectPoolItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="138.9277" x="1330.97" y="627.87"/><ellipse cx="1345.97" cy="648.0028" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1341.8919,643.7684 L1341.8919,641.6122 L1349.2825,641.6122 L1349.2825,643.7684 L1346.8138,643.7684 L1346.8138,651.8466 L1349.2825,651.8466 L1349.2825,654.0028 L1341.8919,654.0028 L1341.8919,651.8466 L1344.3606,651.8466 L1344.3606,643.7684 L1341.8919,643.7684 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.2031" x="1379.3323" y="644.0087">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="106.9277" x="1359.97" y="659.8339">ObjectPoolItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="1331.97" x2="1468.8977" y1="668.1356" y2="668.1356"/><line style="stroke:#181818;stroke-width:0.5;" x1="1331.97" x2="1468.8977" y1="676.1356" y2="676.1356"/></g><g id="elem_PauseActivityItem"><rect codeLine="20" fill="#F1F1F1" height="48" id="PauseActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="158.2734" x="14.48" y="90"/><ellipse cx="29.48" cy="106" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M32.4488,111.6406 Q31.8706,111.9375 31.23,112.0781 Q30.5894,112.2344 29.8863,112.2344 Q27.3863,112.2344 26.0581,110.5938 Q24.7456,108.9375 24.7456,105.8125 Q24.7456,102.6875 26.0581,101.0313 Q27.3863,99.375 29.8863,99.375 Q30.5894,99.375 31.23,99.5313 Q31.8863,99.6875 32.4488,99.9844 L32.4488,102.7031 Q31.8238,102.125 31.23,101.8594 Q30.6363,101.5781 30.0113,101.5781 Q28.6675,101.5781 27.98,102.6563 Q27.2925,103.7188 27.2925,105.8125 Q27.2925,107.9063 27.98,108.9844 Q28.6675,110.0469 30.0113,110.0469 Q30.6363,110.0469 31.23,109.7813 Q31.8238,109.5 32.4488,108.9219 L32.4488,111.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.2734" x="43.48" y="110.8467">PauseActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="15.48" x2="171.7534" y1="122" y2="122"/><line style="stroke:#181818;stroke-width:0.5;" x1="15.48" x2="171.7534" y1="130" y2="130"/></g><g id="elem_PipStateTransactionItem"><rect codeLine="21" fill="#F1F1F1" height="48" id="PipStateTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="204.293" x="281.91" y="671"/><ellipse cx="296.91" cy="687" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M299.8788,692.6406 Q299.3006,692.9375 298.66,693.0781 Q298.0194,693.2344 297.3163,693.2344 Q294.8163,693.2344 293.4881,691.5938 Q292.1756,689.9375 292.1756,686.8125 Q292.1756,683.6875 293.4881,682.0313 Q294.8163,680.375 297.3163,680.375 Q298.0194,680.375 298.66,680.5313 Q299.3163,680.6875 299.8788,680.9844 L299.8788,683.7031 Q299.2538,683.125 298.66,682.8594 Q298.0663,682.5781 297.4413,682.5781 Q296.0975,682.5781 295.41,683.6563 Q294.7225,684.7188 294.7225,686.8125 Q294.7225,688.9063 295.41,689.9844 Q296.0975,691.0469 297.4413,691.0469 Q298.0663,691.0469 298.66,690.7813 Q299.2538,690.5 299.8788,689.9219 L299.8788,692.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172.293" x="310.91" y="691.8467">PipStateTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="282.91" x2="485.203" y1="703" y2="703"/><line style="stroke:#181818;stroke-width:0.5;" x1="282.91" x2="485.203" y1="711" y2="711"/></g><g id="elem_RefreshCallbackItem"><rect codeLine="22" fill="#F1F1F1" height="48" id="RefreshCallbackItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="177.0791" x="295.52" y="754"/><ellipse cx="310.52" cy="770" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M313.4888,775.6406 Q312.9106,775.9375 312.27,776.0781 Q311.6294,776.2344 310.9263,776.2344 Q308.4263,776.2344 307.0981,774.5938 Q305.7856,772.9375 305.7856,769.8125 Q305.7856,766.6875 307.0981,765.0313 Q308.4263,763.375 310.9263,763.375 Q311.6294,763.375 312.27,763.5313 Q312.9263,763.6875 313.4888,763.9844 L313.4888,766.7031 Q312.8638,766.125 312.27,765.8594 Q311.6763,765.5781 311.0513,765.5781 Q309.7075,765.5781 309.02,766.6563 Q308.3325,767.7188 308.3325,769.8125 Q308.3325,771.9063 309.02,772.9844 Q309.7075,774.0469 311.0513,774.0469 Q311.6763,774.0469 312.27,773.7813 Q312.8638,773.5 313.4888,772.9219 L313.4888,775.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.0791" x="324.52" y="774.8467">RefreshCallbackItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="296.52" x2="471.5991" y1="786" y2="786"/><line style="stroke:#181818;stroke-width:0.5;" x1="296.52" x2="471.5991" y1="794" y2="794"/></g><g id="elem_ResumeActivityItem"><rect codeLine="23" fill="#F1F1F1" height="48" id="ResumeActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="173.2305" x="7" y="173"/><ellipse cx="22" cy="189" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M24.9688,194.6406 Q24.3906,194.9375 23.75,195.0781 Q23.1094,195.2344 22.4063,195.2344 Q19.9063,195.2344 18.5781,193.5938 Q17.2656,191.9375 17.2656,188.8125 Q17.2656,185.6875 18.5781,184.0313 Q19.9063,182.375 22.4063,182.375 Q23.1094,182.375 23.75,182.5313 Q24.4063,182.6875 24.9688,182.9844 L24.9688,185.7031 Q24.3438,185.125 23.75,184.8594 Q23.1563,184.5781 22.5313,184.5781 Q21.1875,184.5781 20.5,185.6563 Q19.8125,186.7188 19.8125,188.8125 Q19.8125,190.9063 20.5,191.9844 Q21.1875,193.0469 22.5313,193.0469 Q23.1563,193.0469 23.75,192.7813 Q24.3438,192.5 24.9688,191.9219 L24.9688,194.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.2305" x="36" y="193.8467">ResumeActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="179.2305" y1="205" y2="205"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="179.2305" y1="213" y2="213"/></g><g id="elem_StartActivityItem"><rect codeLine="24" fill="#F1F1F1" height="48" id="StartActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="150.6719" x="18.28" y="256"/><ellipse cx="33.28" cy="272" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M36.2488,277.6406 Q35.6706,277.9375 35.03,278.0781 Q34.3894,278.2344 33.6863,278.2344 Q31.1863,278.2344 29.8581,276.5938 Q28.5456,274.9375 28.5456,271.8125 Q28.5456,268.6875 29.8581,267.0313 Q31.1863,265.375 33.6863,265.375 Q34.3894,265.375 35.03,265.5313 Q35.6863,265.6875 36.2488,265.9844 L36.2488,268.7031 Q35.6238,268.125 35.03,267.8594 Q34.4363,267.5781 33.8113,267.5781 Q32.4675,267.5781 31.78,268.6563 Q31.0925,269.7188 31.0925,271.8125 Q31.0925,273.9063 31.78,274.9844 Q32.4675,276.0469 33.8113,276.0469 Q34.4363,276.0469 35.03,275.7813 Q35.6238,275.5 36.2488,274.9219 L36.2488,277.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.6719" x="47.28" y="276.8467">StartActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="19.28" x2="167.9519" y1="288" y2="288"/><line style="stroke:#181818;stroke-width:0.5;" x1="19.28" x2="167.9519" y1="296" y2="296"/></g><g id="elem_StopActivityItem"><rect codeLine="25" fill="#F1F1F1" height="48" id="StopActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="148.2998" x="19.47" y="339"/><ellipse cx="34.47" cy="355" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M37.4388,360.6406 Q36.8606,360.9375 36.22,361.0781 Q35.5794,361.2344 34.8763,361.2344 Q32.3763,361.2344 31.0481,359.5938 Q29.7356,357.9375 29.7356,354.8125 Q29.7356,351.6875 31.0481,350.0313 Q32.3763,348.375 34.8763,348.375 Q35.5794,348.375 36.22,348.5313 Q36.8763,348.6875 37.4388,348.9844 L37.4388,351.7031 Q36.8138,351.125 36.22,350.8594 Q35.6263,350.5781 35.0013,350.5781 Q33.6575,350.5781 32.97,351.6563 Q32.2825,352.7188 32.2825,354.8125 Q32.2825,356.9063 32.97,357.9844 Q33.6575,359.0469 35.0013,359.0469 Q35.6263,359.0469 36.22,358.7813 Q36.8138,358.5 37.4388,357.9219 L37.4388,360.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.2998" x="48.47" y="359.8467">StopActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="20.47" x2="166.7698" y1="371" y2="371"/><line style="stroke:#181818;stroke-width:0.5;" x1="20.47" x2="166.7698" y1="379" y2="379"/></g><g id="elem_TopResumedActivityChangeItem"><rect codeLine="26" fill="#F1F1F1" height="48" id="TopResumedActivityChangeItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="261.7217" x="253.2" y="837"/><ellipse cx="268.2" cy="853" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M271.1688,858.6406 Q270.5906,858.9375 269.95,859.0781 Q269.3094,859.2344 268.6063,859.2344 Q266.1063,859.2344 264.7781,857.5938 Q263.4656,855.9375 263.4656,852.8125 Q263.4656,849.6875 264.7781,848.0313 Q266.1063,846.375 268.6063,846.375 Q269.3094,846.375 269.95,846.5313 Q270.6063,846.6875 271.1688,846.9844 L271.1688,849.7031 Q270.5438,849.125 269.95,848.8594 Q269.3563,848.5781 268.7313,848.5781 Q267.3875,848.5781 266.7,849.6563 Q266.0125,850.7188 266.0125,852.8125 Q266.0125,854.9063 266.7,855.9844 Q267.3875,857.0469 268.7313,857.0469 Q269.3563,857.0469 269.95,856.7813 Q270.5438,856.5 271.1688,855.9219 L271.1688,858.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229.7217" x="282.2" y="857.8467">TopResumedActivityChangeItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="254.2" x2="513.9217" y1="869" y2="869"/><line style="stroke:#181818;stroke-width:0.5;" x1="254.2" x2="513.9217" y1="877" y2="877"/></g><g id="elem_TransferSplashScreenViewStateItem"><rect codeLine="27" fill="#F1F1F1" height="48" id="TransferSplashScreenViewStateItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="287.6572" x="240.23" y="920"/><ellipse cx="255.23" cy="936" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M258.1988,941.6406 Q257.6206,941.9375 256.98,942.0781 Q256.3394,942.2344 255.6363,942.2344 Q253.1363,942.2344 251.8081,940.5938 Q250.4956,938.9375 250.4956,935.8125 Q250.4956,932.6875 251.8081,931.0313 Q253.1363,929.375 255.6363,929.375 Q256.3394,929.375 256.98,929.5313 Q257.6363,929.6875 258.1988,929.9844 L258.1988,932.7031 Q257.5738,932.125 256.98,931.8594 Q256.3863,931.5781 255.7613,931.5781 Q254.4175,931.5781 253.73,932.6563 Q253.0425,933.7188 253.0425,935.8125 Q253.0425,937.9063 253.73,938.9844 Q254.4175,940.0469 255.7613,940.0469 Q256.3863,940.0469 256.98,939.7813 Q257.5738,939.5 258.1988,938.9219 L258.1988,941.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="255.6572" x="269.23" y="940.8467">TransferSplashScreenViewStateItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="241.23" x2="526.8872" y1="952" y2="952"/><line style="stroke:#181818;stroke-width:0.5;" x1="241.23" x2="526.8872" y1="960" y2="960"/></g><g id="link_ActivityConfigurationChangeItem_ActivityTransactionItem"><path codeLine="29" d="M495.89,138.49 C495.89,224.9 495.89,510.33 495.89,510.33 C495.89,510.33 527.06,510.33 576.41,510.33 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityConfigurationChangeItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="594.41,510.33,576.41,504.33,576.41,516.33,594.41,510.33" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityLifecycleItem_ActivityTransactionItem"><path codeLine="30" d="M473.47,197 C580.04,197 743.89,197 743.89,197 C743.89,197 743.89,409.92 743.89,486.59 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityLifecycleItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="743.89,504.59,749.89,486.59,737.89,486.59,743.89,504.59" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityRelaunchItem_ActivityTransactionItem"><path codeLine="31" d="M475.22,280 C566.94,280 694.89,280 694.89,280 C694.89,280 694.89,424.02 694.89,486.67 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityRelaunchItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="694.89,504.67,700.89,486.67,688.89,486.67,694.89,504.67" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityResultItem_ActivityTransactionItem"><path codeLine="32" d="M464.45,363 C541.09,363 644.89,363 644.89,363 C644.89,363 644.89,440.33 644.89,486.51 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityResultItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="644.89,504.51,650.89,486.51,638.89,486.51,644.89,504.51" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityTransactionItem_ClientTransactionItem"><path codeLine="33" d="M793.8,529 C867.06,529 953.89,529 953.89,529 C953.89,529 953.89,545.06 953.89,569.55 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityTransactionItem-to-ClientTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="953.89,587.55,959.89,569.55,947.89,569.55,953.89,587.55" style="stroke:#000082;stroke-width:1;"/></g><g id="link_BaseClientRequest_ObjectPoolItem"><path codeLine="34" d="M1271.29,634 C1290.9,634 1293.63,634 1312.61,634 " fill="#FFFFFF" fill-opacity="0.00000" id="BaseClientRequest-to-ObjectPoolItem" style="stroke:#008200;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1330.61,634,1312.61,628,1312.61,640,1330.61,634" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ClientTransaction_ObjectPoolItem"><path codeLine="35" d="M1266.47,679.57 C1287.46,679.57 1292.04,679.57 1312.58,679.57 " fill="#FFFFFF" fill-opacity="0.00000" id="ClientTransaction-to-ObjectPoolItem" style="stroke:#008200;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1330.58,679.57,1312.58,673.57,1312.58,685.57,1330.58,679.57" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ClientTransactionItem_BaseClientRequest"><path codeLine="36" d="M1047.26,612 C1066.87,612 1069.41,612 1088.57,612 " fill="#FFFFFF" fill-opacity="0.00000" id="ClientTransactionItem-to-BaseClientRequest" style="stroke:#008200;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1106.57,612,1088.57,606,1088.57,618,1106.57,612" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ConfigurationChangeItem_ClientTransactionItem"><path codeLine="37" d="M800.76,612 C820.47,612 822.91,612 842.19,612 " fill="#FFFFFF" fill-opacity="0.00000" id="ConfigurationChangeItem-to-ClientTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="860.19,612,842.19,606,842.19,618,860.19,612" style="stroke:#000082;stroke-width:1;"/></g><g id="link_DestroyActivityItem_ActivityLifecycleItem"><path codeLine="38" d="M179.53,31 C215.84,31 249.89,31 249.89,31 C249.89,31 249.89,181 249.89,181 C249.89,181 252.16,181 276.94,181 " fill="#FFFFFF" fill-opacity="0.00000" id="DestroyActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="294.94,181,276.94,175,276.94,187,294.94,181" style="stroke:#000082;stroke-width:1;"/></g><g id="link_EnterPipRequestedItem_ActivityTransactionItem"><path codeLine="39" d="M479.89,470.37 C479.89,490.46 479.89,515.67 479.89,515.67 C479.89,515.67 520.58,515.67 576.52,515.67 " fill="#FFFFFF" fill-opacity="0.00000" id="EnterPipRequestedItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="594.52,515.67,576.52,509.67,576.52,521.67,594.52,515.67" style="stroke:#000082;stroke-width:1;"/></g><g id="link_LaunchActivityItem_ClientTransactionItem"><path codeLine="40" d="M778.09,697 C853.99,697 953.89,697 953.89,697 C953.89,697 953.89,679.26 953.89,654.13 " fill="#FFFFFF" fill-opacity="0.00000" id="LaunchActivityItem-to-ClientTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="953.89,636.13,947.89,654.13,959.89,654.13,953.89,636.13" style="stroke:#000082;stroke-width:1;"/></g><g id="link_MoveToDisplayItem_ActivityTransactionItem"><path codeLine="41" d="M469.6,521 C508.22,521 536.11,521 576.29,521 " fill="#FFFFFF" fill-opacity="0.00000" id="MoveToDisplayItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="594.29,521,576.29,515,576.29,527,594.29,521" style="stroke:#000082;stroke-width:1;"/></g><g id="link_NewIntentItem_ActivityTransactionItem"><path codeLine="42" d="M452.29,612 C464.22,612 472.89,612 472.89,612 C472.89,612 472.89,526.33 472.89,526.33 C472.89,526.33 517.78,526.33 576.5,526.33 " fill="#FFFFFF" fill-opacity="0.00000" id="NewIntentItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="594.5,526.33,576.5,520.33,576.5,532.33,594.5,526.33" style="stroke:#000082;stroke-width:1;"/></g><g id="link_PauseActivityItem_ActivityLifecycleItem"><path codeLine="43" d="M173.01,114 C210.82,114 247.89,114 247.89,114 C247.89,114 247.89,189 247.89,189 C247.89,189 251.09,189 276.75,189 " fill="#FFFFFF" fill-opacity="0.00000" id="PauseActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="294.75,189,276.75,183,276.75,195,294.75,189" style="stroke:#000082;stroke-width:1;"/></g><g id="link_PipStateTransactionItem_ActivityTransactionItem"><path codeLine="44" d="M476.89,670.55 C476.89,624.98 476.89,531.67 476.89,531.67 C476.89,531.67 519.3,531.67 576.39,531.67 " fill="#FFFFFF" fill-opacity="0.00000" id="PipStateTransactionItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="594.39,531.67,576.39,525.67,576.39,537.67,594.39,531.67" style="stroke:#000082;stroke-width:1;"/></g><g id="link_RefreshCallbackItem_ActivityTransactionItem"><path codeLine="45" d="M472.77,778 C499.98,778 522.89,778 522.89,778 C522.89,778 522.89,542.33 522.89,542.33 C522.89,542.33 538.84,542.33 576.51,542.33 " fill="#FFFFFF" fill-opacity="0.00000" id="RefreshCallbackItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="594.51,542.33,576.51,536.33,576.51,548.33,594.51,542.33" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ResumeActivityItem_ActivityLifecycleItem"><path codeLine="46" d="M180.36,197 C216.47,197 240.37,197 276.74,197 " fill="#FFFFFF" fill-opacity="0.00000" id="ResumeActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="294.74,197,276.74,191,276.74,203,294.74,197" style="stroke:#000082;stroke-width:1;"/></g><g id="link_StartActivityItem_ActivityLifecycleItem"><path codeLine="47" d="M169.13,280 C206.16,280 242.89,280 242.89,280 C242.89,280 242.89,205 242.89,205 C242.89,205 248.64,205 276.66,205 " fill="#FFFFFF" fill-opacity="0.00000" id="StartActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="294.66,205,276.66,199,276.66,211,294.66,205" style="stroke:#000082;stroke-width:1;"/></g><g id="link_StopActivityItem_ActivityLifecycleItem"><path codeLine="48" d="M167.93,363 C206.18,363 244.89,363 244.89,363 C244.89,363 244.89,213 244.89,213 C244.89,213 249.64,213 276.74,213 " fill="#FFFFFF" fill-opacity="0.00000" id="StopActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="294.74,213,276.74,207,276.74,219,294.74,213" style="stroke:#000082;stroke-width:1;"/></g><g id="link_TopResumedActivityChangeItem_ActivityTransactionItem"><path codeLine="49" d="M505.89,836.65 C505.89,761.3 505.89,537 505.89,537 C505.89,537 531.34,537 576.48,537 " fill="#FFFFFF" fill-opacity="0.00000" id="TopResumedActivityChangeItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="594.48,537,576.48,531,576.48,543,594.48,537" style="stroke:#000082;stroke-width:1;"/></g><g id="link_TransferSplashScreenViewStateItem_ActivityTransactionItem"><path codeLine="50" d="M528.01,944 C545.81,944 557.89,944 557.89,944 C557.89,944 557.89,547.67 557.89,547.67 C557.89,547.67 555.62,547.67 576.39,547.67 " fill="#FFFFFF" fill-opacity="0.00000" id="TransferSplashScreenViewStateItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="594.39,547.67,576.39,541.67,576.39,553.67,594.39,547.67" style="stroke:#000082;stroke-width:1;"/></g></g></svg></div>
</details>

<details open><summary>mermaid</summary>

<pre class="mermaid"><code>
classDiagram

direction LR

class ActivityConfigurationChangeItem

class ActivityLifecycleItem

class ActivityRelaunchItem

class ActivityResultItem

class ActivityTransactionItem

class BaseClientRequest {

&lt;&lt;Interface&gt;&gt;



}

class ClientTransaction

class ClientTransactionItem

class ConfigurationChangeItem

class DestroyActivityItem

class EnterPipRequestedItem

class LaunchActivityItem

class MoveToDisplayItem

class NewIntentItem

class ObjectPoolItem {

&lt;&lt;Interface&gt;&gt;



}

class PauseActivityItem

class PipStateTransactionItem

class RefreshCallbackItem

class ResumeActivityItem

class StartActivityItem

class StopActivityItem

class TopResumedActivityChangeItem

class TransferSplashScreenViewStateItem



ActivityConfigurationChangeItem --&gt; ActivityTransactionItem

ActivityLifecycleItem --&gt; ActivityTransactionItem

ActivityRelaunchItem --&gt; ActivityTransactionItem

ActivityResultItem --&gt; ActivityTransactionItem

ActivityTransactionItem --&gt; ClientTransactionItem

BaseClientRequest --&gt; ObjectPoolItem

ClientTransaction ..&gt; ObjectPoolItem

ClientTransactionItem ..&gt; BaseClientRequest

ConfigurationChangeItem --&gt; ClientTransactionItem

DestroyActivityItem --&gt; ActivityLifecycleItem

EnterPipRequestedItem --&gt; ActivityTransactionItem

LaunchActivityItem --&gt; ClientTransactionItem

MoveToDisplayItem --&gt; ActivityTransactionItem

NewIntentItem --&gt; ActivityTransactionItem

PauseActivityItem --&gt; ActivityLifecycleItem

PipStateTransactionItem --&gt; ActivityTransactionItem

RefreshCallbackItem --&gt; ActivityTransactionItem

ResumeActivityItem --&gt; ActivityLifecycleItem

StartActivityItem --&gt; ActivityLifecycleItem

StopActivityItem --&gt; ActivityLifecycleItem

TopResumedActivityChangeItem --&gt; ActivityTransactionItem

TransferSplashScreenViewStateItem --&gt; ActivityTransactionItem
</code></pre>
</details>

<h3 id="activitylifecycleitem">ActivityLifecycleItem类图<a class="headerlink" href="#activitylifecycleitem" title="Permanent link">&para;</a></h3>
<details><summary>plantuml(点击展开详情)</summary>

<div class="puml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="1517px" preserveAspectRatio="true" style="background: #ffffff" version="1.1" viewBox="0 0 2916 1517" width="2916px" zoomAndPan="magnify"><defs/><g><g id="elem_ActivityLifecycleItem"><rect codeLine="5" fill="#F1F1F1" height="227.2656" id="ActivityLifecycleItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="177.8857" x="726.88" y="694.15"/><ellipse cx="741.88" cy="710.15" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M744.8488,715.7906 Q744.2706,716.0875 743.63,716.2281 Q742.9894,716.3844 742.2863,716.3844 Q739.7863,716.3844 738.4581,714.7438 Q737.1456,713.0875 737.1456,709.9625 Q737.1456,706.8375 738.4581,705.1813 Q739.7863,703.525 742.2863,703.525 Q742.9894,703.525 743.63,703.6813 Q744.2863,703.8375 744.8488,704.1344 L744.8488,706.8531 Q744.2238,706.275 743.63,706.0094 Q743.0363,705.7281 742.4113,705.7281 Q741.0675,705.7281 740.38,706.8063 Q739.6925,707.8688 739.6925,709.9625 Q739.6925,712.0563 740.38,713.1344 Q741.0675,714.1969 742.4113,714.1969 Q743.0363,714.1969 743.63,713.9313 Q744.2238,713.65 744.8488,713.0719 L744.8488,715.7906 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.8857" x="755.88" y="714.9967">ActivityLifecycleItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="727.88" x2="903.7657" y1="726.15" y2="726.15"/><ellipse cx="737.88" cy="739.7984" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.2344" x="746.88" y="743.1451">ON_CREATE: int</text><ellipse cx="737.88" cy="756.0953" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.8115" x="746.88" y="759.442">ON_STOP: int</text><ellipse cx="737.88" cy="772.3922" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9102" x="746.88" y="775.7389">ON_PAUSE: int</text><ellipse cx="737.88" cy="788.6891" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.25" x="746.88" y="792.0357">PRE_ON_CREATE: int</text><ellipse cx="737.88" cy="804.9859" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.0449" x="746.88" y="808.3326">UNDEFINED: int</text><ellipse cx="737.88" cy="821.2828" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2744" x="746.88" y="824.6295">ON_DESTROY: int</text><ellipse cx="737.88" cy="837.5797" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.543" x="746.88" y="840.9264">ON_RESUME: int</text><ellipse cx="737.88" cy="853.8766" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.7793" x="746.88" y="857.2232">ON_RESTART: int</text><ellipse cx="737.88" cy="870.1734" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.2061" x="746.88" y="873.5201">ON_START: int</text><line style="stroke:#181818;stroke-width:0.5;" x1="727.88" x2="903.7657" y1="880.8219" y2="880.8219"/><ellipse cx="737.88" cy="894.4703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="746.88" y="897.817">recycle(): void</text><ellipse cx="737.88" cy="910.7672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.2656" x="746.88" y="914.1139">getTargetState(): int</text></g><g id="elem_ActivityTransactionItem"><rect codeLine="18" fill="#F1F1F1" height="96.8906" id="ActivityTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="964.77" y="759.33"/><ellipse cx="1207.1518" cy="775.33" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1210.1206,780.9706 Q1209.5425,781.2675 1208.9018,781.4081 Q1208.2612,781.5644 1207.5581,781.5644 Q1205.0581,781.5644 1203.73,779.9237 Q1202.4175,778.2675 1202.4175,775.1425 Q1202.4175,772.0175 1203.73,770.3612 Q1205.0581,768.705 1207.5581,768.705 Q1208.2612,768.705 1208.9018,768.8612 Q1209.5581,769.0175 1210.1206,769.3144 L1210.1206,772.0331 Q1209.4956,771.455 1208.9018,771.1894 Q1208.3081,770.9081 1207.6831,770.9081 Q1206.3393,770.9081 1205.6518,771.9862 Q1204.9643,773.0487 1204.9643,775.1425 Q1204.9643,777.2362 1205.6518,778.3144 Q1206.3393,779.3769 1207.6831,779.3769 Q1208.3081,779.3769 1208.9018,779.1112 Q1209.4956,778.83 1210.1206,778.2519 L1210.1206,780.9706 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166.6191" x="1227.6518" y="780.1767">ActivityTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="965.77" x2="1623.6528" y1="791.33" y2="791.33"/><line style="stroke:#181818;stroke-width:0.5;" x1="965.77" x2="1623.6528" y1="799.33" y2="799.33"/><ellipse cx="975.77" cy="812.9784" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="541.2559" x="984.77" y="816.3251">execute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="975.77" cy="829.2753" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="984.77" y="832.622">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><polygon fill="#4177AF" points="975.77,841.5722,971.77,847.5722,979.77,847.5722" style="stroke:#1963A0;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="564.293" x="984.77" y="848.9189">getActivityClientRecord(ClientTransactionHandler, IBinder): ActivityClientRecord</text></g><g id="elem_BaseClientRequest"><rect codeLine="23" fill="#F1F1F1" height="105.1563" id="BaseClientRequest" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="597.7236" x="2112.69" y="755.2"/><ellipse cx="2341.2427" cy="775.3328" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2337.1646,771.0984 L2337.1646,768.9422 L2344.5552,768.9422 L2344.5552,771.0984 L2342.0865,771.0984 L2342.0865,779.1766 L2344.5552,779.1766 L2344.5552,781.3328 L2337.1646,781.3328 L2337.1646,779.1766 L2339.6334,779.1766 L2339.6334,771.0984 L2337.1646,771.0984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.2031" x="2393.7003" y="771.3387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="132.1182" x="2361.7427" y="787.1639">BaseClientRequest</text><line style="stroke:#181818;stroke-width:0.5;" x1="2113.69" x2="2709.4136" y1="795.4656" y2="795.4656"/><line style="stroke:#181818;stroke-width:0.5;" x1="2113.69" x2="2709.4136" y1="803.4656" y2="803.4656"/><ellipse cx="2123.69" cy="817.1141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="2132.69" y="820.4607">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="2123.69" cy="833.4109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="2132.69" y="836.7576">preExecute(ClientTransactionHandler, IBinder): void</text><ellipse cx="2123.69" cy="849.7078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="541.2559" x="2132.69" y="853.0545">execute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text></g><g id="elem_ClientTransaction"><rect codeLine="28" fill="#F1F1F1" height="373.9375" id="ClientTransaction" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="403.3164" x="2209.89" y="345.81"/><ellipse cx="2345.9593" cy="361.81" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2348.9281,367.4506 Q2348.35,367.7475 2347.7093,367.8881 Q2347.0687,368.0444 2346.3656,368.0444 Q2343.8656,368.0444 2342.5375,366.4037 Q2341.225,364.7475 2341.225,361.6225 Q2341.225,358.4975 2342.5375,356.8412 Q2343.8656,355.185 2346.3656,355.185 Q2347.0687,355.185 2347.7093,355.3412 Q2348.3656,355.4975 2348.9281,355.7944 L2348.9281,358.5131 Q2348.3031,357.935 2347.7093,357.6694 Q2347.1156,357.3881 2346.4906,357.3881 Q2345.1468,357.3881 2344.4593,358.4662 Q2343.7718,359.5287 2343.7718,361.6225 Q2343.7718,363.7162 2344.4593,364.7944 Q2345.1468,365.8569 2346.4906,365.8569 Q2347.1156,365.8569 2347.7093,365.5912 Q2348.3031,365.31 2348.9281,364.7319 L2348.9281,367.4506 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.6777" x="2366.4593" y="366.6567">ClientTransaction</text><line style="stroke:#181818;stroke-width:0.5;" x1="2210.89" x2="2612.2064" y1="377.81" y2="377.81"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2217.89" y="388.4584"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194.9473" x="2229.89" y="394.8051">mClient: IApplicationThread</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2217.89" y="404.7553"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.8701" x="2229.89" y="411.102">mActivityToken: IBinder</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2217.89" y="421.0522"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="324.6592" x="2229.89" y="427.3989">mLifecycleStateRequest: ActivityLifecycleItem</text><ellipse cx="2220.89" cy="440.3491" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="275.0645" x="2229.89" y="443.6957">CREATOR: Creator&lt;ClientTransaction&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2217.89" y="453.6459"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="344.5859" x="2229.89" y="459.9926">mActivityCallbacks: List&lt;ClientTransactionItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="2210.89" x2="2612.2064" y1="467.2944" y2="467.2944"/><ellipse cx="2220.89" cy="480.9428" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="372.9688" x="2229.89" y="484.2895">setLifecycleStateRequest(ActivityLifecycleItem): void</text><ellipse cx="2220.89" cy="497.2397" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="2229.89" y="500.5864">writeToParcel(Parcel, int): void</text><ellipse cx="2220.89" cy="513.5366" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="344.9346" x="2229.89" y="516.8832">getLifecycleStateRequest(): ActivityLifecycleItem</text><ellipse cx="2220.89" cy="529.8334" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="377.3164" x="2229.89" y="533.1801">obtain(IApplicationThread, IBinder): ClientTransaction</text><ellipse cx="2220.89" cy="546.1303" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216.4805" x="2229.89" y="549.477">dump(String, PrintWriter): void</text><ellipse cx="2220.89" cy="562.4272" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.2227" x="2229.89" y="565.7739">getClient(): IApplicationThread</text><ellipse cx="2220.89" cy="578.7241" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="290.0215" x="2229.89" y="582.0707">addCallback(ClientTransactionItem): void</text><ellipse cx="2220.89" cy="595.0209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="307.1934" x="2229.89" y="598.3676">preExecute(ClientTransactionHandler): void</text><ellipse cx="2220.89" cy="611.3178" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="2229.89" y="614.6645">recycle(): void</text><ellipse cx="2220.89" cy="627.6147" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="312.2588" x="2229.89" y="630.9614">getCallbacks(): List&lt;ClientTransactionItem&gt;</text><ellipse cx="2220.89" cy="643.9116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="2229.89" y="647.2582">equals(Object): boolean</text><ellipse cx="2220.89" cy="660.2084" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="2229.89" y="663.5551">hashCode(): int</text><ellipse cx="2220.89" cy="676.5053" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.458" x="2229.89" y="679.852">schedule(): void</text><ellipse cx="2220.89" cy="692.8022" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188.1455" x="2229.89" y="696.1489">getActivityToken(): IBinder</text><ellipse cx="2220.89" cy="709.0991" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.9521" x="2229.89" y="712.4457">describeContents(): int</text></g><g id="elem_ClientTransactionItem"><rect codeLine="50" fill="#F1F1F1" height="96.8906" id="ClientTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="368.0361" x="1684.65" y="759.33"/><ellipse cx="1787.1446" cy="775.33" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1790.1134,780.9706 Q1789.5353,781.2675 1788.8946,781.4081 Q1788.254,781.5644 1787.5509,781.5644 Q1785.0509,781.5644 1783.7228,779.9237 Q1782.4103,778.2675 1782.4103,775.1425 Q1782.4103,772.0175 1783.7228,770.3612 Q1785.0509,768.705 1787.5509,768.705 Q1788.254,768.705 1788.8946,768.8612 Q1789.5509,769.0175 1790.1134,769.3144 L1790.1134,772.0331 Q1789.4884,771.455 1788.8946,771.1894 Q1788.3009,770.9081 1787.6759,770.9081 Q1786.3321,770.9081 1785.6446,771.9862 Q1784.9571,773.0487 1784.9571,775.1425 Q1784.9571,777.2362 1785.6446,778.3144 Q1786.3321,779.3769 1787.6759,779.3769 Q1788.3009,779.3769 1788.8946,779.1112 Q1789.4884,778.83 1790.1134,778.2519 L1790.1134,780.9706 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.5469" x="1807.6446" y="780.1767">ClientTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="1685.65" x2="2051.6861" y1="791.33" y2="791.33"/><line style="stroke:#181818;stroke-width:0.5;" x1="1685.65" x2="2051.6861" y1="799.33" y2="799.33"/><polygon fill="#4177AF" points="1695.65,808.9784,1691.65,814.9784,1699.65,814.9784" style="stroke:#1963A0;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="342.0361" x="1704.65" y="816.3251">shouldHaveDefinedPreExecutionState(): boolean</text><ellipse cx="1695.65" cy="829.2753" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197.3125" x="1704.65" y="832.622">getPostExecutionState(): int</text><ellipse cx="1695.65" cy="845.5722" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.9521" x="1704.65" y="848.9189">describeContents(): int</text></g><g id="elem_DestroyActivityItem"><rect codeLine="55" fill="#F1F1F1" height="243.5625" id="DestroyActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="7" y="7"/><ellipse cx="263.064" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M266.0327,28.6406 Q265.4546,28.9375 264.814,29.0781 Q264.1733,29.2344 263.4702,29.2344 Q260.9702,29.2344 259.6421,27.5938 Q258.3296,25.9375 258.3296,22.8125 Q258.3296,19.6875 259.6421,18.0313 Q260.9702,16.375 263.4702,16.375 Q264.1733,16.375 264.814,16.5313 Q265.4702,16.6875 266.0327,16.9844 L266.0327,19.7031 Q265.4077,19.125 264.814,18.8594 Q264.2202,18.5781 263.5952,18.5781 Q262.2515,18.5781 261.564,19.6563 Q260.8765,20.7188 260.8765,22.8125 Q260.8765,24.9063 261.564,25.9844 Q262.2515,27.0469 263.5952,27.0469 Q264.2202,27.0469 264.814,26.7813 Q265.4077,26.5 266.0327,25.9219 L266.0327,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.2549" x="283.564" y="27.8467">DestroyActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="39" y2="39"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="49.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.1494" x="27" y="55.9951">mFinished: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="65.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.8701" x="27" y="72.292">mConfigChanges: int</text><ellipse cx="18" cy="85.2422" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="291.6416" x="27" y="88.5889">CREATOR: Creator&lt;DestroyActivityItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="95.8906" y2="95.8906"/><ellipse cx="18" cy="109.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="27" y="112.8857">equals(Object): boolean</text><ellipse cx="18" cy="125.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="27" y="129.1826">toString(): String</text><ellipse cx="18" cy="142.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="27" y="145.4795">recycle(): void</text><ellipse cx="18" cy="158.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="27" y="161.7764">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="18" cy="174.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286.7539" x="27" y="178.0732">obtain(boolean, int): DestroyActivityItem</text><ellipse cx="18" cy="191.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="27" y="194.3701">hashCode(): int</text><ellipse cx="18" cy="207.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="27" y="210.667">writeToParcel(Parcel, int): void</text><ellipse cx="18" cy="223.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="27" y="226.9639">preExecute(ClientTransactionHandler, IBinder): void</text><ellipse cx="18" cy="239.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.2656" x="27" y="243.2607">getTargetState(): int</text></g><g id="elem_ObjectPoolItem"><rect codeLine="69" fill="#F1F1F1" height="72.5625" id="ObjectPoolItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="138.9277" x="2770.41" y="634.5"/><ellipse cx="2785.41" cy="654.6328" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2781.3319,650.3984 L2781.3319,648.2422 L2788.7225,648.2422 L2788.7225,650.3984 L2786.2538,650.3984 L2786.2538,658.4766 L2788.7225,658.4766 L2788.7225,660.6328 L2781.3319,660.6328 L2781.3319,658.4766 L2783.8006,658.4766 L2783.8006,650.3984 L2781.3319,650.3984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.2031" x="2818.7723" y="650.6387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="106.9277" x="2799.41" y="666.4639">ObjectPoolItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="2771.41" x2="2908.3377" y1="674.7656" y2="674.7656"/><line style="stroke:#181818;stroke-width:0.5;" x1="2771.41" x2="2908.3377" y1="682.7656" y2="682.7656"/><ellipse cx="2781.41" cy="696.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="2790.41" y="699.7607">recycle(): void</text></g><g id="elem_PauseActivityItem"><rect codeLine="72" fill="#F1F1F1" height="325.0469" id="PauseActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="7" y="285.26"/><ellipse cx="269.5547" cy="301.26" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M272.5234,306.9006 Q271.9453,307.1975 271.3047,307.3381 Q270.6641,307.4944 269.9609,307.4944 Q267.4609,307.4944 266.1328,305.8538 Q264.8203,304.1975 264.8203,301.0725 Q264.8203,297.9475 266.1328,296.2913 Q267.4609,294.635 269.9609,294.635 Q270.6641,294.635 271.3047,294.7913 Q271.9609,294.9475 272.5234,295.2444 L272.5234,297.9631 Q271.8984,297.385 271.3047,297.1194 Q270.7109,296.8381 270.0859,296.8381 Q268.7422,296.8381 268.0547,297.9163 Q267.3672,298.9788 267.3672,301.0725 Q267.3672,303.1663 268.0547,304.2444 Q268.7422,305.3069 270.0859,305.3069 Q270.7109,305.3069 271.3047,305.0413 Q271.8984,304.76 272.5234,304.1819 L272.5234,306.9006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.2734" x="290.0547" y="306.1067">PauseActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="317.26" y2="317.26"/><ellipse cx="18" cy="330.9084" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="278.6602" x="27" y="334.2551">CREATOR: Creator&lt;PauseActivityItem&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="344.2053"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.9258" x="27" y="350.552">TAG: String</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="360.5022"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.1494" x="27" y="366.8489">mFinished: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="376.7991"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165.6143" x="27" y="383.1457">mUserLeaving: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="393.0959"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159.5234" x="27" y="399.4426">mDontReport: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="409.3928"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191.7275" x="27" y="415.7395">mAutoEnteringPip: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="425.6897"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.8701" x="27" y="432.0364">mConfigChanges: int</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="439.3381" y2="439.3381"/><ellipse cx="18" cy="452.9866" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="27" y="456.3332">writeToParcel(Parcel, int): void</text><ellipse cx="18" cy="469.2834" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="27" y="472.6301">recycle(): void</text><ellipse cx="18" cy="485.5803" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.2656" x="27" y="488.927">getTargetState(): int</text><ellipse cx="18" cy="501.8772" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="27" y="505.2239">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="18" cy="518.1741" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="468.3916" x="27" y="521.5207">obtain(boolean, boolean, int, boolean, boolean): PauseActivityItem</text><ellipse cx="18" cy="534.4709" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="27" y="537.8176">equals(Object): boolean</text><ellipse cx="18" cy="550.7678" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="27" y="554.1145">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="18" cy="567.0647" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="27" y="570.4114">hashCode(): int</text><ellipse cx="18" cy="583.3616" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="27" y="586.7082">toString(): String</text><ellipse cx="18" cy="599.6584" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190.6475" x="27" y="603.0051">obtain(): PauseActivityItem</text></g><g id="elem_ResumeActivityItem"><rect codeLine="91" fill="#F1F1F1" height="325.0469" id="ResumeActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="7" y="645.26"/><ellipse cx="262.0762" cy="661.26" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M265.0449,666.9006 Q264.4668,667.1975 263.8262,667.3381 Q263.1855,667.4944 262.4824,667.4944 Q259.9824,667.4944 258.6543,665.8538 Q257.3418,664.1975 257.3418,661.0725 Q257.3418,657.9475 258.6543,656.2913 Q259.9824,654.635 262.4824,654.635 Q263.1855,654.635 263.8262,654.7913 Q264.4824,654.9475 265.0449,655.2444 L265.0449,657.9631 Q264.4199,657.385 263.8262,657.1194 Q263.2324,656.8381 262.6074,656.8381 Q261.2637,656.8381 260.5762,657.9163 Q259.8887,658.9788 259.8887,661.0725 Q259.8887,663.1663 260.5762,664.2444 Q261.2637,665.3069 262.6074,665.3069 Q263.2324,665.3069 263.8262,665.0413 Q264.4199,664.76 265.0449,664.1819 L265.0449,666.9006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.2305" x="282.5762" y="666.1067">ResumeActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="677.26" y2="677.26"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="687.9084"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196.998" x="27" y="694.2551">mUpdateProcState: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="704.2053"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="290.7803" x="27" y="710.552">mShouldSendCompatFakeFocus: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="720.5022"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.9258" x="27" y="726.8489">TAG: String</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="736.7991"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.5752" x="27" y="743.1457">mProcState: int</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="753.0959"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147.2461" x="27" y="759.4426">mIsForward: boolean</text><ellipse cx="18" cy="772.3928" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293.6172" x="27" y="775.7395">CREATOR: Creator&lt;ResumeActivityItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="783.0413" y2="783.0413"/><ellipse cx="18" cy="796.6897" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="353.6025" x="27" y="800.0364">obtain(int, boolean, boolean): ResumeActivityItem</text><ellipse cx="18" cy="812.9866" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="27" y="816.3332">toString(): String</text><ellipse cx="18" cy="829.2834" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="27" y="832.6301">equals(Object): boolean</text><ellipse cx="18" cy="845.5803" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="27" y="848.927">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="18" cy="861.8772" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="27" y="865.2239">hashCode(): int</text><ellipse cx="18" cy="878.1741" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="27" y="881.5207">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="18" cy="894.4709" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.2656" x="27" y="897.8176">getTargetState(): int</text><ellipse cx="18" cy="910.7678" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="326.4502" x="27" y="914.1145">obtain(boolean, boolean): ResumeActivityItem</text><ellipse cx="18" cy="927.0647" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="27" y="930.4114">preExecute(ClientTransactionHandler, IBinder): void</text><ellipse cx="18" cy="943.3616" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="27" y="946.7082">writeToParcel(Parcel, int): void</text><ellipse cx="18" cy="959.6584" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="27" y="963.0051">recycle(): void</text></g><g id="elem_StartActivityItem"><rect codeLine="110" fill="#F1F1F1" height="227.2656" id="StartActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="7" y="1005.15"/><ellipse cx="273.3555" cy="1021.15" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M276.3242,1026.7906 Q275.7461,1027.0875 275.1055,1027.2281 Q274.4648,1027.3844 273.7617,1027.3844 Q271.2617,1027.3844 269.9336,1025.7437 Q268.6211,1024.0875 268.6211,1020.9625 Q268.6211,1017.8375 269.9336,1016.1812 Q271.2617,1014.525 273.7617,1014.525 Q274.4648,1014.525 275.1055,1014.6812 Q275.7617,1014.8375 276.3242,1015.1344 L276.3242,1017.8531 Q275.6992,1017.275 275.1055,1017.0094 Q274.5117,1016.7281 273.8867,1016.7281 Q272.543,1016.7281 271.8555,1017.8062 Q271.168,1018.8687 271.168,1020.9625 Q271.168,1023.0562 271.8555,1024.1344 Q272.543,1025.1969 273.8867,1025.1969 Q274.5117,1025.1969 275.1055,1024.9312 Q275.6992,1024.65 276.3242,1024.0719 L276.3242,1026.7906 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.6719" x="293.8555" y="1025.9967">StartActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="1037.15" y2="1037.15"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="1047.7984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.9258" x="27" y="1054.1451">TAG: String</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="1064.0953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236.0449" x="27" y="1070.442">mActivityOptions: ActivityOptions</text><ellipse cx="18" cy="1083.3922" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271.0586" x="27" y="1086.7389">CREATOR: Creator&lt;StartActivityItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="1094.0406" y2="1094.0406"/><ellipse cx="18" cy="1107.6891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="27" y="1111.0357">recycle(): void</text><ellipse cx="18" cy="1123.9859" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="27" y="1127.3326">equals(Object): boolean</text><ellipse cx="18" cy="1140.2828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="27" y="1143.6295">writeToParcel(Parcel, int): void</text><ellipse cx="18" cy="1156.5797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="289.666" x="27" y="1159.9264">obtain(ActivityOptions): StartActivityItem</text><ellipse cx="18" cy="1172.8766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="27" y="1176.2232">toString(): String</text><ellipse cx="18" cy="1189.1734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.2656" x="27" y="1192.5201">getTargetState(): int</text><ellipse cx="18" cy="1205.4703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="27" y="1208.817">hashCode(): int</text><ellipse cx="18" cy="1221.7672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="27" y="1225.1139">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text></g><g id="elem_StopActivityItem"><rect codeLine="123" fill="#F1F1F1" height="243.5625" id="StopActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="7" y="1267"/><ellipse cx="274.5415" cy="1283" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M277.5103,1288.6406 Q276.9321,1288.9375 276.2915,1289.0781 Q275.6509,1289.2344 274.9478,1289.2344 Q272.4478,1289.2344 271.1196,1287.5938 Q269.8071,1285.9375 269.8071,1282.8125 Q269.8071,1279.6875 271.1196,1278.0313 Q272.4478,1276.375 274.9478,1276.375 Q275.6509,1276.375 276.2915,1276.5313 Q276.9478,1276.6875 277.5103,1276.9844 L277.5103,1279.7031 Q276.8853,1279.125 276.2915,1278.8594 Q275.6978,1278.5781 275.0728,1278.5781 Q273.729,1278.5781 273.0415,1279.6563 Q272.354,1280.7188 272.354,1282.8125 Q272.354,1284.9063 273.0415,1285.9844 Q273.729,1287.0469 275.0728,1287.0469 Q275.6978,1287.0469 276.2915,1286.7813 Q276.8853,1286.5 277.5103,1285.9219 L277.5103,1288.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.2998" x="295.0415" y="1287.8467">StopActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="1299" y2="1299"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="1309.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.8701" x="27" y="1315.9951">mConfigChanges: int</text><ellipse cx="18" cy="1328.9453" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268.6865" x="27" y="1332.292">CREATOR: Creator&lt;StopActivityItem&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="1342.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.9258" x="27" y="1348.5889">TAG: String</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="665.8828" y1="1355.8906" y2="1355.8906"/><ellipse cx="18" cy="1369.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="27" y="1372.8857">equals(Object): boolean</text><ellipse cx="18" cy="1385.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="27" y="1389.1826">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="18" cy="1402.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="27" y="1405.4795">writeToParcel(Parcel, int): void</text><ellipse cx="18" cy="1418.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.2656" x="27" y="1421.7764">getTargetState(): int</text><ellipse cx="18" cy="1434.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="27" y="1438.0732">hashCode(): int</text><ellipse cx="18" cy="1451.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="27" y="1454.3701">toString(): String</text><ellipse cx="18" cy="1467.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="27" y="1470.667">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="18" cy="1483.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="198.9258" x="27" y="1486.9639">obtain(int): StopActivityItem</text><ellipse cx="18" cy="1499.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="27" y="1503.2607">recycle(): void</text></g><g id="link_ActivityLifecycleItem_ActivityTransactionItem"><path codeLine="138" d="M905.06,807.78 C923.19,807.78 925.25,807.78 946.42,807.78 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityLifecycleItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="964.42,807.78,946.42,801.78,946.42,813.78,964.42,807.78" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityTransactionItem_ClientTransactionItem"><path codeLine="139" d="M1624.84,807.78 C1645.05,807.78 1646.97,807.78 1666.18,807.78 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityTransactionItem-to-ClientTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1684.18,807.78,1666.18,801.78,1666.18,813.78,1684.18,807.78" style="stroke:#000082;stroke-width:1;"/></g><g id="link_BaseClientRequest_ObjectPoolItem"><path codeLine="140" d="M2662.34,754.81 C2662.34,720.76 2662.34,682.87 2662.34,682.87 C2662.34,682.87 2702.28,682.87 2751.96,682.87 " fill="#FFFFFF" fill-opacity="0.00000" id="BaseClientRequest-to-ObjectPoolItem" style="stroke:#008200;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2769.96,682.87,2751.96,676.87,2751.96,688.87,2769.96,682.87" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ClientTransaction_ObjectPoolItem"><path codeLine="141" d="M2613.48,658.68 C2669.85,658.68 2709.35,658.68 2752.3,658.68 " fill="#FFFFFF" fill-opacity="0.00000" id="ClientTransaction-to-ObjectPoolItem" style="stroke:#008200;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2770.3,658.68,2752.3,652.68,2752.3,664.68,2770.3,658.68" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ClientTransactionItem_BaseClientRequest"><path codeLine="142" d="M2052.84,807.78 C2072.21,807.78 2074.25,807.78 2094.49,807.78 " fill="#FFFFFF" fill-opacity="0.00000" id="ClientTransactionItem-to-BaseClientRequest" style="stroke:#008200;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2112.49,807.78,2094.49,801.78,2094.49,813.78,2112.49,807.78" style="stroke:#008200;stroke-width:1;"/></g><g id="link_DestroyActivityItem_ActivityLifecycleItem"><path codeLine="143" d="M667.1,128.78 C764.88,128.78 846.34,128.78 846.34,128.78 C846.34,128.78 846.34,482.34 846.34,675.75 " fill="#FFFFFF" fill-opacity="0.00000" id="DestroyActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="846.34,693.75,852.34,675.75,840.34,675.75,846.34,693.75" style="stroke:#000082;stroke-width:1;"/></g><g id="link_PauseActivityItem_ActivityLifecycleItem"><path codeLine="144" d="M667.09,478.06 C735.03,478.06 786.34,478.06 786.34,478.06 C786.34,478.06 786.34,580.54 786.34,675.85 " fill="#FFFFFF" fill-opacity="0.00000" id="PauseActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="786.34,693.85,792.34,675.85,780.34,675.85,786.34,693.85" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ResumeActivityItem_ActivityLifecycleItem"><path codeLine="145" d="M667.26,807.78 C688.44,807.78 690.51,807.78 708.65,807.78 " fill="#FFFFFF" fill-opacity="0.00000" id="ResumeActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="726.65,807.78,708.65,801.78,708.65,813.78,726.65,807.78" style="stroke:#000082;stroke-width:1;"/></g><g id="link_StartActivityItem_ActivityLifecycleItem"><path codeLine="146" d="M667.09,1118.78 C735.03,1118.78 786.34,1118.78 786.34,1118.78 C786.34,1118.78 786.34,1028.58 786.34,939.82 " fill="#FFFFFF" fill-opacity="0.00000" id="StartActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="786.34,921.82,780.34,939.82,792.34,939.82,786.34,921.82" style="stroke:#000082;stroke-width:1;"/></g><g id="link_StopActivityItem_ActivityLifecycleItem"><path codeLine="147" d="M667.1,1388.78 C764.88,1388.78 846.34,1388.78 846.34,1388.78 C846.34,1388.78 846.34,1109.08 846.34,939.87 " fill="#FFFFFF" fill-opacity="0.00000" id="StopActivityItem-to-ActivityLifecycleItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="846.34,921.87,840.34,939.87,852.34,939.87,846.34,921.87" style="stroke:#000082;stroke-width:1;"/></g></g></svg></div>

</details>

<details open><summary>mermaid</summary>

<pre class="mermaid"><code>classDiagram

direction LR

class ActivityLifecycleItem {

+ int ON_CREATE

+ int ON_STOP

+ int ON_PAUSE

+ int PRE_ON_CREATE

+ int UNDEFINED

+ int ON_DESTROY

+ int ON_RESUME

+ int ON_RESTART

+ int ON_START

+ recycle() void

+ getTargetState() int

}

class ActivityTransactionItem {

+ execute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

~ getActivityClientRecord(ClientTransactionHandler, IBinder) ActivityClientRecord

}

class BaseClientRequest {

&lt;&lt;Interface&gt;&gt;

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ preExecute(ClientTransactionHandler, IBinder) void

+ execute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

}

class ClientTransaction {

- IApplicationThread mClient

- IBinder mActivityToken

- ActivityLifecycleItem mLifecycleStateRequest

+ Creator~ClientTransaction~ CREATOR

- List~ClientTransactionItem~ mActivityCallbacks

+ setLifecycleStateRequest(ActivityLifecycleItem) void

+ writeToParcel(Parcel, int) void

+ getLifecycleStateRequest() ActivityLifecycleItem

+ obtain(IApplicationThread, IBinder) ClientTransaction

+ dump(String, PrintWriter) void

+ getClient() IApplicationThread

+ addCallback(ClientTransactionItem) void

+ preExecute(ClientTransactionHandler) void

+ recycle() void

+ getCallbacks() List~ClientTransactionItem~

+ equals(Object) boolean

+ hashCode() int

+ schedule() void

+ getActivityToken() IBinder

+ describeContents() int

}

class ClientTransactionItem {

~ shouldHaveDefinedPreExecutionState() boolean

+ getPostExecutionState() int

+ describeContents() int

}

class DestroyActivityItem {

- boolean mFinished

- int mConfigChanges

+ Creator~DestroyActivityItem~ CREATOR

+ equals(Object) boolean

+ toString() String

+ recycle() void

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ obtain(boolean, int) DestroyActivityItem

+ hashCode() int

+ writeToParcel(Parcel, int) void

+ preExecute(ClientTransactionHandler, IBinder) void

+ getTargetState() int

}

class ObjectPoolItem {

&lt;&lt;Interface&gt;&gt;

+ recycle() void

}

class PauseActivityItem {

+ Creator~PauseActivityItem~ CREATOR

- String TAG

- boolean mFinished

- boolean mUserLeaving

- boolean mDontReport

- boolean mAutoEnteringPip

- int mConfigChanges

+ writeToParcel(Parcel, int) void

+ recycle() void

+ getTargetState() int

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ obtain(boolean, boolean, int, boolean, boolean) PauseActivityItem

+ equals(Object) boolean

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ hashCode() int

+ toString() String

+ obtain() PauseActivityItem

}

class ResumeActivityItem {

- boolean mUpdateProcState

- boolean mShouldSendCompatFakeFocus

- String TAG

- int mProcState

- boolean mIsForward

+ Creator~ResumeActivityItem~ CREATOR

+ obtain(int, boolean, boolean) ResumeActivityItem

+ toString() String

+ equals(Object) boolean

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ hashCode() int

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ getTargetState() int

+ obtain(boolean, boolean) ResumeActivityItem

+ preExecute(ClientTransactionHandler, IBinder) void

+ writeToParcel(Parcel, int) void

+ recycle() void

}

class StartActivityItem {

- String TAG

- ActivityOptions mActivityOptions

+ Creator~StartActivityItem~ CREATOR

+ recycle() void

+ equals(Object) boolean

+ writeToParcel(Parcel, int) void

+ obtain(ActivityOptions) StartActivityItem

+ toString() String

+ getTargetState() int

+ hashCode() int

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

}

class StopActivityItem {

- int mConfigChanges

+ Creator~StopActivityItem~ CREATOR

- String TAG

+ equals(Object) boolean

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ writeToParcel(Parcel, int) void

+ getTargetState() int

+ hashCode() int

+ toString() String

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ obtain(int) StopActivityItem

+ recycle() void

}



ActivityLifecycleItem --&gt; ActivityTransactionItem

ActivityTransactionItem --&gt; ClientTransactionItem

BaseClientRequest --&gt; ObjectPoolItem

ClientTransaction ..&gt; ObjectPoolItem

ClientTransactionItem ..&gt; BaseClientRequest

DestroyActivityItem --&gt; ActivityLifecycleItem

PauseActivityItem --&gt; ActivityLifecycleItem

ResumeActivityItem --&gt; ActivityLifecycleItem

StartActivityItem --&gt; ActivityLifecycleItem

StopActivityItem --&gt; ActivityLifecycleItem</code></pre>

</details>

<h3 id="activitytransactionitem">ActivityTransactionItem类图<a class="headerlink" href="#activitytransactionitem" title="Permanent link">&para;</a></h3>
<details><summary>plantuml(点击展开详情)</summary>

<div class="puml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="2766px" preserveAspectRatio="true" style="background: #ffffff" version="1.1" viewBox="0 0 2781 2766" width="2781px" zoomAndPan="magnify"><defs/><g><g id="elem_ActivityConfigurationChangeItem"><rect codeLine="5" fill="#F1F1F1" height="210.9688" id="ActivityConfigurationChangeItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="58.59" y="7"/><ellipse cx="267.7731" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M270.7419,28.6406 Q270.1637,28.9375 269.5231,29.0781 Q268.8825,29.2344 268.1794,29.2344 Q265.6794,29.2344 264.3512,27.5938 Q263.0387,25.9375 263.0387,22.8125 Q263.0387,19.6875 264.3512,18.0313 Q265.6794,16.375 268.1794,16.375 Q268.8825,16.375 269.5231,16.5313 Q270.1794,16.6875 270.7419,16.9844 L270.7419,19.7031 Q270.1169,19.125 269.5231,18.8594 Q268.9294,18.5781 268.3044,18.5781 Q266.9606,18.5781 266.2731,19.6563 Q265.5856,20.7188 265.5856,22.8125 Q265.5856,24.9063 266.2731,25.9844 Q266.9606,27.0469 268.3044,27.0469 Q268.9294,27.0469 269.5231,26.7813 Q270.1169,26.5 270.7419,25.9219 L270.7419,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233.0166" x="288.2731" y="27.8467">ActivityConfigurationChangeItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="39" y2="39"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="49.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212.6934" x="78.59" y="55.9951">mConfiguration: Configuration</text><ellipse cx="69.59" cy="68.9453" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="385.4033" x="78.59" y="72.292">CREATOR: Creator&lt;ActivityConfigurationChangeItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="79.5938" y2="79.5938"/><ellipse cx="69.59" cy="93.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.59" y="96.5889">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="69.59" cy="109.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="78.59" y="112.8857">hashCode(): int</text><ellipse cx="69.59" cy="125.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="78.59" y="129.1826">toString(): String</text><ellipse cx="69.59" cy="142.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="78.59" y="145.4795">preExecute(ClientTransactionHandler, IBinder): void</text><ellipse cx="69.59" cy="158.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.59" y="161.7764">writeToParcel(Parcel, int): void</text><ellipse cx="69.59" cy="174.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="78.59" y="178.0732">equals(Object): boolean</text><ellipse cx="69.59" cy="191.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="392.335" x="78.59" y="194.3701">obtain(Configuration): ActivityConfigurationChangeItem</text><ellipse cx="69.59" cy="207.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.59" y="210.667">recycle(): void</text></g><g id="elem_ActivityLifecycleItem"><rect codeLine="17" fill="#F1F1F1" height="227.2656" id="ActivityLifecycleItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="177.8857" x="299.59" y="252.85"/><ellipse cx="314.59" cy="268.85" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M317.5588,274.4906 Q316.9806,274.7875 316.34,274.9281 Q315.6994,275.0844 314.9963,275.0844 Q312.4963,275.0844 311.1681,273.4437 Q309.8556,271.7875 309.8556,268.6625 Q309.8556,265.5375 311.1681,263.8812 Q312.4963,262.225 314.9963,262.225 Q315.6994,262.225 316.34,262.3812 Q316.9963,262.5375 317.5588,262.8344 L317.5588,265.5531 Q316.9338,264.975 316.34,264.7094 Q315.7463,264.4281 315.1213,264.4281 Q313.7775,264.4281 313.09,265.5062 Q312.4025,266.5687 312.4025,268.6625 Q312.4025,270.7562 313.09,271.8344 Q313.7775,272.8969 315.1213,272.8969 Q315.7463,272.8969 316.34,272.6312 Q316.9338,272.35 317.5588,271.7719 L317.5588,274.4906 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.8857" x="328.59" y="273.6967">ActivityLifecycleItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="300.59" x2="476.4757" y1="284.85" y2="284.85"/><ellipse cx="310.59" cy="298.4984" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.2344" x="319.59" y="301.8451">ON_CREATE: int</text><ellipse cx="310.59" cy="314.7953" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9102" x="319.59" y="318.142">ON_PAUSE: int</text><ellipse cx="310.59" cy="331.0922" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.2744" x="319.59" y="334.4389">ON_DESTROY: int</text><ellipse cx="310.59" cy="347.3891" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.7793" x="319.59" y="350.7357">ON_RESTART: int</text><ellipse cx="310.59" cy="363.6859" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.8115" x="319.59" y="367.0326">ON_STOP: int</text><ellipse cx="310.59" cy="379.9828" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.2061" x="319.59" y="383.3295">ON_START: int</text><ellipse cx="310.59" cy="396.2797" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.0449" x="319.59" y="399.6264">UNDEFINED: int</text><ellipse cx="310.59" cy="412.5766" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.25" x="319.59" y="415.9232">PRE_ON_CREATE: int</text><ellipse cx="310.59" cy="428.8734" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.543" x="319.59" y="432.2201">ON_RESUME: int</text><line style="stroke:#181818;stroke-width:0.5;" x1="300.59" x2="476.4757" y1="439.5219" y2="439.5219"/><ellipse cx="310.59" cy="453.1703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="319.59" y="456.517">recycle(): void</text><ellipse cx="310.59" cy="469.4672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.2656" x="319.59" y="472.8139">getTargetState(): int</text></g><g id="elem_ActivityRelaunchItem"><rect codeLine="30" fill="#F1F1F1" height="325.0469" id="ActivityRelaunchItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="763.0576" x="7" y="514.96"/><ellipse cx="309.48" cy="530.96" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M312.4487,536.6006 Q311.8706,536.8975 311.23,537.0381 Q310.5894,537.1944 309.8862,537.1944 Q307.3862,537.1944 306.0581,535.5538 Q304.7456,533.8975 304.7456,530.7725 Q304.7456,527.6475 306.0581,525.9913 Q307.3862,524.335 309.8862,524.335 Q310.5894,524.335 311.23,524.4913 Q311.8862,524.6475 312.4487,524.9444 L312.4487,527.6631 Q311.8237,527.085 311.23,526.8194 Q310.6362,526.5381 310.0112,526.5381 Q308.6675,526.5381 307.98,527.6163 Q307.2925,528.6788 307.2925,530.7725 Q307.2925,532.8663 307.98,533.9444 Q308.6675,535.0069 310.0112,535.0069 Q310.6362,535.0069 311.23,534.7413 Q311.8237,534.46 312.4487,533.8819 L312.4487,536.6006 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.5977" x="329.98" y="535.8067">ActivityRelaunchItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="769.0576" y1="546.96" y2="546.96"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="557.6084"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.8701" x="27" y="563.9551">mConfigChanges: int</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="573.9053"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="305.7305" x="27" y="580.252">mPendingNewIntents: List&lt;ReferrerIntent&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="590.2022"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248.7666" x="27" y="596.5489">mPendingResults: List&lt;ResultInfo&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="606.4991"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="307.5625" x="27" y="612.8457">mActivityClientRecord: ActivityClientRecord</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="622.7959"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195.6582" x="27" y="629.1426">mPreserveWindow: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="639.0928"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.9258" x="27" y="645.4395">TAG: String</text><ellipse cx="18" cy="658.3897" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="301.9844" x="27" y="661.7364">CREATOR: Creator&lt;ActivityRelaunchItem&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="671.6866"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.5029" x="27" y="678.0332">mConfig: MergedConfiguration</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="769.0576" y1="685.335" y2="685.335"/><ellipse cx="18" cy="698.9834" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="27" y="702.3301">writeToParcel(Parcel, int): void</text><ellipse cx="18" cy="715.2803" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="27" y="718.627">equals(Object): boolean</text><ellipse cx="18" cy="731.5772" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="27" y="734.9239">recycle(): void</text><ellipse cx="18" cy="747.8741" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="27" y="751.2207">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="18" cy="764.1709" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="737.0576" x="27" y="767.5176">obtain(List&lt;ResultInfo&gt;, List&lt;ReferrerIntent&gt;, int, MergedConfiguration, boolean): ActivityRelaunchItem</text><ellipse cx="18" cy="780.4678" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="27" y="783.8145">hashCode(): int</text><ellipse cx="18" cy="796.7647" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="27" y="800.1114">preExecute(ClientTransactionHandler, IBinder): void</text><ellipse cx="18" cy="813.0616" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="27" y="816.4082">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="18" cy="829.3584" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="27" y="832.7051">toString(): String</text></g><g id="elem_ActivityResultItem"><rect codeLine="49" fill="#F1F1F1" height="227.2656" id="ActivityResultItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="58.59" y="874.85"/><ellipse cx="320.1022" cy="890.85" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M323.071,896.4906 Q322.4928,896.7875 321.8522,896.9281 Q321.2116,897.0844 320.5085,897.0844 Q318.0085,897.0844 316.6803,895.4437 Q315.3678,893.7875 315.3678,890.6625 Q315.3678,887.5375 316.6803,885.8812 Q318.0085,884.225 320.5085,884.225 Q321.2116,884.225 321.8522,884.3812 Q322.5085,884.5375 323.071,884.8344 L323.071,887.5531 Q322.446,886.975 321.8522,886.7094 Q321.2585,886.4281 320.6335,886.4281 Q319.2897,886.4281 318.6022,887.5062 Q317.9147,888.5687 317.9147,890.6625 Q317.9147,892.7562 318.6022,893.8344 Q319.2897,894.8969 320.6335,894.8969 Q321.2585,894.8969 321.8522,894.6312 Q322.446,894.35 323.071,893.7719 L323.071,896.4906 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.3584" x="340.6022" y="895.6967">ActivityResultItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="906.85" y2="906.85"/><ellipse cx="69.59" cy="920.4984" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="333.9629" x="78.59" y="923.8451">CALL_ACTIVITY_RESULT_BEFORE_RESUME: long</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="933.7953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="235.9766" x="78.59" y="940.142">mResultInfoList: List&lt;ResultInfo&gt;</text><ellipse cx="69.59" cy="953.0922" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="280.7451" x="78.59" y="956.4389">CREATOR: Creator&lt;ActivityResultItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="963.7406" y2="963.7406"/><ellipse cx="69.59" cy="977.3891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="311.0488" x="78.59" y="980.7357">obtain(List&lt;ResultInfo&gt;): ActivityResultItem</text><ellipse cx="69.59" cy="993.6859" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.59" y="997.0326">writeToParcel(Parcel, int): void</text><ellipse cx="69.59" cy="1009.9828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="78.59" y="1013.3295">equals(Object): boolean</text><ellipse cx="69.59" cy="1026.2797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="78.59" y="1029.6264">toString(): String</text><ellipse cx="69.59" cy="1042.5766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.59" y="1045.9232">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="69.59" cy="1058.8734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.59" y="1062.2201">recycle(): void</text><ellipse cx="69.59" cy="1075.1703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197.3125" x="78.59" y="1078.517">getPostExecutionState(): int</text><ellipse cx="69.59" cy="1091.4672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="78.59" y="1094.8139">hashCode(): int</text></g><g id="elem_ActivityTransactionItem"><rect codeLine="62" fill="#F1F1F1" height="96.8906" id="ActivityTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="830.06" y="1400.04"/><ellipse cx="1072.4418" cy="1416.04" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1075.4106,1421.6806 Q1074.8325,1421.9775 1074.1918,1422.1181 Q1073.5512,1422.2744 1072.8481,1422.2744 Q1070.3481,1422.2744 1069.02,1420.6338 Q1067.7075,1418.9775 1067.7075,1415.8525 Q1067.7075,1412.7275 1069.02,1411.0713 Q1070.3481,1409.415 1072.8481,1409.415 Q1073.5512,1409.415 1074.1918,1409.5713 Q1074.8481,1409.7275 1075.4106,1410.0244 L1075.4106,1412.7431 Q1074.7856,1412.165 1074.1918,1411.8994 Q1073.5981,1411.6181 1072.9731,1411.6181 Q1071.6293,1411.6181 1070.9418,1412.6963 Q1070.2543,1413.7588 1070.2543,1415.8525 Q1070.2543,1417.9463 1070.9418,1419.0244 Q1071.6293,1420.0869 1072.9731,1420.0869 Q1073.5981,1420.0869 1074.1918,1419.8213 Q1074.7856,1419.54 1075.4106,1418.9619 L1075.4106,1421.6806 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166.6191" x="1092.9418" y="1420.8867">ActivityTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="831.06" x2="1488.9428" y1="1432.04" y2="1432.04"/><line style="stroke:#181818;stroke-width:0.5;" x1="831.06" x2="1488.9428" y1="1440.04" y2="1440.04"/><ellipse cx="841.06" cy="1453.6884" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="541.2559" x="850.06" y="1457.0351">execute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="841.06" cy="1469.9853" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="850.06" y="1473.332">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><polygon fill="#4177AF" points="841.06,1482.2822,837.06,1488.2822,845.06,1488.2822" style="stroke:#1963A0;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="564.293" x="850.06" y="1489.6289">getActivityClientRecord(ClientTransactionHandler, IBinder): ActivityClientRecord</text></g><g id="elem_BaseClientRequest"><rect codeLine="67" fill="#F1F1F1" height="105.1563" id="BaseClientRequest" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="597.7236" x="1977.98" y="1395.9"/><ellipse cx="2206.5327" cy="1416.0328" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2202.4546,1411.7984 L2202.4546,1409.6422 L2209.8452,1409.6422 L2209.8452,1411.7984 L2207.3765,1411.7984 L2207.3765,1419.8766 L2209.8452,1419.8766 L2209.8452,1422.0328 L2202.4546,1422.0328 L2202.4546,1419.8766 L2204.9234,1419.8766 L2204.9234,1411.7984 L2202.4546,1411.7984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.2031" x="2258.9903" y="1412.0387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="132.1182" x="2227.0327" y="1427.8639">BaseClientRequest</text><line style="stroke:#181818;stroke-width:0.5;" x1="1978.98" x2="2574.7036" y1="1436.1656" y2="1436.1656"/><line style="stroke:#181818;stroke-width:0.5;" x1="1978.98" x2="2574.7036" y1="1444.1656" y2="1444.1656"/><ellipse cx="1988.98" cy="1457.8141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="541.2559" x="1997.98" y="1461.1607">execute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="1988.98" cy="1474.1109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="1997.98" y="1477.4576">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="1988.98" cy="1490.4078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="1997.98" y="1493.7545">preExecute(ClientTransactionHandler, IBinder): void</text></g><g id="elem_ClientTransaction"><rect codeLine="72" fill="#F1F1F1" height="373.9375" id="ClientTransaction" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="403.3164" x="2075.18" y="1536.51"/><ellipse cx="2211.2493" cy="1552.51" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2214.2181,1558.1506 Q2213.64,1558.4475 2212.9993,1558.5881 Q2212.3587,1558.7444 2211.6556,1558.7444 Q2209.1556,1558.7444 2207.8275,1557.1038 Q2206.515,1555.4475 2206.515,1552.3225 Q2206.515,1549.1975 2207.8275,1547.5413 Q2209.1556,1545.885 2211.6556,1545.885 Q2212.3587,1545.885 2212.9993,1546.0413 Q2213.6556,1546.1975 2214.2181,1546.4944 L2214.2181,1549.2131 Q2213.5931,1548.635 2212.9993,1548.3694 Q2212.4056,1548.0881 2211.7806,1548.0881 Q2210.4368,1548.0881 2209.7493,1549.1663 Q2209.0618,1550.2288 2209.0618,1552.3225 Q2209.0618,1554.4163 2209.7493,1555.4944 Q2210.4368,1556.5569 2211.7806,1556.5569 Q2212.4056,1556.5569 2212.9993,1556.2913 Q2213.5931,1556.01 2214.2181,1555.4319 L2214.2181,1558.1506 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.6777" x="2231.7493" y="1557.3567">ClientTransaction</text><line style="stroke:#181818;stroke-width:0.5;" x1="2076.18" x2="2477.4964" y1="1568.51" y2="1568.51"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2083.18" y="1579.1584"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="344.5859" x="2095.18" y="1585.5051">mActivityCallbacks: List&lt;ClientTransactionItem&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2083.18" y="1595.4553"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="324.6592" x="2095.18" y="1601.802">mLifecycleStateRequest: ActivityLifecycleItem</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2083.18" y="1611.7522"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.8701" x="2095.18" y="1618.0989">mActivityToken: IBinder</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2083.18" y="1628.0491"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194.9473" x="2095.18" y="1634.3957">mClient: IApplicationThread</text><ellipse cx="2086.18" cy="1647.3459" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="275.0645" x="2095.18" y="1650.6926">CREATOR: Creator&lt;ClientTransaction&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="2076.18" x2="2477.4964" y1="1657.9944" y2="1657.9944"/><ellipse cx="2086.18" cy="1671.6428" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="2095.18" y="1674.9895">hashCode(): int</text><ellipse cx="2086.18" cy="1687.9397" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="377.3164" x="2095.18" y="1691.2864">obtain(IApplicationThread, IBinder): ClientTransaction</text><ellipse cx="2086.18" cy="1704.2366" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="344.9346" x="2095.18" y="1707.5832">getLifecycleStateRequest(): ActivityLifecycleItem</text><ellipse cx="2086.18" cy="1720.5334" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216.4805" x="2095.18" y="1723.8801">dump(String, PrintWriter): void</text><ellipse cx="2086.18" cy="1736.8303" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188.1455" x="2095.18" y="1740.177">getActivityToken(): IBinder</text><ellipse cx="2086.18" cy="1753.1272" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="2095.18" y="1756.4739">equals(Object): boolean</text><ellipse cx="2086.18" cy="1769.4241" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="312.2588" x="2095.18" y="1772.7707">getCallbacks(): List&lt;ClientTransactionItem&gt;</text><ellipse cx="2086.18" cy="1785.7209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="372.9688" x="2095.18" y="1789.0676">setLifecycleStateRequest(ActivityLifecycleItem): void</text><ellipse cx="2086.18" cy="1802.0178" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="307.1934" x="2095.18" y="1805.3645">preExecute(ClientTransactionHandler): void</text><ellipse cx="2086.18" cy="1818.3147" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.2227" x="2095.18" y="1821.6614">getClient(): IApplicationThread</text><ellipse cx="2086.18" cy="1834.6116" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.458" x="2095.18" y="1837.9582">schedule(): void</text><ellipse cx="2086.18" cy="1850.9084" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="2095.18" y="1854.2551">writeToParcel(Parcel, int): void</text><ellipse cx="2086.18" cy="1867.2053" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.9521" x="2095.18" y="1870.552">describeContents(): int</text><ellipse cx="2086.18" cy="1883.5022" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="2095.18" y="1886.8489">recycle(): void</text><ellipse cx="2086.18" cy="1899.7991" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="290.0215" x="2095.18" y="1903.1457">addCallback(ClientTransactionItem): void</text></g><g id="elem_ClientTransactionItem"><rect codeLine="94" fill="#F1F1F1" height="96.8906" id="ClientTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="368.0361" x="1549.94" y="1400.04"/><ellipse cx="1652.4346" cy="1416.04" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M1655.4034,1421.6806 Q1654.8253,1421.9775 1654.1846,1422.1181 Q1653.544,1422.2744 1652.8409,1422.2744 Q1650.3409,1422.2744 1649.0128,1420.6338 Q1647.7003,1418.9775 1647.7003,1415.8525 Q1647.7003,1412.7275 1649.0128,1411.0713 Q1650.3409,1409.415 1652.8409,1409.415 Q1653.544,1409.415 1654.1846,1409.5713 Q1654.8409,1409.7275 1655.4034,1410.0244 L1655.4034,1412.7431 Q1654.7784,1412.165 1654.1846,1411.8994 Q1653.5909,1411.6181 1652.9659,1411.6181 Q1651.6221,1411.6181 1650.9346,1412.6963 Q1650.2471,1413.7588 1650.2471,1415.8525 Q1650.2471,1417.9463 1650.9346,1419.0244 Q1651.6221,1420.0869 1652.9659,1420.0869 Q1653.5909,1420.0869 1654.1846,1419.8213 Q1654.7784,1419.54 1655.4034,1418.9619 L1655.4034,1421.6806 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.5469" x="1672.9346" y="1420.8867">ClientTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="1550.94" x2="1916.9761" y1="1432.04" y2="1432.04"/><line style="stroke:#181818;stroke-width:0.5;" x1="1550.94" x2="1916.9761" y1="1440.04" y2="1440.04"/><ellipse cx="1560.94" cy="1453.6884" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.9521" x="1569.94" y="1457.0351">describeContents(): int</text><polygon fill="#4177AF" points="1560.94,1465.9853,1556.94,1471.9853,1564.94,1471.9853" style="stroke:#1963A0;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="342.0361" x="1569.94" y="1473.332">shouldHaveDefinedPreExecutionState(): boolean</text><ellipse cx="1560.94" cy="1486.2822" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197.3125" x="1569.94" y="1489.6289">getPostExecutionState(): int</text></g><g id="elem_EnterPipRequestedItem"><rect codeLine="99" fill="#F1F1F1" height="162.0781" id="EnterPipRequestedItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="58.59" y="1137.44"/><ellipse cx="301.4504" cy="1153.44" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M304.4191,1159.0806 Q303.841,1159.3775 303.2004,1159.5181 Q302.5597,1159.6744 301.8566,1159.6744 Q299.3566,1159.6744 298.0285,1158.0338 Q296.716,1156.3775 296.716,1153.2525 Q296.716,1150.1275 298.0285,1148.4713 Q299.3566,1146.815 301.8566,1146.815 Q302.5597,1146.815 303.2004,1146.9713 Q303.8566,1147.1275 304.4191,1147.4244 L304.4191,1150.1431 Q303.7941,1149.565 303.2004,1149.2994 Q302.6066,1149.0181 301.9816,1149.0181 Q300.6379,1149.0181 299.9504,1150.0963 Q299.2629,1151.1588 299.2629,1153.2525 Q299.2629,1155.3463 299.9504,1156.4244 Q300.6379,1157.4869 301.9816,1157.4869 Q302.6066,1157.4869 303.2004,1157.2213 Q303.7941,1156.94 304.4191,1156.3619 L304.4191,1159.0806 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165.6621" x="321.9504" y="1158.2867">EnterPipRequestedItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="1169.44" y2="1169.44"/><ellipse cx="69.59" cy="1183.0884" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="318.0488" x="78.59" y="1186.4351">CREATOR: Creator&lt;EnterPipRequestedItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="1193.7369" y2="1193.7369"/><ellipse cx="69.59" cy="1207.3853" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230.0361" x="78.59" y="1210.732">obtain(): EnterPipRequestedItem</text><ellipse cx="69.59" cy="1223.6822" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.59" y="1227.0289">recycle(): void</text><ellipse cx="69.59" cy="1239.9791" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.59" y="1243.3257">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="69.59" cy="1256.2759" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="78.59" y="1259.6226">equals(Object): boolean</text><ellipse cx="69.59" cy="1272.5728" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="78.59" y="1275.9195">toString(): String</text><ellipse cx="69.59" cy="1288.8697" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.59" y="1292.2164">writeToParcel(Parcel, int): void</text></g><g id="elem_MoveToDisplayItem"><rect codeLine="108" fill="#F1F1F1" height="227.2656" id="MoveToDisplayItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="58.59" y="1334.85"/><ellipse cx="315.2145" cy="1350.85" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M318.1833,1356.4906 Q317.6051,1356.7875 316.9645,1356.9281 Q316.3239,1357.0844 315.6208,1357.0844 Q313.1208,1357.0844 311.7926,1355.4438 Q310.4801,1353.7875 310.4801,1350.6625 Q310.4801,1347.5375 311.7926,1345.8813 Q313.1208,1344.225 315.6208,1344.225 Q316.3239,1344.225 316.9645,1344.3813 Q317.6208,1344.5375 318.1833,1344.8344 L318.1833,1347.5531 Q317.5583,1346.975 316.9645,1346.7094 Q316.3708,1346.4281 315.7458,1346.4281 Q314.402,1346.4281 313.7145,1347.5063 Q313.027,1348.5688 313.027,1350.6625 Q313.027,1352.7563 313.7145,1353.8344 Q314.402,1354.8969 315.7458,1354.8969 Q316.3708,1354.8969 316.9645,1354.6313 Q317.5583,1354.35 318.1833,1353.7719 L318.1833,1356.4906 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138.1338" x="335.7145" y="1355.6967">MoveToDisplayItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="1366.85" y2="1366.85"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="1377.4984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151.5527" x="78.59" y="1383.8451">mTargetDisplayId: int</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="1393.7953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212.6934" x="78.59" y="1400.142">mConfiguration: Configuration</text><ellipse cx="69.59" cy="1413.0922" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="290.5205" x="78.59" y="1416.4389">CREATOR: Creator&lt;MoveToDisplayItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="1423.7406" y2="1423.7406"/><ellipse cx="69.59" cy="1437.3891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="78.59" y="1440.7357">preExecute(ClientTransactionHandler, IBinder): void</text><ellipse cx="69.59" cy="1453.6859" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="78.59" y="1457.0326">hashCode(): int</text><ellipse cx="69.59" cy="1469.9828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="78.59" y="1473.3295">toString(): String</text><ellipse cx="69.59" cy="1486.2797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="324.6045" x="78.59" y="1489.6264">obtain(int, Configuration): MoveToDisplayItem</text><ellipse cx="69.59" cy="1502.5766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.59" y="1505.9232">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="69.59" cy="1518.8734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.59" y="1522.2201">recycle(): void</text><ellipse cx="69.59" cy="1535.1703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.59" y="1538.517">writeToParcel(Parcel, int): void</text><ellipse cx="69.59" cy="1551.4672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="78.59" y="1554.8139">equals(Object): boolean</text></g><g id="elem_NewIntentItem"><rect codeLine="121" fill="#F1F1F1" height="227.2656" id="NewIntentItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="58.59" y="1596.85"/><ellipse cx="332.3454" cy="1612.85" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M335.3141,1618.4906 Q334.736,1618.7875 334.0954,1618.9281 Q333.4547,1619.0844 332.7516,1619.0844 Q330.2516,1619.0844 328.9235,1617.4438 Q327.611,1615.7875 327.611,1612.6625 Q327.611,1609.5375 328.9235,1607.8813 Q330.2516,1606.225 332.7516,1606.225 Q333.4547,1606.225 334.0954,1606.3813 Q334.7516,1606.5375 335.3141,1606.8344 L335.3141,1609.5531 Q334.6891,1608.975 334.0954,1608.7094 Q333.5016,1608.4281 332.8766,1608.4281 Q331.5329,1608.4281 330.8454,1609.5063 Q330.1579,1610.5688 330.1579,1612.6625 Q330.1579,1614.7563 330.8454,1615.8344 Q331.5329,1616.8969 332.8766,1616.8969 Q333.5016,1616.8969 334.0954,1616.6313 Q334.6891,1616.35 335.3141,1615.7719 L335.3141,1618.4906 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.8721" x="352.8454" y="1617.6967">NewIntentItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="1628.85" y2="1628.85"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="1639.4984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218.7295" x="78.59" y="1645.8451">mIntents: List&lt;ReferrerIntent&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="1655.7953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.5361" x="78.59" y="1662.142">mResume: boolean</text><ellipse cx="69.59" cy="1675.0922" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="256.2588" x="78.59" y="1678.4389">CREATOR: Creator&lt;NewIntentItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="1685.7406" y2="1685.7406"/><ellipse cx="69.59" cy="1699.3891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380.2832" x="78.59" y="1702.7357">obtain(List&lt;ReferrerIntent&gt;, boolean): NewIntentItem</text><ellipse cx="69.59" cy="1715.6859" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.59" y="1719.0326">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="69.59" cy="1731.9828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="78.59" y="1735.3295">hashCode(): int</text><ellipse cx="69.59" cy="1748.2797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197.3125" x="78.59" y="1751.6264">getPostExecutionState(): int</text><ellipse cx="69.59" cy="1764.5766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.59" y="1767.9232">writeToParcel(Parcel, int): void</text><ellipse cx="69.59" cy="1780.8734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="78.59" y="1784.2201">toString(): String</text><ellipse cx="69.59" cy="1797.1703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="78.59" y="1800.517">equals(Object): boolean</text><ellipse cx="69.59" cy="1813.4672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.59" y="1816.8139">recycle(): void</text></g><g id="elem_ObjectPoolItem"><rect codeLine="134" fill="#F1F1F1" height="72.5625" id="ObjectPoolItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="138.9277" x="2635.7" y="1550.2"/><ellipse cx="2650.7" cy="1570.3328" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2646.6219,1566.0984 L2646.6219,1563.9422 L2654.0125,1563.9422 L2654.0125,1566.0984 L2651.5438,1566.0984 L2651.5438,1574.1766 L2654.0125,1574.1766 L2654.0125,1576.3328 L2646.6219,1576.3328 L2646.6219,1574.1766 L2649.0906,1574.1766 L2649.0906,1566.0984 L2646.6219,1566.0984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.2031" x="2684.0623" y="1566.3387">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="106.9277" x="2664.7" y="1582.1639">ObjectPoolItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="2636.7" x2="2773.6277" y1="1590.4656" y2="1590.4656"/><line style="stroke:#181818;stroke-width:0.5;" x1="2636.7" x2="2773.6277" y1="1598.4656" y2="1598.4656"/><ellipse cx="2646.7" cy="1612.1141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="2655.7" y="1615.4607">recycle(): void</text></g><g id="elem_PipStateTransactionItem"><rect codeLine="137" fill="#F1F1F1" height="178.375" id="PipStateTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="58.59" y="1859.29"/><ellipse cx="298.1349" cy="1875.29" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M301.1037,1880.9306 Q300.5255,1881.2275 299.8849,1881.3681 Q299.2443,1881.5244 298.5412,1881.5244 Q296.0412,1881.5244 294.713,1879.8838 Q293.4005,1878.2275 293.4005,1875.1025 Q293.4005,1871.9775 294.713,1870.3213 Q296.0412,1868.665 298.5412,1868.665 Q299.2443,1868.665 299.8849,1868.8213 Q300.5412,1868.9775 301.1037,1869.2744 L301.1037,1871.9931 Q300.4787,1871.415 299.8849,1871.1494 Q299.2912,1870.8681 298.6662,1870.8681 Q297.3224,1870.8681 296.6349,1871.9463 Q295.9474,1873.0088 295.9474,1875.1025 Q295.9474,1877.1963 296.6349,1878.2744 Q297.3224,1879.3369 298.6662,1879.3369 Q299.2912,1879.3369 299.8849,1879.0713 Q300.4787,1878.79 301.1037,1878.2119 L301.1037,1880.9306 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172.293" x="318.6349" y="1880.1367">PipStateTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="1891.29" y2="1891.29"/><ellipse cx="69.59" cy="1904.9384" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="324.6797" x="78.59" y="1908.2851">CREATOR: Creator&lt;PipStateTransactionItem&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="1918.2353"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242.7988" x="78.59" y="1924.582">mPipState: PictureInPictureUiState</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="1931.8838" y2="1931.8838"/><ellipse cx="69.59" cy="1945.5322" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="398.3848" x="78.59" y="1948.8789">obtain(PictureInPictureUiState): PipStateTransactionItem</text><ellipse cx="69.59" cy="1961.8291" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.59" y="1965.1757">recycle(): void</text><ellipse cx="69.59" cy="1978.1259" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="78.59" y="1981.4726">toString(): String</text><ellipse cx="69.59" cy="1994.4228" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.59" y="1997.7695">writeToParcel(Parcel, int): void</text><ellipse cx="69.59" cy="2010.7197" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="78.59" y="2014.0664">equals(Object): boolean</text><ellipse cx="69.59" cy="2027.0166" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.59" y="2030.3632">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text></g><g id="elem_RefreshCallbackItem"><rect codeLine="147" fill="#F1F1F1" height="243.5625" id="RefreshCallbackItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="58.59" y="2072.7"/><ellipse cx="311.7419" cy="2088.7" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M314.7106,2094.3406 Q314.1325,2094.6375 313.4919,2094.7781 Q312.8512,2094.9344 312.1481,2094.9344 Q309.6481,2094.9344 308.32,2093.2938 Q307.0075,2091.6375 307.0075,2088.5125 Q307.0075,2085.3875 308.32,2083.7313 Q309.6481,2082.075 312.1481,2082.075 Q312.8512,2082.075 313.4919,2082.2313 Q314.1481,2082.3875 314.7106,2082.6844 L314.7106,2085.4031 Q314.0856,2084.825 313.4919,2084.5594 Q312.8981,2084.2781 312.2731,2084.2781 Q310.9294,2084.2781 310.2419,2085.3563 Q309.5544,2086.4188 309.5544,2088.5125 Q309.5544,2090.6063 310.2419,2091.6844 Q310.9294,2092.7469 312.2731,2092.7469 Q312.8981,2092.7469 313.4919,2092.4813 Q314.0856,2092.2 314.7106,2091.6219 L314.7106,2094.3406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.0791" x="332.2419" y="2093.5467">RefreshCallbackItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="2104.7" y2="2104.7"/><ellipse cx="69.59" cy="2118.3484" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="297.4658" x="78.59" y="2121.6951">CREATOR: Creator&lt;RefreshCallbackItem&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="2131.6453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177.0371" x="78.59" y="2137.992">mPostExecutionState: int</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="2145.2938" y2="2145.2938"/><ellipse cx="69.59" cy="2158.9422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197.3125" x="78.59" y="2162.2889">getPostExecutionState(): int</text><ellipse cx="69.59" cy="2175.2391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.59" y="2178.5857">writeToParcel(Parcel, int): void</text><polygon fill="#4177AF" points="69.59,2187.5359,65.59,2193.5359,73.59,2193.5359" style="stroke:#1963A0;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="342.0361" x="78.59" y="2194.8826">shouldHaveDefinedPreExecutionState(): boolean</text><ellipse cx="69.59" cy="2207.8328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.59" y="2211.1795">recycle(): void</text><ellipse cx="69.59" cy="2224.1297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="78.59" y="2227.4764">toString(): String</text><ellipse cx="69.59" cy="2240.4266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.59" y="2243.7732">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="69.59" cy="2256.7234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="78.59" y="2260.0701">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="69.59" cy="2273.0203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="78.59" y="2276.367">equals(Object): boolean</text><ellipse cx="69.59" cy="2289.3172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="78.59" y="2292.6639">hashCode(): int</text><ellipse cx="69.59" cy="2305.6141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227.7051" x="78.59" y="2308.9607">obtain(int): RefreshCallbackItem</text></g><g id="elem_TopResumedActivityChangeItem"><rect codeLine="161" fill="#F1F1F1" height="210.9688" id="TopResumedActivityChangeItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="58.59" y="2351"/><ellipse cx="269.4206" cy="2367" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M272.3893,2372.6406 Q271.8112,2372.9375 271.1706,2373.0781 Q270.5299,2373.2344 269.8268,2373.2344 Q267.3268,2373.2344 265.9987,2371.5938 Q264.6862,2369.9375 264.6862,2366.8125 Q264.6862,2363.6875 265.9987,2362.0313 Q267.3268,2360.375 269.8268,2360.375 Q270.5299,2360.375 271.1706,2360.5313 Q271.8268,2360.6875 272.3893,2360.9844 L272.3893,2363.7031 Q271.7643,2363.125 271.1706,2362.8594 Q270.5768,2362.5781 269.9518,2362.5781 Q268.6081,2362.5781 267.9206,2363.6563 Q267.2331,2364.7188 267.2331,2366.8125 Q267.2331,2368.9063 267.9206,2369.9844 Q268.6081,2371.0469 269.9518,2371.0469 Q270.5768,2371.0469 271.1706,2370.7813 Q271.7643,2370.5 272.3893,2369.9219 L272.3893,2372.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229.7217" x="289.9206" y="2371.8467">TopResumedActivityChangeItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="2383" y2="2383"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.59" y="2393.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.6738" x="78.59" y="2399.9951">mOnTop: boolean</text><ellipse cx="69.59" cy="2412.9453" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="382.1084" x="78.59" y="2416.292">CREATOR: Creator&lt;TopResumedActivityChangeItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.59" x2="717.4728" y1="2423.5938" y2="2423.5938"/><ellipse cx="69.59" cy="2437.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.59" y="2440.5889">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="69.59" cy="2453.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="78.59" y="2456.8857">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="69.59" cy="2469.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="78.59" y="2473.1826">toString(): String</text><ellipse cx="69.59" cy="2486.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.59" y="2489.4795">writeToParcel(Parcel, int): void</text><ellipse cx="69.59" cy="2502.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="78.59" y="2505.7764">equals(Object): boolean</text><ellipse cx="69.59" cy="2518.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="78.59" y="2522.0732">hashCode(): int</text><ellipse cx="69.59" cy="2535.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="350.0684" x="78.59" y="2538.3701">obtain(boolean): TopResumedActivityChangeItem</text><ellipse cx="69.59" cy="2551.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.59" y="2554.667">recycle(): void</text></g><g id="elem_TransferSplashScreenViewStateItem"><rect codeLine="173" fill="#F1F1F1" height="162.0781" id="TransferSplashScreenViewStateItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="660.5049" x="58.28" y="2597.44"/><ellipse cx="256.4538" cy="2613.44" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M259.4226,2619.0806 Q258.8445,2619.3775 258.2038,2619.5181 Q257.5632,2619.6744 256.8601,2619.6744 Q254.3601,2619.6744 253.032,2618.0338 Q251.7195,2616.3775 251.7195,2613.2525 Q251.7195,2610.1275 253.032,2608.4713 Q254.3601,2606.815 256.8601,2606.815 Q257.5632,2606.815 258.2038,2606.9713 Q258.8601,2607.1275 259.4226,2607.4244 L259.4226,2610.1431 Q258.7976,2609.565 258.2038,2609.2994 Q257.6101,2609.0181 256.9851,2609.0181 Q255.6413,2609.0181 254.9538,2610.0963 Q254.2663,2611.1588 254.2663,2613.2525 Q254.2663,2615.3463 254.9538,2616.4244 Q255.6413,2617.4869 256.9851,2617.4869 Q257.6101,2617.4869 258.2038,2617.2213 Q258.7976,2616.94 259.4226,2616.3619 L259.4226,2619.0806 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="255.6572" x="276.9538" y="2618.2867">TransferSplashScreenViewStateItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.28" x2="717.7849" y1="2629.44" y2="2629.44"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.28" y="2640.0884"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="425.4551" x="78.28" y="2646.4351">mSplashScreenViewParcelable: SplashScreenViewParcelable</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="66.28" y="2656.3853"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="279.5693" x="78.28" y="2662.732">mStartingWindowLeash: SurfaceControl</text><ellipse cx="69.28" cy="2675.6822" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="408.0439" x="78.28" y="2679.0289">CREATOR: Creator&lt;TransferSplashScreenViewStateItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="59.28" x2="717.7849" y1="2686.3306" y2="2686.3306"/><ellipse cx="69.28" cy="2699.9791" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="78.28" y="2703.3257">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text><ellipse cx="69.28" cy="2716.2759" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="78.28" y="2719.6226">writeToParcel(Parcel, int): void</text><ellipse cx="69.28" cy="2732.5728" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="78.28" y="2735.9195">recycle(): void</text><ellipse cx="69.28" cy="2748.8697" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="634.5049" x="78.28" y="2752.2164">obtain(SplashScreenViewParcelable, SurfaceControl): TransferSplashScreenViewStateItem</text></g><g id="link_ActivityConfigurationChangeItem_ActivityTransactionItem"><path codeLine="183" d="M718.65,112.48 C999.84,112.48 1358.63,112.48 1358.63,112.48 C1358.63,112.48 1358.63,1141.47 1358.63,1381.75 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityConfigurationChangeItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1358.63,1399.75,1364.63,1381.75,1352.63,1381.75,1358.63,1399.75" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityLifecycleItem_ActivityTransactionItem"><path codeLine="184" d="M477.82,366.48 C693.77,366.48 1226.63,366.48 1226.63,366.48 C1226.63,366.48 1226.63,1171.35 1226.63,1381.89 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityLifecycleItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1226.63,1399.89,1232.63,1381.89,1220.63,1381.89,1226.63,1399.89" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityRelaunchItem_ActivityTransactionItem"><path codeLine="185" d="M744.63,840.34 C744.63,1062.25 744.63,1432.33 744.63,1432.33 C744.63,1432.33 761.81,1432.33 811.69,1432.33 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityRelaunchItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="829.69,1432.33,811.69,1426.33,811.69,1438.33,829.69,1432.33" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityResultItem_ActivityTransactionItem"><path codeLine="186" d="M718.84,988.48 C902.61,988.48 1094.63,988.48 1094.63,988.48 C1094.63,988.48 1094.63,1263.3 1094.63,1381.69 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityResultItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1094.63,1399.69,1100.63,1381.69,1088.63,1381.69,1094.63,1399.69" style="stroke:#000082;stroke-width:1;"/></g><g id="link_ActivityTransactionItem_ClientTransactionItem"><path codeLine="187" d="M1490.13,1448.48 C1510.34,1448.48 1512.26,1448.48 1531.47,1448.48 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityTransactionItem-to-ClientTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1549.47,1448.48,1531.47,1442.48,1531.47,1454.48,1549.47,1448.48" style="stroke:#000082;stroke-width:1;"/></g><g id="link_BaseClientRequest_ObjectPoolItem"><path codeLine="188" d="M2527.63,1501.51 C2527.63,1535.92 2527.63,1574.39 2527.63,1574.39 C2527.63,1574.39 2567.57,1574.39 2617.25,1574.39 " fill="#FFFFFF" fill-opacity="0.00000" id="BaseClientRequest-to-ObjectPoolItem" style="stroke:#008200;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2635.25,1574.39,2617.25,1568.39,2617.25,1580.39,2635.25,1574.39" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ClientTransaction_ObjectPoolItem"><path codeLine="189" d="M2478.77,1598.57 C2535.14,1598.57 2574.64,1598.57 2617.58,1598.57 " fill="#FFFFFF" fill-opacity="0.00000" id="ClientTransaction-to-ObjectPoolItem" style="stroke:#008200;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2635.58,1598.57,2617.58,1592.57,2617.58,1604.57,2635.58,1598.57" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ClientTransactionItem_BaseClientRequest"><path codeLine="190" d="M1918.13,1448.48 C1937.5,1448.48 1939.54,1448.48 1959.78,1448.48 " fill="#FFFFFF" fill-opacity="0.00000" id="ClientTransactionItem-to-BaseClientRequest" style="stroke:#008200;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1977.78,1448.48,1959.78,1442.48,1959.78,1454.48,1977.78,1448.48" style="stroke:#008200;stroke-width:1;"/></g><g id="link_EnterPipRequestedItem_ActivityTransactionItem"><path codeLine="191" d="M718.74,1218.48 C846.52,1218.48 962.63,1218.48 962.63,1218.48 C962.63,1218.48 962.63,1314.19 962.63,1381.7 " fill="#FFFFFF" fill-opacity="0.00000" id="EnterPipRequestedItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="962.63,1399.7,968.63,1381.7,956.63,1381.7,962.63,1399.7" style="stroke:#000082;stroke-width:1;"/></g><g id="link_MoveToDisplayItem_ActivityTransactionItem"><path codeLine="192" d="M718.78,1464.63 C755.5,1464.63 774.9,1464.63 811.62,1464.63 " fill="#FFFFFF" fill-opacity="0.00000" id="MoveToDisplayItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="829.62,1464.63,811.62,1458.63,811.62,1470.63,829.62,1464.63" style="stroke:#000082;stroke-width:1;"/></g><g id="link_NewIntentItem_ActivityTransactionItem"><path codeLine="193" d="M718.85,1710.48 C836.6,1710.48 940.63,1710.48 940.63,1710.48 C940.63,1710.48 940.63,1590.92 940.63,1515.15 " fill="#FFFFFF" fill-opacity="0.00000" id="NewIntentItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="940.63,1497.15,934.63,1515.15,946.63,1515.15,940.63,1497.15" style="stroke:#000082;stroke-width:1;"/></g><g id="link_PipStateTransactionItem_ActivityTransactionItem"><path codeLine="194" d="M718.61,1884.87 C884.46,1884.87 1050.63,1884.87 1050.63,1884.87 C1050.63,1884.87 1050.63,1629.14 1050.63,1515.27 " fill="#FFFFFF" fill-opacity="0.00000" id="PipStateTransactionItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1050.63,1497.27,1044.63,1515.27,1056.63,1515.27,1050.63,1497.27" style="stroke:#000082;stroke-width:1;"/></g><g id="link_RefreshCallbackItem_ActivityTransactionItem"><path codeLine="195" d="M718.77,2194.48 C928.48,2194.48 1160.63,2194.48 1160.63,2194.48 C1160.63,2194.48 1160.63,1680.78 1160.63,1515.14 " fill="#FFFFFF" fill-opacity="0.00000" id="RefreshCallbackItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1160.63,1497.14,1154.63,1515.14,1166.63,1515.14,1160.63,1497.14" style="stroke:#000082;stroke-width:1;"/></g><g id="link_TopResumedActivityChangeItem_ActivityTransactionItem"><path codeLine="196" d="M718.87,2456.48 C969.3,2456.48 1270.63,2456.48 1270.63,2456.48 C1270.63,2456.48 1270.63,1716.45 1270.63,1515.1 " fill="#FFFFFF" fill-opacity="0.00000" id="TopResumedActivityChangeItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1270.63,1497.1,1264.63,1515.1,1276.63,1515.1,1270.63,1497.1" style="stroke:#000082;stroke-width:1;"/></g><g id="link_TransferSplashScreenViewStateItem_ActivityTransactionItem"><path codeLine="197" d="M719.23,2678.48 C1007.78,2678.48 1380.63,2678.48 1380.63,2678.48 C1380.63,2678.48 1380.63,1743.17 1380.63,1515.08 " fill="#FFFFFF" fill-opacity="0.00000" id="TransferSplashScreenViewStateItem-to-ActivityTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="1380.63,1497.08,1374.63,1515.08,1386.63,1515.08,1380.63,1497.08" style="stroke:#000082;stroke-width:1;"/></g></g></svg></div>
</details>

<details open><summary>mermaid</summary>

<pre class="mermaid"><code>classDiagram

direction LR

class ActivityConfigurationChangeItem {

- Configuration mConfiguration

+ Creator~ActivityConfigurationChangeItem~ CREATOR

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ hashCode() int

+ toString() String

+ preExecute(ClientTransactionHandler, IBinder) void

+ writeToParcel(Parcel, int) void

+ equals(Object) boolean

+ obtain(Configuration) ActivityConfigurationChangeItem

+ recycle() void

}

class ActivityLifecycleItem {

+ int ON_CREATE

+ int ON_PAUSE

+ int ON_DESTROY

+ int ON_RESTART

+ int ON_STOP

+ int ON_START

+ int UNDEFINED

+ int PRE_ON_CREATE

+ int ON_RESUME

+ recycle() void

+ getTargetState() int

}

class ActivityRelaunchItem {

- int mConfigChanges

- List~ReferrerIntent~ mPendingNewIntents

- List~ResultInfo~ mPendingResults

- ActivityClientRecord mActivityClientRecord

- boolean mPreserveWindow

- String TAG

+ Creator~ActivityRelaunchItem~ CREATOR

- MergedConfiguration mConfig

+ writeToParcel(Parcel, int) void

+ equals(Object) boolean

+ recycle() void

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ obtain(List~ResultInfo~, List~ReferrerIntent~, int, MergedConfiguration, boolean) ActivityRelaunchItem

+ hashCode() int

+ preExecute(ClientTransactionHandler, IBinder) void

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ toString() String

}

class ActivityResultItem {

+ long CALL_ACTIVITY_RESULT_BEFORE_RESUME

- List~ResultInfo~ mResultInfoList

+ Creator~ActivityResultItem~ CREATOR

+ obtain(List~ResultInfo~) ActivityResultItem

+ writeToParcel(Parcel, int) void

+ equals(Object) boolean

+ toString() String

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ recycle() void

+ getPostExecutionState() int

+ hashCode() int

}

class ActivityTransactionItem {

+ execute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

~ getActivityClientRecord(ClientTransactionHandler, IBinder) ActivityClientRecord

}

class BaseClientRequest {

&lt;&lt;Interface&gt;&gt;

+ execute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ preExecute(ClientTransactionHandler, IBinder) void

}

class ClientTransaction {

- List~ClientTransactionItem~ mActivityCallbacks

- ActivityLifecycleItem mLifecycleStateRequest

- IBinder mActivityToken

- IApplicationThread mClient

+ Creator~ClientTransaction~ CREATOR

+ hashCode() int

+ obtain(IApplicationThread, IBinder) ClientTransaction

+ getLifecycleStateRequest() ActivityLifecycleItem

+ dump(String, PrintWriter) void

+ getActivityToken() IBinder

+ equals(Object) boolean

+ getCallbacks() List~ClientTransactionItem~

+ setLifecycleStateRequest(ActivityLifecycleItem) void

+ preExecute(ClientTransactionHandler) void

+ getClient() IApplicationThread

+ schedule() void

+ writeToParcel(Parcel, int) void

+ describeContents() int

+ recycle() void

+ addCallback(ClientTransactionItem) void

}

class ClientTransactionItem {

+ describeContents() int

~ shouldHaveDefinedPreExecutionState() boolean

+ getPostExecutionState() int

}

class EnterPipRequestedItem {

+ Creator~EnterPipRequestedItem~ CREATOR

+ obtain() EnterPipRequestedItem

+ recycle() void

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ equals(Object) boolean

+ toString() String

+ writeToParcel(Parcel, int) void

}

class MoveToDisplayItem {

- int mTargetDisplayId

- Configuration mConfiguration

+ Creator~MoveToDisplayItem~ CREATOR

+ preExecute(ClientTransactionHandler, IBinder) void

+ hashCode() int

+ toString() String

+ obtain(int, Configuration) MoveToDisplayItem

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ recycle() void

+ writeToParcel(Parcel, int) void

+ equals(Object) boolean

}

class NewIntentItem {

- List~ReferrerIntent~ mIntents

- boolean mResume

+ Creator~NewIntentItem~ CREATOR

+ obtain(List~ReferrerIntent~, boolean) NewIntentItem

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ hashCode() int

+ getPostExecutionState() int

+ writeToParcel(Parcel, int) void

+ toString() String

+ equals(Object) boolean

+ recycle() void

}

class ObjectPoolItem {

&lt;&lt;Interface&gt;&gt;

+ recycle() void

}

class PipStateTransactionItem {

+ Creator~PipStateTransactionItem~ CREATOR

- PictureInPictureUiState mPipState

+ obtain(PictureInPictureUiState) PipStateTransactionItem

+ recycle() void

+ toString() String

+ writeToParcel(Parcel, int) void

+ equals(Object) boolean

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

}

class RefreshCallbackItem {

+ Creator~RefreshCallbackItem~ CREATOR

- int mPostExecutionState

+ getPostExecutionState() int

+ writeToParcel(Parcel, int) void

~ shouldHaveDefinedPreExecutionState() boolean

+ recycle() void

+ toString() String

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ equals(Object) boolean

+ hashCode() int

+ obtain(int) RefreshCallbackItem

}

class TopResumedActivityChangeItem {

- boolean mOnTop

+ Creator~TopResumedActivityChangeItem~ CREATOR

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ toString() String

+ writeToParcel(Parcel, int) void

+ equals(Object) boolean

+ hashCode() int

+ obtain(boolean) TopResumedActivityChangeItem

+ recycle() void

}

class TransferSplashScreenViewStateItem {

- SplashScreenViewParcelable mSplashScreenViewParcelable

- SurfaceControl mStartingWindowLeash

+ Creator~TransferSplashScreenViewStateItem~ CREATOR

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

+ writeToParcel(Parcel, int) void

+ recycle() void

+ obtain(SplashScreenViewParcelable, SurfaceControl) TransferSplashScreenViewStateItem

}



ActivityConfigurationChangeItem --&gt; ActivityTransactionItem

ActivityLifecycleItem --&gt; ActivityTransactionItem

ActivityRelaunchItem --&gt; ActivityTransactionItem

ActivityResultItem --&gt; ActivityTransactionItem

ActivityTransactionItem --&gt; ClientTransactionItem

BaseClientRequest --&gt; ObjectPoolItem

ClientTransaction ..&gt; ObjectPoolItem

ClientTransactionItem ..&gt; BaseClientRequest

EnterPipRequestedItem --&gt; ActivityTransactionItem

MoveToDisplayItem --&gt; ActivityTransactionItem

NewIntentItem --&gt; ActivityTransactionItem

PipStateTransactionItem --&gt; ActivityTransactionItem

RefreshCallbackItem --&gt; ActivityTransactionItem

TopResumedActivityChangeItem --&gt; ActivityTransactionItem

TransferSplashScreenViewStateItem --&gt; ActivityTransactionItem</code></pre>

</details>

<h3 id="clienttransactionitem">ClientTransactionItem类图<a class="headerlink" href="#clienttransactionitem" title="Permanent link">&para;</a></h3>
<details><summary>plantuml(点击展开详情)</summary>

<div class="puml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="1026px" preserveAspectRatio="true" style="background: #ffffff" version="1.1" viewBox="0 0 3333 1026" width="3333px" zoomAndPan="magnify"><defs/><g><g id="elem_ActivityTransactionItem"><rect codeLine="5" fill="#F1F1F1" height="96.8906" id="ActivityTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="659.8828" x="694.42" y="7"/><ellipse cx="936.8018" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M939.7706,28.6406 Q939.1925,28.9375 938.5518,29.0781 Q937.9112,29.2344 937.2081,29.2344 Q934.7081,29.2344 933.38,27.5938 Q932.0675,25.9375 932.0675,22.8125 Q932.0675,19.6875 933.38,18.0313 Q934.7081,16.375 937.2081,16.375 Q937.9112,16.375 938.5518,16.5313 Q939.2081,16.6875 939.7706,16.9844 L939.7706,19.7031 Q939.1456,19.125 938.5518,18.8594 Q937.9581,18.5781 937.3331,18.5781 Q935.9893,18.5781 935.3018,19.6563 Q934.6143,20.7188 934.6143,22.8125 Q934.6143,24.9063 935.3018,25.9844 Q935.9893,27.0469 937.3331,27.0469 Q937.9581,27.0469 938.5518,26.7813 Q939.1456,26.5 939.7706,25.9219 L939.7706,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166.6191" x="957.3018" y="27.8467">ActivityTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="695.42" x2="1353.3028" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="695.42" x2="1353.3028" y1="47" y2="47"/><ellipse cx="705.42" cy="60.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="541.2559" x="714.42" y="63.9951">execute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><polygon fill="#4177AF" points="705.42,72.9453,701.42,78.9453,709.42,78.9453" style="stroke:#1963A0;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="564.293" x="714.42" y="80.292">getActivityClientRecord(ClientTransactionHandler, IBinder): ActivityClientRecord</text><ellipse cx="705.42" cy="93.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="633.8828" x="714.42" y="96.5889">execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions): void</text></g><g id="elem_BaseClientRequest"><rect codeLine="10" fill="#F1F1F1" height="105.1563" id="BaseClientRequest" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="597.7236" x="2529.76" y="199.87"/><ellipse cx="2758.3127" cy="220.0028" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2754.2346,215.7684 L2754.2346,213.6122 L2761.6252,213.6122 L2761.6252,215.7684 L2759.1565,215.7684 L2759.1565,223.8466 L2761.6252,223.8466 L2761.6252,226.0028 L2754.2346,226.0028 L2754.2346,223.8466 L2756.7034,223.8466 L2756.7034,215.7684 L2754.2346,215.7684 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.2031" x="2810.7703" y="216.0087">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="132.1182" x="2778.8127" y="231.8339">BaseClientRequest</text><line style="stroke:#181818;stroke-width:0.5;" x1="2530.76" x2="3126.4836" y1="240.1356" y2="240.1356"/><line style="stroke:#181818;stroke-width:0.5;" x1="2530.76" x2="3126.4836" y1="248.1356" y2="248.1356"/><ellipse cx="2540.76" cy="261.7841" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="2549.76" y="265.1307">preExecute(ClientTransactionHandler, IBinder): void</text><ellipse cx="2540.76" cy="278.0809" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="541.2559" x="2549.76" y="281.4276">execute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="2540.76" cy="294.3778" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="2549.76" y="297.7245">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text></g><g id="elem_ClientTransaction"><rect codeLine="15" fill="#F1F1F1" height="373.9375" id="ClientTransaction" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="403.3164" x="2626.97" y="340.48"/><ellipse cx="2763.0393" cy="356.48" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2766.0081,362.1206 Q2765.43,362.4175 2764.7893,362.5581 Q2764.1487,362.7144 2763.4456,362.7144 Q2760.9456,362.7144 2759.6175,361.0738 Q2758.305,359.4175 2758.305,356.2925 Q2758.305,353.1675 2759.6175,351.5113 Q2760.9456,349.855 2763.4456,349.855 Q2764.1487,349.855 2764.7893,350.0113 Q2765.4456,350.1675 2766.0081,350.4644 L2766.0081,353.1831 Q2765.3831,352.605 2764.7893,352.3394 Q2764.1956,352.0581 2763.5706,352.0581 Q2762.2268,352.0581 2761.5393,353.1363 Q2760.8518,354.1988 2760.8518,356.2925 Q2760.8518,358.3863 2761.5393,359.4644 Q2762.2268,360.5269 2763.5706,360.5269 Q2764.1956,360.5269 2764.7893,360.2613 Q2765.3831,359.98 2766.0081,359.4019 L2766.0081,362.1206 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.6777" x="2783.5393" y="361.3267">ClientTransaction</text><line style="stroke:#181818;stroke-width:0.5;" x1="2627.97" x2="3029.2864" y1="372.48" y2="372.48"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2634.97" y="383.1284"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.8701" x="2646.97" y="389.4751">mActivityToken: IBinder</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2634.97" y="399.4253"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194.9473" x="2646.97" y="405.772">mClient: IApplicationThread</text><ellipse cx="2637.97" cy="418.7222" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="275.0645" x="2646.97" y="422.0689">CREATOR: Creator&lt;ClientTransaction&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2634.97" y="432.0191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="344.5859" x="2646.97" y="438.3657">mActivityCallbacks: List&lt;ClientTransactionItem&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="2634.97" y="448.3159"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="324.6592" x="2646.97" y="454.6626">mLifecycleStateRequest: ActivityLifecycleItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="2627.97" x2="3029.2864" y1="461.9644" y2="461.9644"/><ellipse cx="2637.97" cy="475.6128" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="2646.97" y="478.9595">hashCode(): int</text><ellipse cx="2637.97" cy="491.9097" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="307.1934" x="2646.97" y="495.2564">preExecute(ClientTransactionHandler): void</text><ellipse cx="2637.97" cy="508.2066" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="344.9346" x="2646.97" y="511.5532">getLifecycleStateRequest(): ActivityLifecycleItem</text><ellipse cx="2637.97" cy="524.5034" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="377.3164" x="2646.97" y="527.8501">obtain(IApplicationThread, IBinder): ClientTransaction</text><ellipse cx="2637.97" cy="540.8003" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="2646.97" y="544.147">equals(Object): boolean</text><ellipse cx="2637.97" cy="557.0972" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.458" x="2646.97" y="560.4439">schedule(): void</text><ellipse cx="2637.97" cy="573.3941" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="2646.97" y="576.7407">writeToParcel(Parcel, int): void</text><ellipse cx="2637.97" cy="589.6909" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.9521" x="2646.97" y="593.0376">describeContents(): int</text><ellipse cx="2637.97" cy="605.9878" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="290.0215" x="2646.97" y="609.3345">addCallback(ClientTransactionItem): void</text><ellipse cx="2637.97" cy="622.2847" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="2646.97" y="625.6314">recycle(): void</text><ellipse cx="2637.97" cy="638.5816" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216.4805" x="2646.97" y="641.9282">dump(String, PrintWriter): void</text><ellipse cx="2637.97" cy="654.8784" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="312.2588" x="2646.97" y="658.2251">getCallbacks(): List&lt;ClientTransactionItem&gt;</text><ellipse cx="2637.97" cy="671.1753" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188.1455" x="2646.97" y="674.522">getActivityToken(): IBinder</text><ellipse cx="2637.97" cy="687.4722" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="372.9688" x="2646.97" y="690.8189">setLifecycleStateRequest(ActivityLifecycleItem): void</text><ellipse cx="2637.97" cy="703.7691" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.2227" x="2646.97" y="707.1157">getClient(): IApplicationThread</text></g><g id="elem_ClientTransactionItem"><rect codeLine="37" fill="#F1F1F1" height="96.8906" id="ClientTransactionItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="368.0361" x="2101.73" y="204"/><ellipse cx="2204.2246" cy="220" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M2207.1934,225.6406 Q2206.6153,225.9375 2205.9746,226.0781 Q2205.334,226.2344 2204.6309,226.2344 Q2202.1309,226.2344 2200.8028,224.5938 Q2199.4903,222.9375 2199.4903,219.8125 Q2199.4903,216.6875 2200.8028,215.0313 Q2202.1309,213.375 2204.6309,213.375 Q2205.334,213.375 2205.9746,213.5313 Q2206.6309,213.6875 2207.1934,213.9844 L2207.1934,216.7031 Q2206.5684,216.125 2205.9746,215.8594 Q2205.3809,215.5781 2204.7559,215.5781 Q2203.4121,215.5781 2202.7246,216.6563 Q2202.0371,217.7188 2202.0371,219.8125 Q2202.0371,221.9063 2202.7246,222.9844 Q2203.4121,224.0469 2204.7559,224.0469 Q2205.3809,224.0469 2205.9746,223.7813 Q2206.5684,223.5 2207.1934,222.9219 L2207.1934,225.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.5469" x="2224.7246" y="224.8467">ClientTransactionItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="2102.73" x2="2468.7661" y1="236" y2="236"/><line style="stroke:#181818;stroke-width:0.5;" x1="2102.73" x2="2468.7661" y1="244" y2="244"/><ellipse cx="2112.73" cy="257.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197.3125" x="2121.73" y="260.9951">getPostExecutionState(): int</text><ellipse cx="2112.73" cy="273.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.9521" x="2121.73" y="277.292">describeContents(): int</text><polygon fill="#4177AF" points="2112.73,286.2422,2108.73,292.2422,2116.73,292.2422" style="stroke:#1963A0;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="342.0361" x="2121.73" y="293.5889">shouldHaveDefinedPreExecutionState(): boolean</text></g><g id="elem_ConfigurationChangeItem"><rect codeLine="42" fill="#F1F1F1" height="227.2656" id="ConfigurationChangeItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="567.2559" x="740.74" y="138.81"/><ellipse cx="929.9109" cy="154.81" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M932.8796,160.4506 Q932.3015,160.7475 931.6609,160.8881 Q931.0203,161.0444 930.3171,161.0444 Q927.8171,161.0444 926.489,159.4037 Q925.1765,157.7475 925.1765,154.6225 Q925.1765,151.4975 926.489,149.8412 Q927.8171,148.185 930.3171,148.185 Q931.0203,148.185 931.6609,148.3412 Q932.3171,148.4975 932.8796,148.7944 L932.8796,151.5131 Q932.2546,150.935 931.6609,150.6694 Q931.0671,150.3881 930.4421,150.3881 Q929.0984,150.3881 928.4109,151.4662 Q927.7234,152.5287 927.7234,154.6225 Q927.7234,156.7162 928.4109,157.7944 Q929.0984,158.8569 930.4421,158.8569 Q931.0671,158.8569 931.6609,158.5912 Q932.2546,158.31 932.8796,157.7319 L932.8796,160.4506 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.4141" x="950.4109" y="159.6567">ConfigurationChangeItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="741.74" x2="1306.9959" y1="170.81" y2="170.81"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="748.74" y="181.4584"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212.6934" x="760.74" y="187.8051">mConfiguration: Configuration</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="748.74" y="197.7553"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9512" x="760.74" y="204.102">mDeviceId: int</text><ellipse cx="751.74" cy="217.0522" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="332.8008" x="760.74" y="220.3989">CREATOR: Creator&lt;ConfigurationChangeItem&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="741.74" x2="1306.9959" y1="227.7006" y2="227.7006"/><ellipse cx="751.74" cy="241.3491" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="760.74" y="244.6957">recycle(): void</text><ellipse cx="751.74" cy="257.6459" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="760.74" y="260.9926">writeToParcel(Parcel, int): void</text><ellipse cx="751.74" cy="273.9428" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="760.74" y="277.2895">equals(Object): boolean</text><ellipse cx="751.74" cy="290.2397" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="760.74" y="293.5864">toString(): String</text><ellipse cx="751.74" cy="306.5366" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="760.74" y="309.8832">preExecute(ClientTransactionHandler, IBinder): void</text><ellipse cx="751.74" cy="322.8334" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="541.2559" x="760.74" y="326.1801">execute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><ellipse cx="751.74" cy="339.1303" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="366.8848" x="760.74" y="342.477">obtain(Configuration, int): ConfigurationChangeItem</text><ellipse cx="751.74" cy="355.4272" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="760.74" y="358.7739">hashCode(): int</text></g><g id="elem_LaunchActivityItem"><rect codeLine="55" fill="#F1F1F1" height="618.3906" id="LaunchActivityItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="2034.7266" x="7" y="401.25"/><ellipse cx="952.5298" cy="417.25" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M955.4985,422.8906 Q954.9204,423.1875 954.2798,423.3281 Q953.6392,423.4844 952.936,423.4844 Q950.436,423.4844 949.1079,421.8438 Q947.7954,420.1875 947.7954,417.0625 Q947.7954,413.9375 949.1079,412.2813 Q950.436,410.625 952.936,410.625 Q953.6392,410.625 954.2798,410.7813 Q954.936,410.9375 955.4985,411.2344 L955.4985,413.9531 Q954.8735,413.375 954.2798,413.1094 Q953.686,412.8281 953.061,412.8281 Q951.7173,412.8281 951.0298,413.9063 Q950.3423,414.9688 950.3423,417.0625 Q950.3423,419.1563 951.0298,420.2344 Q951.7173,421.2969 953.061,421.2969 Q953.686,421.2969 954.2798,421.0313 Q954.8735,420.75 955.4985,420.1719 L955.4985,422.8906 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.167" x="973.0298" y="422.0967">LaunchActivityItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="2040.7266" y1="433.25" y2="433.25"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="443.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223.4873" x="27" y="450.2451">mOverrideConfig: Configuration</text><ellipse cx="18" cy="463.1953" fill="#FFFFFF" fill-opacity="0.00000" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="287.5537" x="27" y="466.542">CREATOR: Creator&lt;LaunchActivityItem&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="476.4922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248.7666" x="27" y="482.8389">mPendingResults: List&lt;ResultInfo&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="492.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.9512" x="27" y="499.1357">mDeviceId: int</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="509.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.6025" x="27" y="515.4326">mState: Bundle</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="525.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236.0449" x="27" y="531.7295">mActivityOptions: ActivityOptions</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="541.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147.2461" x="27" y="548.0264">mIsForward: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="557.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.1055" x="27" y="564.3232">mAssistToken: IBinder</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="574.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.3496" x="27" y="580.6201">mReferrer: String</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="590.5703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="241.5137" x="27" y="596.917">mVoiceInteractor: IVoiceInteractor</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="606.8672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187.0723" x="27" y="613.2139">mCurConfig: Configuration</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="623.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.0479" x="27" y="629.5107">mIdent: int</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="639.4609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.6875" x="27" y="645.8076">mTaskFragmentToken: IBinder</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="655.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238.5469" x="27" y="662.1045">mShareableActivityToken: IBinder</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="672.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231.7383" x="27" y="678.4014">mLaunchedFromBubble: boolean</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="688.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="351.5449" x="27" y="694.6982">mActivityClientController: IActivityClientController</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="704.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175.4785" x="27" y="710.9951">mProfilerInfo: ProfilerInfo</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="720.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.7383" x="27" y="727.292">mIntent: Intent</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="737.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.3994" x="27" y="743.5889">mInfo: ActivityInfo</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="753.5391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="255.1035" x="27" y="759.8857">mPersistentState: PersistableBundle</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="769.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="305.7305" x="27" y="776.1826">mPendingNewIntents: List&lt;ReferrerIntent&gt;</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="786.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.5752" x="27" y="792.4795">mProcState: int</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="2040.7266" y1="799.7813" y2="799.7813"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="810.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="2008.7266" x="27" y="816.7764">setValues(LaunchActivityItem, Intent, int, ActivityInfo, Configuration, Configuration, int, String, IVoiceInteractor, int, Bundle, PersistableBundle, List&lt;ResultInfo&gt;, List&lt;ReferrerIntent&gt;, ActivityOptions, boolean, ProfilerInfo, IBinder, IActivityClientController, IBinder, boolean, IBinder): void</text><ellipse cx="18" cy="829.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.7949" x="27" y="833.0732">equals(Object): boolean</text><ellipse cx="18" cy="846.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="541.2559" x="27" y="849.3701">execute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="859.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="425.7832" x="27" y="865.667">areBundlesEqualRoughly(BaseBundle, BaseBundle): boolean</text><ellipse cx="18" cy="878.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8027" x="27" y="881.9639">hashCode(): int</text><ellipse cx="18" cy="894.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="1946.2598" x="27" y="898.2607">obtain(Intent, int, ActivityInfo, Configuration, Configuration, int, String, IVoiceInteractor, int, Bundle, PersistableBundle, List&lt;ResultInfo&gt;, List&lt;ReferrerIntent&gt;, ActivityOptions, boolean, ProfilerInfo, IBinder, IActivityClientController, IBinder, boolean, IBinder): LaunchActivityItem</text><ellipse cx="18" cy="911.2109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215.1406" x="27" y="914.5576">writeToParcel(Parcel, int): void</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="924.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="272.3369" x="27" y="930.8545">activityInfoEqual(ActivityInfo): boolean</text><ellipse cx="18" cy="943.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="27" y="947.1514">recycle(): void</text><ellipse cx="18" cy="960.1016" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.708" x="27" y="963.4482">toString(): String</text><ellipse cx="18" cy="976.3984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365.8457" x="27" y="979.7451">preExecute(ClientTransactionHandler, IBinder): void</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="15" y="989.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="308.9434" x="27" y="996.042">getRoughBundleHashCode(BaseBundle): int</text><ellipse cx="18" cy="1008.9922" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="571.7236" x="27" y="1012.3389">postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions): void</text></g><g id="elem_ObjectPoolItem"><rect codeLine="92" fill="#F1F1F1" height="72.5625" id="ObjectPoolItem" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="138.9277" x="3187.49" y="354.16"/><ellipse cx="3202.49" cy="374.2928" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M3198.4119,370.0584 L3198.4119,367.9022 L3205.8025,367.9022 L3205.8025,370.0584 L3203.3338,370.0584 L3203.3338,378.1366 L3205.8025,378.1366 L3205.8025,380.2928 L3198.4119,380.2928 L3198.4119,378.1366 L3200.8806,378.1366 L3200.8806,370.0584 L3198.4119,370.0584 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.2031" x="3235.8523" y="370.2987">«interface»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="106.9277" x="3216.49" y="386.1239">ObjectPoolItem</text><line style="stroke:#181818;stroke-width:0.5;" x1="3188.49" x2="3325.4177" y1="394.4256" y2="394.4256"/><line style="stroke:#181818;stroke-width:0.5;" x1="3188.49" x2="3325.4177" y1="402.4256" y2="402.4256"/><ellipse cx="3198.49" cy="416.0741" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2695" x="3207.49" y="419.4207">recycle(): void</text></g><g id="link_ActivityTransactionItem_ClientTransactionItem"><path codeLine="96" d="M1331.41,104.39 C1331.41,157.95 1331.41,236.3 1331.41,236.3 C1331.41,236.3 1806.09,236.3 2083.46,236.3 " fill="#FFFFFF" fill-opacity="0.00000" id="ActivityTransactionItem-to-ClientTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2101.46,236.3,2083.46,230.3,2083.46,242.3,2101.46,236.3" style="stroke:#000082;stroke-width:1;"/></g><g id="link_BaseClientRequest_ObjectPoolItem"><path codeLine="97" d="M3079.41,305.48 C3079.41,339.88 3079.41,378.35 3079.41,378.35 C3079.41,378.35 3119.36,378.35 3169.04,378.35 " fill="#FFFFFF" fill-opacity="0.00000" id="BaseClientRequest-to-ObjectPoolItem" style="stroke:#008200;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="3187.04,378.35,3169.04,372.35,3169.04,384.35,3187.04,378.35" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ClientTransaction_ObjectPoolItem"><path codeLine="98" d="M3030.56,402.54 C3086.92,402.54 3126.42,402.54 3169.37,402.54 " fill="#FFFFFF" fill-opacity="0.00000" id="ClientTransaction-to-ObjectPoolItem" style="stroke:#008200;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="3187.37,402.54,3169.37,396.54,3169.37,408.54,3187.37,402.54" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ClientTransactionItem_BaseClientRequest"><path codeLine="99" d="M2469.92,252.44 C2489.29,252.44 2491.33,252.44 2511.57,252.44 " fill="#FFFFFF" fill-opacity="0.00000" id="ClientTransactionItem-to-BaseClientRequest" style="stroke:#008200;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2529.57,252.44,2511.57,246.44,2511.57,258.44,2529.57,252.44" style="stroke:#008200;stroke-width:1;"/></g><g id="link_ConfigurationChangeItem_ClientTransactionItem"><path codeLine="100" d="M1308.23,268.59 C1550.88,268.59 1874.93,268.59 2083.43,268.59 " fill="#FFFFFF" fill-opacity="0.00000" id="ConfigurationChangeItem-to-ClientTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2101.43,268.59,2083.43,262.59,2083.43,274.59,2101.43,268.59" style="stroke:#000082;stroke-width:1;"/></g><g id="link_LaunchActivityItem_ClientTransactionItem"><path codeLine="101" d="M2041.96,557.83 C2186.06,557.83 2286.41,557.83 2286.41,557.83 C2286.41,557.83 2286.41,405.39 2286.41,319.17 " fill="#FFFFFF" fill-opacity="0.00000" id="LaunchActivityItem-to-ClientTransactionItem" style="stroke:#000082;stroke-width:1;"/><polygon fill="#FFFFFF" fill-opacity="0.00000" points="2286.41,301.17,2280.41,319.17,2292.41,319.17,2286.41,301.17" style="stroke:#000082;stroke-width:1;"/></g></g></svg></div>
</details>

<details open><summary>mermaid</summary>

<pre class="mermaid"><code>classDiagram

direction LR

class ActivityTransactionItem {

+ execute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

~ getActivityClientRecord(ClientTransactionHandler, IBinder) ActivityClientRecord

+ execute(ClientTransactionHandler, ActivityClientRecord, PendingTransactionActions) void

}

class BaseClientRequest {

&lt;&lt;Interface&gt;&gt;

+ preExecute(ClientTransactionHandler, IBinder) void

+ execute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

}

class ClientTransaction {

- IBinder mActivityToken

- IApplicationThread mClient

+ Creator~ClientTransaction~ CREATOR

- List~ClientTransactionItem~ mActivityCallbacks

- ActivityLifecycleItem mLifecycleStateRequest

+ hashCode() int

+ preExecute(ClientTransactionHandler) void

+ getLifecycleStateRequest() ActivityLifecycleItem

+ obtain(IApplicationThread, IBinder) ClientTransaction

+ equals(Object) boolean

+ schedule() void

+ writeToParcel(Parcel, int) void

+ describeContents() int

+ addCallback(ClientTransactionItem) void

+ recycle() void

+ dump(String, PrintWriter) void

+ getCallbacks() List~ClientTransactionItem~

+ getActivityToken() IBinder

+ setLifecycleStateRequest(ActivityLifecycleItem) void

+ getClient() IApplicationThread

}

class ClientTransactionItem {

+ getPostExecutionState() int

+ describeContents() int

~ shouldHaveDefinedPreExecutionState() boolean

}

class ConfigurationChangeItem {

- Configuration mConfiguration

- int mDeviceId

+ Creator~ConfigurationChangeItem~ CREATOR

+ recycle() void

+ writeToParcel(Parcel, int) void

+ equals(Object) boolean

+ toString() String

+ preExecute(ClientTransactionHandler, IBinder) void

+ execute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

+ obtain(Configuration, int) ConfigurationChangeItem

+ hashCode() int

}

class LaunchActivityItem {

- Configuration mOverrideConfig

+ Creator~LaunchActivityItem~ CREATOR

- List~ResultInfo~ mPendingResults

- int mDeviceId

- Bundle mState

- ActivityOptions mActivityOptions

- boolean mIsForward

- IBinder mAssistToken

- String mReferrer

- IVoiceInteractor mVoiceInteractor

- Configuration mCurConfig

- int mIdent

- IBinder mTaskFragmentToken

- IBinder mShareableActivityToken

- boolean mLaunchedFromBubble

- IActivityClientController mActivityClientController

- ProfilerInfo mProfilerInfo

- Intent mIntent

- ActivityInfo mInfo

- PersistableBundle mPersistentState

- List~ReferrerIntent~ mPendingNewIntents

- int mProcState

- setValues(LaunchActivityItem, Intent, int, ActivityInfo, Configuration, Configuration, int, String, IVoiceInteractor, int, Bundle, PersistableBundle, List~ResultInfo~, List~ReferrerIntent~, ActivityOptions, boolean, ProfilerInfo, IBinder, IActivityClientController, IBinder, boolean, IBinder) void

+ equals(Object) boolean

+ execute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

- areBundlesEqualRoughly(BaseBundle, BaseBundle) boolean

+ hashCode() int

+ obtain(Intent, int, ActivityInfo, Configuration, Configuration, int, String, IVoiceInteractor, int, Bundle, PersistableBundle, List~ResultInfo~, List~ReferrerIntent~, ActivityOptions, boolean, ProfilerInfo, IBinder, IActivityClientController, IBinder, boolean, IBinder) LaunchActivityItem

+ writeToParcel(Parcel, int) void

- activityInfoEqual(ActivityInfo) boolean

+ recycle() void

+ toString() String

+ preExecute(ClientTransactionHandler, IBinder) void

- getRoughBundleHashCode(BaseBundle) int

+ postExecute(ClientTransactionHandler, IBinder, PendingTransactionActions) void

}

class ObjectPoolItem {

&lt;&lt;Interface&gt;&gt;

+ recycle() void

}



ActivityTransactionItem --&gt; ClientTransactionItem

BaseClientRequest --&gt; ObjectPoolItem

ClientTransaction ..&gt; ObjectPoolItem

ClientTransactionItem ..&gt; BaseClientRequest

ConfigurationChangeItem --&gt; ClientTransactionItem

LaunchActivityItem --&gt; ClientTransactionItem</code></pre>
</details>

<h2 id="_3">小结<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<h3 id="activitylifecycleitem_1">ActivityLifecycleItem<a class="headerlink" href="#activitylifecycleitem_1" title="Permanent link">&para;</a></h3>
<p>ActivityLifecycleItem 是一个抽象类，表示一个生命周期事件。它的子类用于具体的生命周期事件，例如 ResumeActivityItem、PauseActivityItem、StopActivityItem 等。</p>
<p>这个类的实例在 ClientTransaction 中被使用，用于描述某个 Activity 生命周期的变化。</p>
<h3 id="activitytransactionitem_1">ActivityTransactionItem<a class="headerlink" href="#activitytransactionitem_1" title="Permanent link">&para;</a></h3>
<p><strong>ActivityTransactionItem</strong> 是一个抽象类，表示一个 Activity 事务项。这类事务项可以涉及到 Activity 的启动、停止、重建、配置变化等操作。它是 ClientTransactionItem 的子类。</p>
<h3 id="clienttransactionitem_1">ClientTransactionItem<a class="headerlink" href="#clienttransactionitem_1" title="Permanent link">&para;</a></h3>
<p>ClientTransactionItem 是一个抽象类，表示可以在客户端（应用进程）处理的事务项。它是 ClientTransaction 中的一个基本构件，具体的子类包括 ActivityLifecycleItem 和 ActivityTransactionItem。这个类定义了一些基本的方法来执行和处理事务。</p>
<h3 id="clienttransaction">ClientTransaction<a class="headerlink" href="#clienttransaction" title="Permanent link">&para;</a></h3>
<p>ClientTransaction 是一个用于描述客户端（应用进程）事务的类。它包含了一系列 ClientTransactionItem，这些 ClientTransactionItem 描述了应用需要执行的一系列操作或生命周期变化。 </p>
<p>ClientTransaction 类通过 Binder 传输到应用进程中的 ClientTransactionHandler 进行处理。</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cm">/**</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="cm"> * 一个包含一系列消息的容器，这些消息可能会发送到客户端。</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="cm"> * 包括一个回调列表和一个最终的生命周期状态。</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="cm"> *</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="cm"> * @see com.android.server.am.ClientLifecycleManager</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="cm"> * @see ClientTransactionItem</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="cm"> * @see ActivityLifecycleItem</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="cm"> * @hide</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="cm"> */</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientTransaction</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Parcelable</span><span class="p">,</span><span class="w"> </span><span class="n">ObjectPoolItem</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span><span class="cm">/** 发送到客户端的单个回调列表。 */</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="nd">@UnsupportedAppUsage</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ClientTransactionItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mActivityCallbacks</span><span class="p">;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="cm">     * 事务执行后客户端活动应处于的最终生命周期状态。</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="cm">     */</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ActivityLifecycleItem</span><span class="w"> </span><span class="n">mLifecycleStateRequest</span><span class="p">;</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="cm">/** 目标客户端。 */</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">IApplicationThread</span><span class="w"> </span><span class="n">mClient</span><span class="p">;</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">    </span><span class="cm">/** 目标客户端活动。如果整个事务目标是应用程序，可能为空。 */</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="n">mActivityToken</span><span class="p">;</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">    </span><span class="cm">/** </span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="cm">     * 获取事务的目标客户端。 </span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="cm">     * @return 目标客户端。</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="cm">     */</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">IApplicationThread</span><span class="w"> </span><span class="nf">getClient</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mClient</span><span class="p">;</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="cm">     * 将消息添加到回调序列的末尾。</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="cm">     * @param activityCallback 可以包含生命周期请求/回调的单个消息。</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="cm">     */</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addCallback</span><span class="p">(</span><span class="n">ClientTransactionItem</span><span class="w"> </span><span class="n">activityCallback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mActivityCallbacks</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="w">            </span><span class="n">mActivityCallbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="w">        </span><span class="n">mActivityCallbacks</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">activityCallback</span><span class="p">);</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a><span class="w">    </span><span class="cm">/** </span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="cm">     * 获取回调列表。 </span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="cm">     * @return 回调列表。</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a><span class="cm">     */</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="w">    </span><span class="nd">@Nullable</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a><span class="w">    </span><span class="nd">@VisibleForTesting</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="w">    </span><span class="nd">@UnsupportedAppUsage</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ClientTransactionItem</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getCallbacks</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mActivityCallbacks</span><span class="p">;</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a><span class="w">    </span><span class="cm">/** </span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a><span class="cm">     * 获取目标活动。 </span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a><span class="cm">     * @return 目标活动标识符。</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a><span class="cm">     */</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a><span class="w">    </span><span class="nd">@Nullable</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a><span class="w">    </span><span class="nd">@UnsupportedAppUsage</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="nf">getActivityToken</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mActivityToken</span><span class="p">;</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a><span class="w">    </span><span class="cm">/** </span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a><span class="cm">     * 获取目标状态的生命周期请求。 </span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a><span class="cm">     * @return 生命周期状态请求。</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a><span class="cm">     */</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a><span class="w">    </span><span class="nd">@VisibleForTesting</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a><span class="w">    </span><span class="nd">@UnsupportedAppUsage</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ActivityLifecycleItem</span><span class="w"> </span><span class="nf">getLifecycleStateRequest</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mLifecycleStateRequest</span><span class="p">;</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a><span class="cm">     * 设置事务执行后客户端应处于的生命周期状态。</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a><span class="cm">     * @param stateRequest 用正确参数初始化的生命周期请求。</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a><span class="cm">     */</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setLifecycleStateRequest</span><span class="p">(</span><span class="n">ActivityLifecycleItem</span><span class="w"> </span><span class="n">stateRequest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a><span class="w">        </span><span class="n">mLifecycleStateRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stateRequest</span><span class="p">;</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a><span class="cm">     * 在事务调度到客户端时需要执行的操作。</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a><span class="cm">     * @param clientTransactionHandler 在客户端执行事务项请求的处理程序。</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a><span class="cm">     */</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">preExecute</span><span class="p">(</span><span class="n">ClientTransactionHandler</span><span class="w"> </span><span class="n">clientTransactionHandler</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mActivityCallbacks</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a><span class="w">            </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mActivityCallbacks</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a><span class="w">                </span><span class="n">mActivityCallbacks</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="na">preExecute</span><span class="p">(</span><span class="n">clientTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">mActivityToken</span><span class="p">);</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mLifecycleStateRequest</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a><span class="w">            </span><span class="n">mLifecycleStateRequest</span><span class="p">.</span><span class="na">preExecute</span><span class="p">(</span><span class="n">clientTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">mActivityToken</span><span class="p">);</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a><span class="cm">     * 在初始化后调度事务。它将发送到客户端，所有的个别部分将按以下顺序应用：</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a><span class="cm">     * 1. 客户端调用 {@link #preExecute(ClientTransactionHandler)}，触发在调度事务之前需要完成的所有工作。</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a><span class="cm">     * 2. 调度事务消息。</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a><span class="cm">     * 3. 客户端调用 {@link TransactionExecutor#execute(ClientTransaction)}，执行所有回调和必要的生命周期转换。</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a><span class="cm">     * @throws RemoteException 如果事务无法调度。</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a><span class="cm">     */</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">schedule</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">RemoteException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a><span class="w">        </span><span class="n">mClient</span><span class="p">.</span><span class="na">scheduleTransaction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">ClientTransaction</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ClientTransaction</span><span class="w"> </span><span class="nf">obtain</span><span class="p">(</span><span class="n">IApplicationThread</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="n">activityToken</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a><span class="w">        </span><span class="c1">// 从对象池中获取一个 ClientTransaction 实例</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116" href="#__codelineno-0-116"></a><span class="w">        </span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ObjectPool</span><span class="p">.</span><span class="na">obtain</span><span class="p">(</span><span class="n">ClientTransaction</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117" href="#__codelineno-0-117"></a>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118" href="#__codelineno-0-118"></a><span class="w">        </span><span class="c1">// 如果对象池中没有可用的实例，则创建一个新的实例</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119" href="#__codelineno-0-119"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">instance</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120" href="#__codelineno-0-120"></a><span class="w">            </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClientTransaction</span><span class="p">();</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121" href="#__codelineno-0-121"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122" href="#__codelineno-0-122"></a>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123" href="#__codelineno-0-123"></a><span class="w">        </span><span class="c1">// 初始化实例的属性</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124" href="#__codelineno-0-124"></a><span class="w">        </span><span class="n">instance</span><span class="p">.</span><span class="na">mClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125" href="#__codelineno-0-125"></a><span class="w">        </span><span class="n">instance</span><span class="p">.</span><span class="na">mActivityToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">activityToken</span><span class="p">;</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126" href="#__codelineno-0-126"></a>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127" href="#__codelineno-0-127"></a><span class="w">        </span><span class="c1">// 返回初始化后的实例</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128" href="#__codelineno-0-128"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129" href="#__codelineno-0-129"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130" href="#__codelineno-0-130"></a>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131" href="#__codelineno-0-131"></a><span class="p">}</span>
</span></code></pre></div>
<p>这里稍微解释了 ClientTransaction 类的代码，通过 IApplicationThread 主要是把事务项列表发送到客户端。
看到这里可能会觉得云里雾里，我们直接找一个案例来分析。</p>
<h2 id="_4">代码案例<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>了解 Activity 启动的同学都知道，不管是热启动还是冷启动，最终都是通过 ActivityTaskSupervisor.realStartActivityLocked() 来启动 activity的。</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ActivityTaskSupervisor</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">RecentTasks</span><span class="p">.</span><span class="na">Callbacks</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">realStartActivityLocked</span><span class="p">(</span><span class="n">ActivityRecord</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">WindowProcessController</span><span class="w"> </span><span class="n">proc</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">            </span><span class="kt">boolean</span><span class="w"> </span><span class="n">andResume</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">checkConfig</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">RemoteException</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">        </span><span class="p">...</span><span class="w">  </span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">        </span><span class="c1">// Create activity launch transaction.  </span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">clientTransaction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ClientTransaction</span><span class="p">.</span><span class="na">obtain</span><span class="p">(</span><span class="w">  </span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">                </span><span class="n">proc</span><span class="p">.</span><span class="na">getThread</span><span class="p">(),</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">token</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">isTransitionForward</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">isTransitionForward</span><span class="p">();</span><span class="w">  </span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="n">fragmentToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">getTaskFragment</span><span class="p">().</span><span class="na">getFragmentToken</span><span class="p">();</span><span class="w">  </span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">deviceId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getDeviceIdForDisplayId</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="na">getDisplayId</span><span class="p">());</span><span class="w">  </span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">        </span><span class="n">clientTransaction</span><span class="p">.</span><span class="na">addCallback</span><span class="p">(</span><span class="n">LaunchActivityItem</span><span class="p">.</span><span class="na">obtain</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Intent</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="na">intent</span><span class="p">),</span><span class="w">  </span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">identityHashCode</span><span class="p">(</span><span class="n">r</span><span class="p">),</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">info</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">                </span><span class="c1">// TODO: Have this take the merged configuration instead of separate global  </span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">                </span><span class="c1">// and override configs.  </span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">                </span><span class="n">mergedConfiguration</span><span class="p">.</span><span class="na">getGlobalConfiguration</span><span class="p">(),</span><span class="w">  </span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">                </span><span class="n">mergedConfiguration</span><span class="p">.</span><span class="na">getOverrideConfiguration</span><span class="p">(),</span><span class="w"> </span><span class="n">deviceId</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">                </span><span class="n">r</span><span class="p">.</span><span class="na">getFilteredReferrer</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="na">launchedFromPackage</span><span class="p">),</span><span class="w"> </span><span class="n">task</span><span class="p">.</span><span class="na">voiceInteractor</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">                </span><span class="n">proc</span><span class="p">.</span><span class="na">getReportedProcState</span><span class="p">(),</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">getSavedState</span><span class="p">(),</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">getPersistentSavedState</span><span class="p">(),</span><span class="w">  </span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">                </span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">newIntents</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">takeOptions</span><span class="p">(),</span><span class="w"> </span><span class="n">isTransitionForward</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">                </span><span class="n">proc</span><span class="p">.</span><span class="na">createProfilerInfoIfNeeded</span><span class="p">(),</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">assistToken</span><span class="p">,</span><span class="w"> </span><span class="n">activityClientController</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">                </span><span class="n">r</span><span class="p">.</span><span class="na">shareableActivityToken</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">getLaunchedFromBubble</span><span class="p">(),</span><span class="w"> </span><span class="n">fragmentToken</span><span class="p">));</span><span class="w">  </span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">        </span><span class="c1">// Set desired final state.  </span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">ActivityLifecycleItem</span><span class="w"> </span><span class="n">lifecycleItem</span><span class="p">;</span><span class="w">  </span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">andResume</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">            </span><span class="n">lifecycleItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ResumeActivityItem</span><span class="p">.</span><span class="na">obtain</span><span class="p">(</span><span class="n">isTransitionForward</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">                    </span><span class="n">r</span><span class="p">.</span><span class="na">shouldSendCompatFakeFocus</span><span class="p">());</span><span class="w">  </span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">            </span><span class="n">lifecycleItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PauseActivityItem</span><span class="p">.</span><span class="na">obtain</span><span class="p">();</span><span class="w">  </span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">        </span><span class="p">}</span><span class="w">  </span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">        </span><span class="n">clientTransaction</span><span class="p">.</span><span class="na">setLifecycleStateRequest</span><span class="p">(</span><span class="n">lifecycleItem</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="w">        </span><span class="c1">// Schedule transaction.  </span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="w">        </span><span class="n">mService</span><span class="p">.</span><span class="na">getLifecycleManager</span><span class="p">().</span><span class="na">scheduleTransaction</span><span class="p">(</span><span class="n">clientTransaction</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="w">        </span><span class="p">...</span><span class="w">  </span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="w">    </span><span class="p">}</span><span class="w">  </span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li>mService</li>
</ul>
<p>是 ActivityTaskManagerService，而 ActivityTaskManagerService 的 getLifecycleManager() 函数返回的是 mLifecycleManager；也就是 ClientLifecycleManager</p>
<ul>
<li>proc.getThread()</li>
</ul>
<p>这个是 ActivityThread.attach() 调用 ActivityManagerService.attachApplication() 一路传到 ProcessRecord 的成员变量 mThread 里。
所以这里拿到的其实就是客户端的 ApplicationThread 也就是 IApplicationThread.Stub。</p>
<ul>
<li>
<p>LaunchActivityItem</p>
</li>
<li>
<p>ResumeActivityItem</p>
</li>
</ul>
<h3 id="clienttransactionobtain">ClientTransaction.obtain()<a class="headerlink" href="#clienttransactionobtain" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="cm">/**</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="cm"> * 一个包含一系列消息的容器，这些消息可能会发送到客户端。</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="cm"> * 包括一个回调列表和一个最终的生命周期状态。</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="cm"> *</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="cm"> * @see com.android.server.am.ClientLifecycleManager</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="cm"> * @see ClientTransactionItem</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="cm"> * @see ActivityLifecycleItem</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="cm"> * @hide</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="cm"> */</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientTransaction</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Parcelable</span><span class="p">,</span><span class="w"> </span><span class="n">ObjectPoolItem</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="cm">/** 目标客户端。 */</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">IApplicationThread</span><span class="w"> </span><span class="n">mClient</span><span class="p">;</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="cm">/** 目标客户端活动。如果整个事务目标是应用程序，可能为空。 */</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="n">mActivityToken</span><span class="p">;</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">ClientTransaction</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ClientTransaction</span><span class="w"> </span><span class="nf">obtain</span><span class="p">(</span><span class="n">IApplicationThread</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="n">activityToken</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">        </span><span class="c1">// 从对象池中获取一个 ClientTransaction 实例</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">        </span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ObjectPool</span><span class="p">.</span><span class="na">obtain</span><span class="p">(</span><span class="n">ClientTransaction</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">        </span><span class="c1">// 如果对象池中没有可用的实例，则创建一个新的实例</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">instance</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">            </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClientTransaction</span><span class="p">();</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">        </span><span class="c1">// 初始化实例的属性</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">        </span><span class="n">instance</span><span class="p">.</span><span class="na">mClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">        </span><span class="n">instance</span><span class="p">.</span><span class="na">mActivityToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">activityToken</span><span class="p">;</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="w">        </span><span class="c1">// 返回初始化后的实例</span>
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a>
</span><span id="__span-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="p">}</span>
</span></code></pre></div>
<p>这里的 mClient 就是客户端的 ApplicationThread 也就是 IApplicationThread.Stub。 </p>
<p>mActivityToken 就是传进来的 r.token ，r 是 ActivityRecord，所以是 WindowToken 里的成员变量 token。</p>
<blockquote>
<p>这个 r.token 我们后面会详细解释。</p>
</blockquote>
<h3 id="clienttransactionaddcallback">ClientTransaction.addCallback()<a class="headerlink" href="#clienttransactionaddcallback" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientTransaction</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Parcelable</span><span class="p">,</span><span class="w"> </span><span class="n">ObjectPoolItem</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="cm">/** 发送到客户端的单个回调列表。 */</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="nd">@UnsupportedAppUsage</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ClientTransactionItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mActivityCallbacks</span><span class="p">;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="cm">     * 将消息添加到回调序列的末尾。</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="cm">     * @param activityCallback 可以包含生命周期请求/回调的单个消息。</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="cm">     */</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addCallback</span><span class="p">(</span><span class="n">ClientTransactionItem</span><span class="w"> </span><span class="n">activityCallback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mActivityCallbacks</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">            </span><span class="n">mActivityCallbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">        </span><span class="n">mActivityCallbacks</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">activityCallback</span><span class="p">);</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="clienttransactionsetlifecyclestaterequest">ClientTransaction.setLifecycleStateRequest()<a class="headerlink" href="#clienttransactionsetlifecyclestaterequest" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientTransaction</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Parcelable</span><span class="p">,</span><span class="w"> </span><span class="n">ObjectPoolItem</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="cm">     * 事务执行后客户端活动应处于的最终生命周期状态。</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="cm">     */</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ActivityLifecycleItem</span><span class="w"> </span><span class="n">mLifecycleStateRequest</span><span class="p">;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="cm">     * 设置事务执行后客户端应处于的生命周期状态。</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="cm">     * @param stateRequest 用正确参数初始化的生命周期请求。</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="cm">     */</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setLifecycleStateRequest</span><span class="p">(</span><span class="n">ActivityLifecycleItem</span><span class="w"> </span><span class="n">stateRequest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">        </span><span class="n">mLifecycleStateRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stateRequest</span><span class="p">;</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="clientlifecyclemanagerscheduletransaction">ClientLifecycleManager.scheduleTransaction()<a class="headerlink" href="#clientlifecyclemanagerscheduletransaction" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cm">/**</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="cm"> * 能够合并多个客户端生命周期过渡请求和/或回调，并将它们作为单个事务执行的类。</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="cm"> *</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="cm"> * @see ClientTransaction</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="cm"> */</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="kd">class</span> <span class="nc">ClientLifecycleManager</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="c1">// TODO(lifecycler): 实现构建事务或全局事务。</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="c1">// TODO(lifecycler): 使用对象池来管理事务和事务项。</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="cm">     * 调度一个事务，该事务可能包含多个回调和一个生命周期请求。</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="cm">     * @param transaction 一系列客户端事务项。</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="cm">     * @throws RemoteException</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="cm">     *</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="cm">     * @see ClientTransaction</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="cm">     */</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">scheduleTransaction</span><span class="p">(</span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">RemoteException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">        </span><span class="c1">// 获取目标客户端</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">IApplicationThread</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transaction</span><span class="p">.</span><span class="na">getClient</span><span class="p">();</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">        </span><span class="c1">// 调度事务</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">        </span><span class="n">transaction</span><span class="p">.</span><span class="na">schedule</span><span class="p">();</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">        </span><span class="c1">// 如果客户端不是 Binder 的实例，则表示这是一个远程调用</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">        </span><span class="c1">// 在此时可以安全地回收对象。所有用于本地调用的对象将在事务在</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">        </span><span class="c1">// ActivityThread 上的客户端执行后回收。</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">client</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">Binder</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w">            </span><span class="n">transaction</span><span class="p">.</span><span class="na">recycle</span><span class="p">();</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="p">}</span>
</span></code></pre></div>
<p>ClientLifecycleManager 类用于处理客户端生命周期的多个过渡请求和/或回调，并将它们作为一个单独的事务执行。</p>
<p>通过 transaction.getClient() 就获取到客户端的 ApplicationThread 也就是 IApplicationThread.Stub。 </p>
<h3 id="clienttransactionschedule">ClientTransaction.schedule()<a class="headerlink" href="#clienttransactionschedule" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientTransaction</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Parcelable</span><span class="p">,</span><span class="w"> </span><span class="n">ObjectPoolItem</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="cm">/**  </span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="cm">     * 在事务初始化后调度事务。它将被发送到客户端，所有的部分将按以下顺序应用：  </span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="cm">     * 1. 客户端调用 {@link #preExecute(ClientTransactionHandler)}，这将触发在实际调度事务之前需要完成的所有工作。  </span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="cm">     * 2. 事务消息被调度。  </span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="cm">     * 3. 客户端调用 {@link TransactionExecutor#execute(ClientTransaction)}，执行所有回调和必要的生命周期转换。 </span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="cm">     */</span><span class="w">  </span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">schedule</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">RemoteException</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">        </span><span class="n">mClient</span><span class="p">.</span><span class="na">scheduleTransaction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="p">}</span><span class="w">  </span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="p">}</span>
</span></code></pre></div>
<p>这里的 mClient 就是 ApplicationThread。</p>
<blockquote>
<p>这里还是 system_server 进程</p>
</blockquote>
<h3 id="applicationthreadscheduletransaction">ApplicationThread.scheduleTransaction()<a class="headerlink" href="#applicationthreadscheduletransaction" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ActivityThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientTransactionHandler</span><span class="w">  </span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">        </span><span class="kd">implements</span><span class="w"> </span><span class="n">ActivityThreadInternal</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ApplicationThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">IApplicationThread</span><span class="p">.</span><span class="na">Stub</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">        </span><span class="nd">@Override</span><span class="w">  </span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">scheduleTransaction</span><span class="p">(</span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">RemoteException</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">            </span><span class="n">ActivityThread</span><span class="p">.</span><span class="na">this</span><span class="p">.</span><span class="na">scheduleTransaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">        </span><span class="p">}</span><span class="w">  </span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="p">}</span><span class="w">  </span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="p">}</span>
</span></code></pre></div>
<p>需要注意的是，这里走到了 APP 进程。</p>
<h3 id="clienttransactionhandlerscheduletransaction">ClientTransactionHandler.scheduleTransaction()<a class="headerlink" href="#clienttransactionhandlerscheduletransaction" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientTransactionHandler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="cm">/** Prepare and schedule transaction for execution. */</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">scheduleTransaction</span><span class="p">(</span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">        </span><span class="n">transaction</span><span class="p">.</span><span class="na">preExecute</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">        </span><span class="n">sendMessage</span><span class="p">(</span><span class="n">ActivityThread</span><span class="p">.</span><span class="na">H</span><span class="p">.</span><span class="na">EXECUTE_TRANSACTION</span><span class="p">,</span><span class="w"> </span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="p">}</span>
</span></code></pre></div>
<p>这里主线任务是跟 handler 发送一条 EXECUTE_TRANSACTION 信息。
在这之前要先执行 <strong>item</strong> 的 preExecute() 函数。</p>
<h4 id="clienttransactionpreexecute">ClientTransaction.preExecute()<a class="headerlink" href="#clienttransactionpreexecute" title="Permanent link">&para;</a></h4>
<div class="language-java highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientTransaction</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Parcelable</span><span class="p">,</span><span class="w"> </span><span class="n">ObjectPoolItem</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="cm">     * 在事务调度到客户端时需要执行的操作。</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="cm">     * @param clientTransactionHandler 在客户端执行事务项请求的处理程序。</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="cm">     */</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">preExecute</span><span class="p">(</span><span class="n">ClientTransactionHandler</span><span class="w"> </span><span class="n">clientTransactionHandler</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mActivityCallbacks</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">            </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mActivityCallbacks</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">                </span><span class="n">mActivityCallbacks</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="na">preExecute</span><span class="p">(</span><span class="n">clientTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">mActivityToken</span><span class="p">);</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mLifecycleStateRequest</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">            </span><span class="n">mLifecycleStateRequest</span><span class="p">.</span><span class="na">preExecute</span><span class="p">(</span><span class="n">clientTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">mActivityToken</span><span class="p">);</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="p">}</span>
</span></code></pre></div>
<p>在我们这里案例中，mActivityCallbacks 是 LaunchActivityItem ；mLifecycleStateRequest 是 ResumeActivityItem。</p>
<p>所以这里是先后调到了 LaunchActivityItem.preExecute() 和 ResumeActivityItem.preExecute()。</p>
<p>这里只是支线任务，我们不深入分析。</p>
<h3 id="handlemessageexecute_transaction">handleMessage(EXECUTE_TRANSACTION)<a class="headerlink" href="#handlemessageexecute_transaction" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ActivityThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientTransactionHandler</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">        </span><span class="kd">implements</span><span class="w"> </span><span class="n">ActivityThreadInternal</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">TransactionExecutor</span><span class="w"> </span><span class="n">mTransactionExecutor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TransactionExecutor</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="kd">class</span> <span class="nc">H</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Handler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">EXECUTE_TRANSACTION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">159</span><span class="p">;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">handleMessage</span><span class="p">(</span><span class="n">Message</span><span class="w"> </span><span class="n">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">msg</span><span class="p">.</span><span class="na">what</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">EXECUTE_TRANSACTION</span><span class="p">:</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">                    </span><span class="kd">final</span><span class="w"> </span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ClientTransaction</span><span class="p">)</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="na">obj</span><span class="p">;</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">                    </span><span class="n">mTransactionExecutor</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isSystem</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">                        </span><span class="c1">// Client transactions inside system process are recycled on the client side</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">                        </span><span class="c1">// instead of ClientLifecycleManager to avoid being cleared before this</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">                        </span><span class="c1">// message is handled.</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">                        </span><span class="n">transaction</span><span class="p">.</span><span class="na">recycle</span><span class="p">();</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">                    </span><span class="c1">// TODO(lifecycler): Recycle locally scheduled transactions.</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="p">}</span>
</span></code></pre></div>
<p>这里的 mTransactionExecutor 就是 TransactionExecutor。</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ActivityThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientTransactionHandler</span><span class="w">  </span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">        </span><span class="kd">implements</span><span class="w"> </span><span class="n">ActivityThreadInternal</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">TransactionExecutor</span><span class="w"> </span><span class="n">mTransactionExecutor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TransactionExecutor</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="p">}</span>
</span></code></pre></div>
<p>ActivityThread 继承抽象类 ClientTransactionHandler，我们再接着看 TransactionExecutor 构造函数。</p>
<h4 id="transactionexecutor">TransactionExecutor构造函数<a class="headerlink" href="#transactionexecutor" title="Permanent link">&para;</a></h4>
<div class="language-java highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionExecutor</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ClientTransactionHandler</span><span class="w"> </span><span class="n">mTransactionHandler</span><span class="p">;</span><span class="w">  </span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">TransactionExecutor</span><span class="p">(</span><span class="n">ClientTransactionHandler</span><span class="w"> </span><span class="n">clientTransactionHandler</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">        </span><span class="n">mTransactionHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clientTransactionHandler</span><span class="p">;</span><span class="w">  </span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="p">}</span><span class="w">  </span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="p">}</span>
</span></code></pre></div>
<p>mTransactionHandler 其实就是 ActivityThread。</p>
<h3 id="transactionexecutorexecute">TransactionExecutor.execute()<a class="headerlink" href="#transactionexecutorexecute" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="cm">/**</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="cm"> * 该类负责以正确的顺序管理事务执行。</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="cm"> */</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionExecutor</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="cm">     * 解析事务。</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="cm">     * 首先，所有回调将按它们在列表中出现的顺序执行。如果回调需要某个前置或后置执行状态，</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="cm">     * 则客户端将相应地进行过渡。然后，客户端将循环到最终的生命周期状态（如果有提供）。</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="cm">     * 否则，它将保持在初始状态或回调所需的最后状态。</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="cm">     */</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">        </span><span class="p">...</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">        </span><span class="c1">// 执行回调</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">        </span><span class="n">executeCallbacks</span><span class="p">(</span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="w">        </span><span class="c1">// 执行生命周期状态</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">        </span><span class="n">executeLifecycleState</span><span class="p">(</span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="w">        </span><span class="p">...</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="transactionexecutorexecutecallbacks">TransactionExecutor.executeCallbacks()<a class="headerlink" href="#transactionexecutorexecutecallbacks" title="Permanent link">&para;</a></h3>
<div class="language-java highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionExecutor</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="cm">     * 遍历所有由回调请求的状态，并在适当的时间执行它们。</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="cm">     */</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="nd">@VisibleForTesting</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">executeCallbacks</span><span class="p">(</span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">        </span><span class="c1">// 获取事务中的所有回调</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ClientTransactionItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">callbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transaction</span><span class="p">.</span><span class="na">getCallbacks</span><span class="p">();</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">callbacks</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">callbacks</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">            </span><span class="c1">// 如果没有回调，提前返回</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">        </span><span class="c1">// 如果启用了调试日志，记录解析回调的日志</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">DEBUG_RESOLVER</span><span class="p">)</span><span class="w"> </span><span class="n">Slog</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">tId</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;Resolving callbacks in transaction&quot;</span><span class="p">);</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">        </span><span class="c1">// 获取事务的 Activity token</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transaction</span><span class="p">.</span><span class="na">getActivityToken</span><span class="p">();</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="w">        </span><span class="c1">// 获取对应的 ActivityClientRecord</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="w">        </span><span class="n">ActivityClientRecord</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">getActivityClient</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="w">        </span><span class="c1">// 获取事务中请求的最终状态</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">ActivityLifecycleItem</span><span class="w"> </span><span class="n">finalStateRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transaction</span><span class="p">.</span><span class="na">getLifecycleStateRequest</span><span class="p">();</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">finalState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">finalStateRequest</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">finalStateRequest</span><span class="p">.</span><span class="na">getTargetState</span><span class="p">()</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="n">UNDEFINED</span><span class="p">;</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">        </span><span class="c1">// 获取最后一个请求了某种后置执行状态的回调的索引</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lastCallbackRequestingState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lastCallbackRequestingState</span><span class="p">(</span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="w">        </span><span class="c1">// 获取回调的数量</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">callbacks</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>
</span><span id="__span-14-32"><a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-33"><a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="w">            </span><span class="kd">final</span><span class="w"> </span><span class="n">ClientTransactionItem</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">callbacks</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-14-34"><a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">DEBUG_RESOLVER</span><span class="p">)</span><span class="w"> </span><span class="n">Slog</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">tId</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;Resolving callback: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">item</span><span class="p">);</span>
</span><span id="__span-14-35"><a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="w">            </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">postExecutionState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="na">getPostExecutionState</span><span class="p">();</span>
</span><span id="__span-14-36"><a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a>
</span><span id="__span-14-37"><a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="w">            </span><span class="c1">// 如果回调需要定义的前置执行状态</span>
</span><span id="__span-14-38"><a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="na">shouldHaveDefinedPreExecutionState</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-39"><a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="w">                </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">closestPreExecutionState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mHelper</span><span class="p">.</span><span class="na">getClosestPreExecutionState</span><span class="p">(</span><span class="n">r</span><span class="p">,</span>
</span><span id="__span-14-40"><a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="w">                        </span><span class="n">item</span><span class="p">.</span><span class="na">getPostExecutionState</span><span class="p">());</span>
</span><span id="__span-14-41"><a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">closestPreExecutionState</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">UNDEFINED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-42"><a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="w">                    </span><span class="n">cycleToPath</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">closestPreExecutionState</span><span class="p">,</span><span class="w"> </span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-14-43"><a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-14-44"><a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-14-45"><a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a>
</span><span id="__span-14-46"><a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="hll"><span class="w">            </span><span class="c1">// 执行回调</span>
</span></span><span id="__span-14-47"><a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a><span class="hll"><span class="w">            </span><span class="n">item</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">mTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">);</span>
</span></span><span id="__span-14-48"><a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a><span class="hll"><span class="w">            </span><span class="c1">// 执行回调后的操作</span>
</span></span><span id="__span-14-49"><a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a><span class="hll"><span class="w">            </span><span class="n">item</span><span class="p">.</span><span class="na">postExecute</span><span class="p">(</span><span class="n">mTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">);</span>
</span></span><span id="__span-14-50"><a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a><span class="hll"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-14-51"><a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a><span class="hll"><span class="w">                </span><span class="c1">// 启动活动请求将创建一个活动记录</span>
</span></span><span id="__span-14-52"><a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a><span class="hll"><span class="w">                </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">getActivityClient</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>
</span></span><span id="__span-14-53"><a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a><span class="hll"><span class="w">            </span><span class="p">}</span>
</span></span><span id="__span-14-54"><a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a>
</span><span id="__span-14-55"><a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a><span class="w">            </span><span class="c1">// 如果回调有后置执行状态且活动记录不为空</span>
</span><span id="__span-14-56"><a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">postExecutionState</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">UNDEFINED</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-57"><a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a><span class="w">                </span><span class="c1">// 跳过最后一个过渡，并通过显式状态请求执行它</span>
</span><span id="__span-14-58"><a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a><span class="w">                </span><span class="kd">final</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">shouldExcludeLastTransition</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-14-59"><a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a><span class="w">                        </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">lastCallbackRequestingState</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">finalState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">postExecutionState</span><span class="p">;</span>
</span><span id="__span-14-60"><a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a><span class="w">                </span><span class="n">cycleToPath</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">postExecutionState</span><span class="p">,</span><span class="w"> </span><span class="n">shouldExcludeLastTransition</span><span class="p">,</span><span class="w"> </span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-14-61"><a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-14-62"><a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-14-63"><a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-64"><a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a>
</span><span id="__span-14-65"><a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a><span class="p">}</span>
</span></code></pre></div>
<p>closestPreExecutionState 和 postExecutionState 都是 UNDEFINED，所以我们只关心高亮的代码部分，也就是 item.execute() 和 item.postExecute() 。</p>
<p>这里主线任务是调用 item 的 execute()，支线任务是调用 item 的 postExecute() 。</p>
<p>item 是 LaunchActivityItem。</p>
<h4 id="launchactivityitemexecute">LaunchActivityItem.execute()<a class="headerlink" href="#launchactivityitemexecute" title="Permanent link">&para;</a></h4>
<div class="language-java highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LaunchActivityItem</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientTransactionItem</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="nd">@Override</span><span class="w">  </span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="n">ClientTransactionHandler</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">            </span><span class="n">PendingTransactionActions</span><span class="w"> </span><span class="n">pendingActions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">        </span><span class="n">Trace</span><span class="p">.</span><span class="na">traceBegin</span><span class="p">(</span><span class="n">TRACE_TAG_ACTIVITY_MANAGER</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;activityStart&quot;</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">        </span><span class="n">ActivityClientRecord</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ActivityClientRecord</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">mIntent</span><span class="p">,</span><span class="w"> </span><span class="n">mIdent</span><span class="p">,</span><span class="w"> </span><span class="n">mInfo</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">                </span><span class="n">mOverrideConfig</span><span class="p">,</span><span class="w"> </span><span class="n">mReferrer</span><span class="p">,</span><span class="w"> </span><span class="n">mVoiceInteractor</span><span class="p">,</span><span class="w"> </span><span class="n">mState</span><span class="p">,</span><span class="w"> </span><span class="n">mPersistentState</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">                </span><span class="n">mPendingResults</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingNewIntents</span><span class="p">,</span><span class="w"> </span><span class="n">mActivityOptions</span><span class="p">,</span><span class="w"> </span><span class="n">mIsForward</span><span class="p">,</span><span class="w"> </span><span class="n">mProfilerInfo</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">                </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">mAssistToken</span><span class="p">,</span><span class="w"> </span><span class="n">mShareableActivityToken</span><span class="p">,</span><span class="w"> </span><span class="n">mLaunchedFromBubble</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">                </span><span class="n">mTaskFragmentToken</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">        </span><span class="n">client</span><span class="p">.</span><span class="na">handleLaunchActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">pendingActions</span><span class="p">,</span><span class="w"> </span><span class="n">mDeviceId</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="cm">/* customIntent */</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">        </span><span class="n">Trace</span><span class="p">.</span><span class="na">traceEnd</span><span class="p">(</span><span class="n">TRACE_TAG_ACTIVITY_MANAGER</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="p">}</span>
</span></code></pre></div>
<p>这里的 client 就是 TransactionExecutor 构造函数拿到的 ActivityThread。</p>
<p>所以这里最终调到了 ActivityThread.handleLaunchActivity()，走 Activity 的 onCreate() 生命周期。</p>
<h4 id="launchactivityitempostexecute">LaunchActivityItem.postExecute()<a class="headerlink" href="#launchactivityitempostexecute" title="Permanent link">&para;</a></h4>
<div class="language-java highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LaunchActivityItem</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientTransactionItem</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="nd">@Override</span><span class="w">  </span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">postExecute</span><span class="p">(</span><span class="nd">@NonNull</span><span class="w"> </span><span class="n">ClientTransactionHandler</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">            </span><span class="nd">@NonNull</span><span class="w"> </span><span class="n">PendingTransactionActions</span><span class="w"> </span><span class="n">pendingActions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">        </span><span class="n">client</span><span class="p">.</span><span class="na">countLaunchingActivities</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="p">}</span><span class="w">  </span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="p">}</span>
</span></code></pre></div>
<p>计数-1</p>
<blockquote>
<p>到这里执行完第一个 item 了，我们回到 TransactionExecutor.executeTransactionItems() 中继续for循环。</p>
</blockquote>
<h3 id="transactionexecutorexecutelifecyclestate">TransactionExecutor.executeLifecycleState()<a class="headerlink" href="#transactionexecutorexecutelifecyclestate" title="Permanent link">&para;</a></h3>
<p>当前案例中，ActivityLifecycleItem 是 ResumeActivityItem 。</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionExecutor</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="cm">     * 如果事务请求了最终状态，转换到该最终状态。</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="cm">     */</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">executeLifecycleState</span><span class="p">(</span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">        </span><span class="c1">// 获取事务中请求的生命周期状态</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">ActivityLifecycleItem</span><span class="w"> </span><span class="n">lifecycleItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transaction</span><span class="p">.</span><span class="na">getLifecycleStateRequest</span><span class="p">();</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lifecycleItem</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="w">            </span><span class="c1">// 如果没有生命周期请求，提前返回</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="w">        </span><span class="c1">// 获取事务的 Activity token</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">IBinder</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transaction</span><span class="p">.</span><span class="na">getActivityToken</span><span class="p">();</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="w">        </span><span class="c1">// 获取对应的 ActivityClientRecord</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">ActivityClientRecord</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">getActivityClient</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="w">        </span><span class="c1">// 如果启用了调试日志，记录解析生命周期状态的日志</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">DEBUG_RESOLVER</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a><span class="w">            </span><span class="n">Slog</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">tId</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;Resolving lifecycle state: &quot;</span>
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a><span class="w">                    </span><span class="o">+</span><span class="w"> </span><span class="n">lifecycleItem</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; for activity: &quot;</span>
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a><span class="w">                    </span><span class="o">+</span><span class="w"> </span><span class="n">getShortActivityName</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">mTransactionHandler</span><span class="p">));</span>
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a><span class="w">            </span><span class="c1">// 如果客户端记录不存在，忽略请求</span>
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>
</span><span id="__span-17-31"><a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a><span class="w">        </span><span class="c1">// 转换到最终请求状态之前的状态</span>
</span><span id="__span-17-32"><a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a><span class="w">        </span><span class="n">cycleToPath</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">lifecycleItem</span><span class="p">.</span><span class="na">getTargetState</span><span class="p">(),</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="cm">/* excludeLastState */</span><span class="p">,</span><span class="w"> </span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-17-33"><a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>
</span><span id="__span-17-34"><a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a><span class="w">        </span><span class="c1">// 使用正确的参数执行最终的过渡</span>
</span><span id="__span-17-35"><a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a><span class="w">        </span><span class="n">lifecycleItem</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">mTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">);</span>
</span><span id="__span-17-36"><a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a><span class="w">        </span><span class="n">lifecycleItem</span><span class="p">.</span><span class="na">postExecute</span><span class="p">(</span><span class="n">mTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">);</span>
</span><span id="__span-17-37"><a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-17-38"><a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>
</span><span id="__span-17-39"><a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a>
</span><span id="__span-17-40"><a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a><span class="p">}</span>
</span></code></pre></div>
<p>这里跟 TransactionExecutor.executeLifecycleState() 思路差不多，主线任务是调用 item 的 execute()，支线任务是调用 item 的 postExecute() 。</p>
<p>但在这之前调用了 cycleToPath() ，这点很有意思哈。</p>
<p>刚才 LaunchActivityItem 只是走 Activity 的 onCreate() 生命周期。
而这里 ResumeActivityItem 从字面意思显然是要执行 Activity 的 onResume() 生命周期。但这两者之间还缺少了一个生命周期 onStart()。</p>
<p>所以 cycleToPath() 的作用就是计算 Activity 的生命周期路径，如果要走的路径跟现在的路径中间还有，则先补齐。</p>
<p>简单点，onCreate 是第一步，onStart 是第二步，onResume 是第三步；现在只走到了第一步，要走到第三步，必现先走到第二步，才能从第二步走到第三步。</p>
<h4 id="transactionexecutorcycletopath">TransactionExecutor.cycleToPath()<a class="headerlink" href="#transactionexecutorcycletopath" title="Permanent link">&para;</a></h4>
<div class="language-java highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionExecutor</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="cm">     * 在状态之间转换客户端，并且可以选择不执行序列中的最后一步。</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="cm">     * 这是在解析生命周期状态请求时使用的，当最后一步需要用一些特定的参数执行时。</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="cm">     *</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="cm">     * @param r 当前的 ActivityClientRecord 实例。</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="cm">     * @param finish 最终状态。</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="cm">     * @param excludeLastState 是否排除最后的状态。</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="cm">     * @param transaction 当前的 ClientTransaction 实例。</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="cm">     */</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">cycleToPath</span><span class="p">(</span><span class="n">ActivityClientRecord</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">finish</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">excludeLastState</span><span class="p">,</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">            </span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">        </span><span class="c1">// 获取当前的生命周期状态</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="na">getLifecycleState</span><span class="p">();</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">        </span><span class="p">...</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">        </span><span class="c1">// 获取从 start 到 finish 的生命周期路径，可能会排除最后的状态</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">IntArray</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mHelper</span><span class="p">.</span><span class="na">getLifecyclePath</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">finish</span><span class="p">,</span><span class="w"> </span><span class="n">excludeLastState</span><span class="p">);</span>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="w">        </span><span class="c1">// 执行生命周期序列</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="w">        </span><span class="n">performLifecycleSequence</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">transaction</span><span class="p">);</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="p">}</span>
</span></code></pre></div>
<p>回到刚才调用这个函数的地方：</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">cycleToPath</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">lifecycleItem</span><span class="p">.</span><span class="na">getTargetState</span><span class="p">(),</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="cm">/* excludeLastState */</span><span class="p">,</span><span class="w"> </span><span class="n">transaction</span><span class="p">);</span>
</span></code></pre></div>
<ul>
<li>r <blockquote>
<p>就是 ActivityThread 里的 ActivityClientRecord，</p>
</blockquote>
</li>
<li>lifecycleItem.getTargetState() <blockquote>
<p>因为 lifecycleItem 是 ResumeActivityItem，使用返回的就是 ON_RESUME，也就是3。
所以传给 cycleToPath() 函数的 finish = 3</p>
</blockquote>
</li>
</ul>
<p>回到 cycleToPath() 函数里，我们继续分析 start 和 path 是怎么得到的。</p>
<h5 id="activityclientrecordgetlifecyclestate">ActivityClientRecord.getLifecycleState()<a class="headerlink" href="#activityclientrecordgetlifecyclestate" title="Permanent link">&para;</a></h5>
<div class="language-java highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ActivityThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientTransactionHandler</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">        </span><span class="kd">implements</span><span class="w"> </span><span class="n">ActivityThreadInternal</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ActivityClientRecord</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getLifecycleState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">mLifecycleState</span><span class="p">;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setState</span><span class="p">(</span><span class="nd">@LifecycleState</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">newLifecycleState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">            </span><span class="n">mLifecycleState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newLifecycleState</span><span class="p">;</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="p">}</span>
</span></code></pre></div>
<p>在 onCeate() 流程中设置了状态。</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ActivityThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ClientTransactionHandler</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">        </span><span class="kd">implements</span><span class="w"> </span><span class="n">ActivityThreadInternal</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Activity</span><span class="w"> </span><span class="nf">performLaunchActivity</span><span class="p">(</span><span class="n">ActivityClientRecord</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">Intent</span><span class="w"> </span><span class="n">customIntent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">        </span><span class="p">...</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="na">setState</span><span class="p">(</span><span class="n">ON_CREATE</span><span class="p">);</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">        </span><span class="p">...</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="p">}</span>
</span></code></pre></div>
<p>所以 cycleToPath() 函数里 start 就是 ON_CREATE，也就是1</p>
<h5 id="transactionexecutorhelpergetlifecyclepath">TransactionExecutorHelper.getLifecyclePath()<a class="headerlink" href="#transactionexecutorhelpergetlifecyclepath" title="Permanent link">&para;</a></h5>
<div class="language-java highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionExecutorHelper</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="cm">     * 计算活动在主要生命周期状态之间的路径，并用值填充 {@link #mLifecycleSequence}，这些值从初始状态后的状态开始。</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="cm">     * &lt;p&gt;注意：返回值在此类中内部使用，并不是副本。在调用此类的其他方法后，其内容可能会改变。&lt;/p&gt;</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="cm">     *</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="cm">     * @param start 初始状态。</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="cm">     * @param finish 最终状态。</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="cm">     * @param excludeLastState 是否排除最后的状态。</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="cm">     * @return 包含生命周期路径的 IntArray。</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="cm">     * @throws IllegalArgumentException 如果状态是未定义的或非法的，则抛出此异常。</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="cm">     */</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">    </span><span class="nd">@VisibleForTesting</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">IntArray</span><span class="w"> </span><span class="nf">getLifecyclePath</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">finish</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">excludeLastState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">        </span><span class="c1">// 如果初始状态或最终状态是未定义的，抛出异常。</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UNDEFINED</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">finish</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UNDEFINED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Can&#39;t resolve lifecycle path for undefined state&quot;</span><span class="p">);</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">        </span><span class="c1">// 如果状态是 ON_RESTART，抛出异常。</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ON_RESTART</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">finish</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ON_RESTART</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Can&#39;t start or finish in intermittent RESTART state&quot;</span><span class="p">);</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="w">        </span><span class="c1">// 如果最终状态是 PRE_ON_CREATE 且初始状态不等于最终状态，抛出异常。</span>
</span><span id="__span-22-24"><a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">finish</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">PRE_ON_CREATE</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">finish</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-25"><a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Can only start in pre-onCreate state&quot;</span><span class="p">);</span>
</span><span id="__span-22-26"><a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-22-27"><a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a>
</span><span id="__span-22-28"><a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a><span class="w">        </span><span class="c1">// 清空生命周期序列</span>
</span><span id="__span-22-29"><a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a><span class="w">        </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">clear</span><span class="p">();</span>
</span><span id="__span-22-30"><a id="__codelineno-22-30" name="__codelineno-22-30" href="#__codelineno-22-30"></a>
</span><span id="__span-22-31"><a id="__codelineno-22-31" name="__codelineno-22-31" href="#__codelineno-22-31"></a><span class="w">        </span><span class="c1">// 如果最终状态大于等于初始状态</span>
</span><span id="__span-22-32"><a id="__codelineno-22-32" name="__codelineno-22-32" href="#__codelineno-22-32"></a><span class="hll"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">finish</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">start</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-22-33"><a id="__codelineno-22-33" name="__codelineno-22-33" href="#__codelineno-22-33"></a><span class="w">            </span><span class="c1">// 特殊情况：从 ON_START 到 ON_STOP，不需要经过 ON_RESUME 和 ON_PAUSE 状态。</span>
</span><span id="__span-22-34"><a id="__codelineno-22-34" name="__codelineno-22-34" href="#__codelineno-22-34"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ON_START</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">finish</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ON_STOP</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-35"><a id="__codelineno-22-35" name="__codelineno-22-35" href="#__codelineno-22-35"></a><span class="w">                </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">ON_STOP</span><span class="p">);</span>
</span><span id="__span-22-36"><a id="__codelineno-22-36" name="__codelineno-22-36" href="#__codelineno-22-36"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-37"><a id="__codelineno-22-37" name="__codelineno-22-37" href="#__codelineno-22-37"></a><span class="w">                </span><span class="c1">// 正常情况下，依次添加状态。</span>
</span><span id="__span-22-38"><a id="__codelineno-22-38" name="__codelineno-22-38" href="#__codelineno-22-38"></a><span class="hll"><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">finish</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-22-39"><a id="__codelineno-22-39" name="__codelineno-22-39" href="#__codelineno-22-39"></a><span class="hll"><span class="w">                    </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span id="__span-22-40"><a id="__codelineno-22-40" name="__codelineno-22-40" href="#__codelineno-22-40"></a><span class="hll"><span class="w">                </span><span class="p">}</span>
</span></span><span id="__span-22-41"><a id="__codelineno-22-41" name="__codelineno-22-41" href="#__codelineno-22-41"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-22-42"><a id="__codelineno-22-42" name="__codelineno-22-42" href="#__codelineno-22-42"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 如果最终状态小于初始状态，不能简单地逆序循环</span>
</span><span id="__span-22-43"><a id="__codelineno-22-43" name="__codelineno-22-43" href="#__codelineno-22-43"></a><span class="w">            </span><span class="c1">// 特殊情况：从 ON_PAUSE 到 ON_RESUME，直接跳到 ON_RESUME。</span>
</span><span id="__span-22-44"><a id="__codelineno-22-44" name="__codelineno-22-44" href="#__codelineno-22-44"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ON_PAUSE</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">finish</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ON_RESUME</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-45"><a id="__codelineno-22-45" name="__codelineno-22-45" href="#__codelineno-22-45"></a><span class="w">                </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">ON_RESUME</span><span class="p">);</span>
</span><span id="__span-22-46"><a id="__codelineno-22-46" name="__codelineno-22-46" href="#__codelineno-22-46"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">ON_STOP</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">finish</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">ON_START</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-47"><a id="__codelineno-22-47" name="__codelineno-22-47" href="#__codelineno-22-47"></a><span class="w">                </span><span class="c1">// 重新启动并转到所需状态。</span>
</span><span id="__span-22-48"><a id="__codelineno-22-48" name="__codelineno-22-48" href="#__codelineno-22-48"></a>
</span><span id="__span-22-49"><a id="__codelineno-22-49" name="__codelineno-22-49" href="#__codelineno-22-49"></a><span class="w">                </span><span class="c1">// 首先进入停止状态。</span>
</span><span id="__span-22-50"><a id="__codelineno-22-50" name="__codelineno-22-50" href="#__codelineno-22-50"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">ON_STOP</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-51"><a id="__codelineno-22-51" name="__codelineno-22-51" href="#__codelineno-22-51"></a><span class="w">                    </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-22-52"><a id="__codelineno-22-52" name="__codelineno-22-52" href="#__codelineno-22-52"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-22-53"><a id="__codelineno-22-53" name="__codelineno-22-53" href="#__codelineno-22-53"></a><span class="w">                </span><span class="c1">// 重启</span>
</span><span id="__span-22-54"><a id="__codelineno-22-54" name="__codelineno-22-54" href="#__codelineno-22-54"></a><span class="w">                </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">ON_RESTART</span><span class="p">);</span>
</span><span id="__span-22-55"><a id="__codelineno-22-55" name="__codelineno-22-55" href="#__codelineno-22-55"></a><span class="w">                </span><span class="c1">// 转到所需状态</span>
</span><span id="__span-22-56"><a id="__codelineno-22-56" name="__codelineno-22-56" href="#__codelineno-22-56"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ON_START</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">finish</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-57"><a id="__codelineno-22-57" name="__codelineno-22-57" href="#__codelineno-22-57"></a><span class="w">                    </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-22-58"><a id="__codelineno-22-58" name="__codelineno-22-58" href="#__codelineno-22-58"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-22-59"><a id="__codelineno-22-59" name="__codelineno-22-59" href="#__codelineno-22-59"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-60"><a id="__codelineno-22-60" name="__codelineno-22-60" href="#__codelineno-22-60"></a><span class="w">                </span><span class="c1">// 重新启动并转到所需状态。</span>
</span><span id="__span-22-61"><a id="__codelineno-22-61" name="__codelineno-22-61" href="#__codelineno-22-61"></a>
</span><span id="__span-22-62"><a id="__codelineno-22-62" name="__codelineno-22-62" href="#__codelineno-22-62"></a><span class="w">                </span><span class="c1">// 首先进入销毁状态。</span>
</span><span id="__span-22-63"><a id="__codelineno-22-63" name="__codelineno-22-63" href="#__codelineno-22-63"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">ON_DESTROY</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-64"><a id="__codelineno-22-64" name="__codelineno-22-64" href="#__codelineno-22-64"></a><span class="w">                    </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-22-65"><a id="__codelineno-22-65" name="__codelineno-22-65" href="#__codelineno-22-65"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-22-66"><a id="__codelineno-22-66" name="__codelineno-22-66" href="#__codelineno-22-66"></a><span class="w">                </span><span class="c1">// 转到所需状态</span>
</span><span id="__span-22-67"><a id="__codelineno-22-67" name="__codelineno-22-67" href="#__codelineno-22-67"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ON_CREATE</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">finish</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-68"><a id="__codelineno-22-68" name="__codelineno-22-68" href="#__codelineno-22-68"></a><span class="w">                    </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-22-69"><a id="__codelineno-22-69" name="__codelineno-22-69" href="#__codelineno-22-69"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-22-70"><a id="__codelineno-22-70" name="__codelineno-22-70" href="#__codelineno-22-70"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-22-71"><a id="__codelineno-22-71" name="__codelineno-22-71" href="#__codelineno-22-71"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-22-72"><a id="__codelineno-22-72" name="__codelineno-22-72" href="#__codelineno-22-72"></a>
</span><span id="__span-22-73"><a id="__codelineno-22-73" name="__codelineno-22-73" href="#__codelineno-22-73"></a><span class="w">        </span><span class="c1">// 如果需要排除最后的状态转换，并且生命周期序列不为空，移除最后一个状态。</span>
</span><span id="__span-22-74"><a id="__codelineno-22-74" name="__codelineno-22-74" href="#__codelineno-22-74"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">excludeLastState</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-75"><a id="__codelineno-22-75" name="__codelineno-22-75" href="#__codelineno-22-75"></a><span class="w">            </span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">mLifecycleSequence</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-22-76"><a id="__codelineno-22-76" name="__codelineno-22-76" href="#__codelineno-22-76"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-22-77"><a id="__codelineno-22-77" name="__codelineno-22-77" href="#__codelineno-22-77"></a>
</span><span id="__span-22-78"><a id="__codelineno-22-78" name="__codelineno-22-78" href="#__codelineno-22-78"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mLifecycleSequence</span><span class="p">;</span>
</span><span id="__span-22-79"><a id="__codelineno-22-79" name="__codelineno-22-79" href="#__codelineno-22-79"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-22-80"><a id="__codelineno-22-80" name="__codelineno-22-80" href="#__codelineno-22-80"></a><span class="p">}</span>
</span></code></pre></div>
<p>经过前面的分析，我们知道 start = 1 和 finish = 3 。
所以 mLifecycleSequence 添加了 2 和 3，请注意看代码高亮部分。</p>
<h5 id="transactionexecutorperformlifecyclesequence">TransactionExecutor.performLifecycleSequence()<a class="headerlink" href="#transactionexecutorperformlifecyclesequence" title="Permanent link">&para;</a></h5>
<div class="language-java highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionExecutor</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="cm">     * 通过预先初始化的状态序列来转换客户端。</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="cm">     *</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="cm">     * @param r 表示活动的 ActivityClientRecord 对象</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="cm">     * @param path 表示生命周期路径的 IntArray 对象</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="cm">     * @param transaction 表示当前事务的 ClientTransaction 对象</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="cm">     */</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">performLifecycleSequence</span><span class="p">(</span><span class="n">ActivityClientRecord</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">IntArray</span><span class="w"> </span><span class="n">path</span><span class="p">,</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="w">            </span><span class="n">ClientTransaction</span><span class="w"> </span><span class="n">transaction</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="w">            </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">ON_CREATE</span><span class="p">:</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="w">                    </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">handleLaunchActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">,</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="w">                            </span><span class="n">Context</span><span class="p">.</span><span class="na">DEVICE_ID_INVALID</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="cm">/* customIntent */</span><span class="p">);</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="hll"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">ON_START</span><span class="p">:</span>
</span></span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a><span class="hll"><span class="w">                    </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">handleStartActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">,</span>
</span></span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a><span class="hll"><span class="w">                            </span><span class="kc">null</span><span class="w"> </span><span class="cm">/* activityOptions */</span><span class="p">);</span>
</span></span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a><span class="hll"><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span></span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a><span class="hll"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">ON_RESUME</span><span class="p">:</span>
</span></span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a><span class="hll"><span class="w">                    </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">handleResumeActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* finalStateRequest */</span><span class="p">,</span>
</span></span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a><span class="hll"><span class="w">                            </span><span class="n">r</span><span class="p">.</span><span class="na">isForward</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* shouldSendCompatFakeFocus */</span><span class="p">,</span>
</span></span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a><span class="hll"><span class="w">                            </span><span class="s">&quot;LIFECYCLER_RESUME_ACTIVITY&quot;</span><span class="p">);</span>
</span></span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a><span class="hll"><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span></span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">ON_PAUSE</span><span class="p">:</span>
</span><span id="__span-23-29"><a id="__codelineno-23-29" name="__codelineno-23-29" href="#__codelineno-23-29"></a><span class="w">                    </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">handlePauseActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* finished */</span><span class="p">,</span>
</span><span id="__span-23-30"><a id="__codelineno-23-30" name="__codelineno-23-30" href="#__codelineno-23-30"></a><span class="w">                            </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* userLeaving */</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="cm">/* configChanges */</span><span class="p">,</span>
</span><span id="__span-23-31"><a id="__codelineno-23-31" name="__codelineno-23-31" href="#__codelineno-23-31"></a><span class="w">                            </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* autoEnteringPip */</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">,</span>
</span><span id="__span-23-32"><a id="__codelineno-23-32" name="__codelineno-23-32" href="#__codelineno-23-32"></a><span class="w">                            </span><span class="s">&quot;LIFECYCLER_PAUSE_ACTIVITY&quot;</span><span class="p">);</span>
</span><span id="__span-23-33"><a id="__codelineno-23-33" name="__codelineno-23-33" href="#__codelineno-23-33"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-23-34"><a id="__codelineno-23-34" name="__codelineno-23-34" href="#__codelineno-23-34"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">ON_STOP</span><span class="p">:</span>
</span><span id="__span-23-35"><a id="__codelineno-23-35" name="__codelineno-23-35" href="#__codelineno-23-35"></a><span class="w">                    </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">handleStopActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="cm">/* configChanges */</span><span class="p">,</span>
</span><span id="__span-23-36"><a id="__codelineno-23-36" name="__codelineno-23-36" href="#__codelineno-23-36"></a><span class="w">                            </span><span class="n">mPendingActions</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* finalStateRequest */</span><span class="p">,</span>
</span><span id="__span-23-37"><a id="__codelineno-23-37" name="__codelineno-23-37" href="#__codelineno-23-37"></a><span class="w">                            </span><span class="s">&quot;LIFECYCLER_STOP_ACTIVITY&quot;</span><span class="p">);</span>
</span><span id="__span-23-38"><a id="__codelineno-23-38" name="__codelineno-23-38" href="#__codelineno-23-38"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-23-39"><a id="__codelineno-23-39" name="__codelineno-23-39" href="#__codelineno-23-39"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">ON_DESTROY</span><span class="p">:</span>
</span><span id="__span-23-40"><a id="__codelineno-23-40" name="__codelineno-23-40" href="#__codelineno-23-40"></a><span class="w">                    </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">handleDestroyActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* finishing */</span><span class="p">,</span>
</span><span id="__span-23-41"><a id="__codelineno-23-41" name="__codelineno-23-41" href="#__codelineno-23-41"></a><span class="w">                            </span><span class="mi">0</span><span class="w"> </span><span class="cm">/* configChanges */</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* getNonConfigInstance */</span><span class="p">,</span>
</span><span id="__span-23-42"><a id="__codelineno-23-42" name="__codelineno-23-42" href="#__codelineno-23-42"></a><span class="w">                            </span><span class="s">&quot;performLifecycleSequence. cycling to:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
</span><span id="__span-23-43"><a id="__codelineno-23-43" name="__codelineno-23-43" href="#__codelineno-23-43"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-23-44"><a id="__codelineno-23-44" name="__codelineno-23-44" href="#__codelineno-23-44"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">ON_RESTART</span><span class="p">:</span>
</span><span id="__span-23-45"><a id="__codelineno-23-45" name="__codelineno-23-45" href="#__codelineno-23-45"></a><span class="w">                    </span><span class="n">mTransactionHandler</span><span class="p">.</span><span class="na">performRestartActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="cm">/* start */</span><span class="p">);</span>
</span><span id="__span-23-46"><a id="__codelineno-23-46" name="__codelineno-23-46" href="#__codelineno-23-46"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-23-47"><a id="__codelineno-23-47" name="__codelineno-23-47" href="#__codelineno-23-47"></a><span class="w">                </span><span class="k">default</span><span class="p">:</span>
</span><span id="__span-23-48"><a id="__codelineno-23-48" name="__codelineno-23-48" href="#__codelineno-23-48"></a><span class="w">                    </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Unexpected lifecycle state: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">state</span><span class="p">);</span>
</span><span id="__span-23-49"><a id="__codelineno-23-49" name="__codelineno-23-49" href="#__codelineno-23-49"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-23-50"><a id="__codelineno-23-50" name="__codelineno-23-50" href="#__codelineno-23-50"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-23-51"><a id="__codelineno-23-51" name="__codelineno-23-51" href="#__codelineno-23-51"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-23-52"><a id="__codelineno-23-52" name="__codelineno-23-52" href="#__codelineno-23-52"></a>
</span><span id="__span-23-53"><a id="__codelineno-23-53" name="__codelineno-23-53" href="#__codelineno-23-53"></a><span class="p">}</span>
</span></code></pre></div>
<p>由前面可知，path有两个元素，值分别为2和3，也就是 ON_START 和 ON_RESUME。</p>
<ul>
<li>
<p>ON_START</p>
<blockquote>
<p>调的是 ClientTransactionHandler.handleStartActivity()，最终调到了 ActivityThread.handleStartActivity()，走 Activity 的 onStart() 生命周期。</p>
</blockquote>
</li>
<li>
<p>ON_RESUME</p>
<blockquote>
<p>调的是 ClientTransactionHandler.handleResumeActivity()，最终调到了 ActivityThread.handleResumeActivity()，走 Activity 的 onResume() 生命周期。</p>
</blockquote>
</li>
</ul>
<p>到这里 TransactionExecutor.cycleToPath() 的使命完成了，继续回到调用其地方，也就是 TransactionExecutor.executeLifecycleState()。</p>
<h4 id="resumeactivityitemexecute">ResumeActivityItem.execute()<a class="headerlink" href="#resumeactivityitemexecute" title="Permanent link">&para;</a></h4>
<p>TransactionExecutor.executeLifecycleState() 调用 TransactionExecutor.cycleToPath() 之后，接着调用</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">lifecycleItem</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">mTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="n">lifecycleItem</span><span class="p">.</span><span class="na">postExecute</span><span class="p">(</span><span class="n">mTransactionHandler</span><span class="p">,</span><span class="w"> </span><span class="n">mPendingActions</span><span class="p">);</span>
</span></code></pre></div>
<p>执行接下来的操作。</p>
<p>前面我们提到过 lifecycleItem 就是 ResumeActivityItem，所以先看 ResumeActivityItem.execute() 都干了什么。</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nd">@Override</span><span class="w">  </span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="nd">@NonNull</span><span class="w"> </span><span class="n">ClientTransactionHandler</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="nd">@NonNull</span><span class="w"> </span><span class="n">ActivityClientRecord</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">        </span><span class="nd">@NonNull</span><span class="w"> </span><span class="n">PendingTransactionActions</span><span class="w"> </span><span class="n">pendingActions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="n">Trace</span><span class="p">.</span><span class="na">traceBegin</span><span class="p">(</span><span class="n">TRACE_TAG_ACTIVITY_MANAGER</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;activityResume&quot;</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="na">handleResumeActivity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="cm">/* finalStateRequest */</span><span class="p">,</span><span class="w"> </span><span class="n">mIsForward</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">            </span><span class="n">mShouldSendCompatFakeFocus</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RESUME_ACTIVITY&quot;</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">    </span><span class="n">Trace</span><span class="p">.</span><span class="na">traceEnd</span><span class="p">(</span><span class="n">TRACE_TAG_ACTIVITY_MANAGER</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="p">}</span>
</span></code></pre></div>
<p>所以这里最终调到了 ActivityThread.handleResumeActivity()，走 Activity 的 onResume() 生命周期。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>前面执行 cycleToPath() 时已经走了走 Activity 的 onResume() 生命周期，这里再走一次不是重复了吗？</p>
<p>其实不然，在 ActivityThread.handleResumeActivity() 中会判断是否已经执行过了，如果是就不再执行。</p>
</div>
<h4 id="resumeactivityitempostexecute">ResumeActivityItem.postExecute()<a class="headerlink" href="#resumeactivityitempostexecute" title="Permanent link">&para;</a></h4>
<div class="language-java highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nd">@Override</span><span class="w">  </span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">postExecute</span><span class="p">(</span><span class="nd">@NonNull</span><span class="w"> </span><span class="n">ClientTransactionHandler</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">        </span><span class="nd">@NonNull</span><span class="w"> </span><span class="n">PendingTransactionActions</span><span class="w"> </span><span class="n">pendingActions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">    </span><span class="c1">// TODO(lifecycler): Use interface callback instead of actual implementation.  </span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="n">ActivityClient</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">activityResumed</span><span class="p">(</span><span class="n">getActivityToken</span><span class="p">(),</span><span class="w">  </span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">            </span><span class="n">client</span><span class="p">.</span><span class="na">isHandleSplashScreenExit</span><span class="p">(</span><span class="n">getActivityToken</span><span class="p">()));</span><span class="w">  </span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="p">}</span>
</span></code></pre></div>
<p>到这里基本上就知道了 system_server 是如何通过 server transaction 来启动 Activity 的各种生命周期的。</p>
<h2 id="_5">总结<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>今后只要看到在 system_server 要通过 server transaction 来执行这些 item，可以不用一点点跟进其调用流程，直接跳转到 ActivityThread对应的 Handle方法 和 Perform方法 。</p>
<p>关于执行 Activity 生命周期的相关 item 如下：</p>
<table>
<thead>
<tr>
<th>Lifecycle</th>
<th>Item</th>
<th>Handle方法</th>
<th>Perform方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>ON_CREATE</td>
<td>LaunchActivityItem</td>
<td>handleLaunchActivity</td>
<td>performLaunchActivity</td>
</tr>
<tr>
<td>ON_START</td>
<td>StartActivityItem</td>
<td>handleStartActivity</td>
<td>无</td>
</tr>
<tr>
<td>ON_RESUME</td>
<td>ResumeActivityItem</td>
<td>handleResumeActivity</td>
<td>performResumeActivity</td>
</tr>
<tr>
<td>ON_PAUSE</td>
<td>PauseActivityItem</td>
<td>handlePauseActivity</td>
<td>performPauseActivity</td>
</tr>
<tr>
<td>ON_STOP</td>
<td>StopActivityItem</td>
<td>handleStopActivity</td>
<td>performStopActivityInner</td>
</tr>
<tr>
<td>ON_DESTROY</td>
<td>DestroyActivityItem</td>
<td>handleDestroyActivity</td>
<td>performDestroyActivity</td>
</tr>
</tbody>
</table>







  
  






  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->

    <script src="https://giscus.app/client.js"
        data-repo="i-rtfsc/i-rtfsc.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNTU2NzA2OTE="
        data-category="Q&A"
        data-category-id="DIC_kwDOCUdYo84CeZYU"
        data-mapping="pathname"
        data-strict="1"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        data-loading="lazy"
        data-default-reactions-enabled="1"
        crossorigin="anonymous"
        async>
    </script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme)
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>


<script src="//code.tidio.co/rqu0g9yeqzoipyjjehe84aqmiqt1ap9r.js" async></script>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
    
    
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
        
        <a href="../launch-modes/" class="md-footer__link md-footer__link--prev"
           aria-label="上一页: Activity四大启动模式">
            <div class="md-footer__button md-icon">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
                <div class="md-ellipsis">
                    Activity四大启动模式
                </div>
            </div>
        </a>
        
        
        
        <a href="../activity_client_record/" class="md-footer__link md-footer__link--next"
           aria-label="下一页: Activity框架02-ActivityClientRecord">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
                <div class="md-ellipsis">
                    Activity框架02-ActivityClientRecord
                </div>
            </div>
            <div class="md-footer__button md-icon">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
        </a>
        
    </nav>
    
    
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">
            <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2015-2025 Solo</br>The website content is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
    </div>
  
  
</div>

            
            <div class="md-copyright">
    <font size=1>
        
        <a href="https://icp.gov.moe/?keyword=20243250" target="_blank">萌ICP备20243250号</a>
        

        
        <span>&nbsp;|&nbsp;本站访问量：</span>
        <script async src="//finicounter.eu.org/finicounter.js"></script>
        <span id="finicount_views"></span>
        

        
        
        <span>&nbsp;|&nbsp;本站已经运行：</span>
        <span id="uptime"></span>
        <script>
            function calculateUptime() {
                let dateString = '2018-11-1'
                let start = new Date(dateString);
                let currentTime = new Date();
                let difference = currentTime - start;
                let days = Math.floor(difference / (1000 * 60 * 60 * 24));
                document.getElementById('uptime').textContent = days + '天';
            }

            calculateUptime()
        </script>
        
    </font>
</div>
            

            
            <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/i-rtfsc" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<anqi.huang@outlook.com>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg>
    </a>
  
</div>
            
        </div>
    </div>

</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.indexes", "navigation.top", "navigation.footer", "navigation.tracking", "navigation.path", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": {"Default": "default-tag", "Hardware": "hardware-tag", "Software": "software-tag"}, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../../../javascripts/extra.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.0.2/dist/add-html-label-6e56ed67.min.js"></script>
      
    
  </body>
</html>